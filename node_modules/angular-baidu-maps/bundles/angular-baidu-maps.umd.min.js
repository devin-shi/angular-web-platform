!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common"],e):"object"==typeof exports?exports["angular-baidu-maps.umd.min"]=e(require("@angular/core"),require("@angular/common")):t["angular-baidu-maps.umd.min"]=e(t["@angular/core"],t["@angular/common"])}(this,function(t,e){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}()},function(e,n){e.exports=t},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n(1),i=(n.n(o),n(0)),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cog=Object.assign({apiProtocol:"auto",apiVersion:"2.0",apiCallback:"angularBaiduMapsLoader",apiHostAndPath:"api.map.baidu.com/api"},t)}return t.prototype.load=function(){var t=this;if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var e=document.createElement("script");return e.type="text/javascript",e.async=!0,e.defer=!0,e.src=this._getSrc(),this._scriptLoadingPromise=new Promise(function(n,o){window[t._cog.apiCallback]=function(){n()},e.onerror=function(t){o(t)}}),document.body.appendChild(e),this._scriptLoadingPromise},t.prototype._getSrc=function(){var t;switch(this._cog.apiProtocol){case"http":t="http:";break;case"https":t="https:";break;default:t=""}var e={v:this._cog.apiVersion,ak:this._cog.apiKey,callback:this._cog.apiCallback},n=Object.keys(e).filter(function(t){return null!=e[t]}).filter(function(t){return!Array.isArray(e[t])||Array.isArray(e[t])&&e[t].length>0}).map(function(t){var n=e[t];return Array.isArray(n)?{key:t,value:n.join(",")}:{key:t,value:n}}).map(function(t){return t.key+"="+t.value}).join("&");return t+"//"+this._cog.apiHostAndPath+"?"+n},t=r([Object(o.Injectable)(),a("design:paramtypes",["function"==typeof(e=void 0!==i.a&&i.a)&&e||Object])],t);var e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(1),i=(n.n(o),n(2)),r=n(0),a=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e,n,i){this.el=t,this.COG=e,this.loader=n,this.zone=i,this.options={},this.ready=new o.EventEmitter,this.map=null}return t.prototype.ngOnInit=function(){this._initMap()},t.prototype.ngOnChanges=function(t){"options"in t&&this._updateOptions()},t.prototype._initMap=function(){var t=this;this.map||this.loader.load().then(function(){t.zone.runOutsideAngular(function(){try{t.map=new BMap.Map(t.el.nativeElement,t.options)}catch(t){console.warn("地图初始化失败",t)}}),t.ready.emit(t.map)}).catch(function(t){console.warn("js加载失败",t)})},t.prototype._updateOptions=function(){this.options=Object.assign({},this.COG.mapOptions,this.options),this.map&&this.map.setOptions(this.options)},t.prototype.destroy=function(){this.map&&(this.map.clearOverlays(),this.map.clearHotspots())},t.prototype.ngOnDestroy=function(){this.destroy()},a([Object(o.Input)(),c("design:type",Object)],t.prototype,"options",void 0),a([Object(o.Output)(),c("design:type",Object)],t.prototype,"ready",void 0),t=a([Object(o.Component)({selector:"abm-map",template:"",styles:["\n        .angular-baidu-maps-container { display:block; width:100%; height:100%; }\n    "],host:{"[class.angular-baidu-maps-container]":"true"},encapsulation:o.ViewEncapsulation.None}),c("design:paramtypes",["function"==typeof(e=void 0!==o.ElementRef&&o.ElementRef)&&e||Object,"function"==typeof(n=void 0!==r.a&&r.a)&&n||Object,"function"==typeof(s=void 0!==i.a&&i.a)&&s||Object,"function"==typeof(p=void 0!==o.NgZone&&o.NgZone)&&p||Object])],t);var e,n,s,p}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(1),i=(n.n(o),n(2)),r=n(0),a=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e,n,i){this.el=t,this.COG=e,this.loader=n,this.zone=i,this.options={},this.ready=new o.EventEmitter,this.map=null}return t.prototype.ngOnInit=function(){this._initMap()},t.prototype.ngOnChanges=function(t){"options"in t&&this._updateOptions()},t.prototype._initMap=function(){var t=this;this.map||this.loader.load().then(function(){t.zone.runOutsideAngular(function(){try{t.map=new BMap.Panorama(t.el.nativeElement,t.options)}catch(t){console.warn("全景初始化失败",t)}}),t.ready.emit(t.map)}).catch(function(t){console.warn("js加载失败",t)})},t.prototype._updateOptions=function(){this.options=Object.assign({},this.COG.panoramaOptions,this.options),this.map&&this.map.setOptions(this.options)},t.prototype.destroy=function(){},t.prototype.ngOnDestroy=function(){this.destroy()},a([Object(o.Input)(),c("design:type",Object)],t.prototype,"options",void 0),a([Object(o.Output)(),c("design:type",Object)],t.prototype,"ready",void 0),t=a([Object(o.Component)({selector:"abm-panorama",template:"",styles:["\n        .angular-baidu-maps-container { display:block; width:100%; height:100%; }\n    "],host:{"[class.angular-baidu-maps-container]":"true"},encapsulation:o.ViewEncapsulation.None}),c("design:paramtypes",["function"==typeof(e=void 0!==o.ElementRef&&o.ElementRef)&&e||Object,"function"==typeof(n=void 0!==r.a&&r.a)&&n||Object,"function"==typeof(s=void 0!==i.a&&i.a)&&s||Object,"function"==typeof(p=void 0!==o.NgZone&&o.NgZone)&&p||Object])],t);var e,n,s,p}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"AbmModule",function(){return u});var o=n(6),i=(n.n(o),n(1)),r=(n.n(i),n(3)),a=n(4),c=n(0),s=n(2);n.d(e,"AbmConfig",function(){return c.a}),n.d(e,"AbmComponent",function(){return r.a}),n.d(e,"AbmPanoramaComponent",function(){return a.a});var p=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},u=function(){function t(){}return e=t,t.forRoot=function(t){return{ngModule:e,providers:[{provide:c.a,useValue:t}]}},t=e=p([Object(i.NgModule)({imports:[o.CommonModule],providers:[s.a],declarations:[r.a,a.a],exports:[r.a,a.a]})],t);var e}()},function(t,n){t.exports=e}])});
{"version":3,"file":"countdown.js","sources":["../../__gen_lib/components/timer.ts","../../__gen_lib/components/component.ts","../../__gen_lib/ngx-countdown.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class Timer {\r\n    private fns: any[] = [];\r\n    private commands: Function[] = [];\r\n    private nextTime: number;\r\n    private ing = false;\r\n\r\n    start() {\r\n        if (this.ing === true) return;\r\n\r\n        this.ing = true;\r\n        this.nextTime = +new Date();\r\n        this.process();\r\n    }\r\n\r\n    private process() {\r\n        while (this.commands.length) {\r\n            this.commands.shift()();\r\n        }\r\n        let diff = +new Date() - this.nextTime;\r\n        const count = 1 + Math.floor(diff / 100);\r\n\r\n        diff = 100 - diff % 100;\r\n        this.nextTime += 100 * count;\r\n\r\n        let frequency: number, step: number, i: number, len: number;\r\n        for (i = 0, len = this.fns.length; i < len; i += 2) {\r\n            frequency = this.fns[i + 1];\r\n\r\n            // 100/s\r\n            if (0 === frequency) {\r\n                this.fns[i](count);\r\n                // 1000/s\r\n            } else {\r\n                // 先把末位至0，再每次加2\r\n                frequency += 2 * count - 1;\r\n\r\n                step = Math.floor(frequency / 20);\r\n                if (step > 0) {\r\n                    this.fns[i](step);\r\n                }\r\n\r\n                // 把末位还原成1\r\n                this.fns[i + 1] = frequency % 20 + 1;\r\n            }\r\n        }\r\n\r\n        if (this.ing)\r\n            setTimeout(() => { this.process(); }, diff);\r\n    }\r\n\r\n    add(fn: Function, frequency: number) {\r\n        this.commands.push(() => {\r\n            this.fns.push(fn);\r\n            this.fns.push(frequency === 1000 ? 1 : 0);\r\n            this.ing = this.fns.length > 0;\r\n        });\r\n    }\r\n\r\n    remove(fn: Function) {\r\n        this.commands.push(() => {\r\n            const i = this.fns.indexOf(fn);\r\n            if (i !== -1) {\r\n                this.fns.splice(i, 2);\r\n            }\r\n            this.ing = this.fns.length > 0;\r\n        });\r\n    }\r\n}\r\n","import { Component, ElementRef, Input, Renderer, OnChanges, SimpleChanges, OnDestroy, Output, EventEmitter, OnInit, SimpleChange } from '@angular/core';\nimport { Config } from './interfaces/config';\nimport { Hand } from './interfaces/hand';\nimport { Timer } from './timer';\n\n@Component({\n    selector: 'countdown',\n    template: `<ng-content></ng-content>`,\n    styles: [ `:host { display: none; }` ],\n    host: { '[class.count-down]': 'true' }\n})\nexport class CountdownComponent implements OnInit, OnChanges, OnDestroy {\n\n    private frequency = 1000;\n    private _notify: any = {};\n    private hands: Hand[] = [];\n    private left = 0;\n    private paused = false;\n    /** 两种情况会触发：时间终止或调用 `stop()` */\n    private stoped = false;\n\n    @Input() config: Config;\n    @Output() start = new EventEmitter();\n    @Output() finished = new EventEmitter();\n    @Output() notify = new EventEmitter();\n    @Output() event = new EventEmitter<{ action: string, left: number }>();\n\n    constructor(\n        private el: ElementRef,\n        private renderer: Renderer,\n        private timer: Timer\n    ) {\n        this.timer.start();\n    }\n\n    /** 开始，当 `demand: false` 时触发 */\n    begin() {\n        this.paused = false;\n        this.start.emit();\n        this.callEvent('start');\n    }\n\n    /** 重新开始 */\n    restart(): void  {\n        if (!this.stoped) this.destroy();\n        this.init();\n        this.timer.start();\n        this.callEvent('restart');\n    }\n\n    /** 停止 */\n    stop() {\n        if (this.stoped) return;\n        this.stoped = true;\n        this.destroy();\n        this.callEvent('stop');\n    }\n\n    /** 暂停（限未终止有效） */\n    pause() {\n        if (this.stoped || this.paused) return ;\n        this.paused = true;\n        this.callEvent('pause');\n    }\n\n    /** 恢复 */\n    resume() {\n        if (this.stoped || !this.paused) return ;\n        this.paused = false;\n        this.callEvent('resume');\n    }\n\n    private mergeConfig() {\n        this.config = Object.assign(<Config>{\n            demand: false,\n            leftTime: 0,\n            template: '$!h!时$!m!分$!s!秒',\n            effect: 'normal',\n            varRegular: /\\$\\!([\\-\\w]+)\\!/g,\n            clock: ['d', 100, 2, 'h', 24, 2, 'm', 60, 2, 's', 60, 2, 'u', 10, 1]\n        }, this.config);\n    }\n\n    private callEvent(action: string) {\n        this.event.emit({ action, left: this.left });\n    }\n\n    private init() {\n        const me = this;\n        const el = me.el.nativeElement;\n        me.paused = me.config.demand;\n        me.stoped = false;\n\n        // 分析markup\n        const tmpl = el.innerHTML || me.config.template;\n        me.config.varRegular.lastIndex = 0;\n        el.innerHTML = tmpl.replace(me.config.varRegular, (str: string, type: string) => {\n            // 时钟频率校正.\n            if (type === 'u' || type === 's-ext')\n                me.frequency = 100;\n\n            // 生成hand的markup\n            let content = '';\n            if (type === 's-ext') {\n                me.hands.push({ type: 's' });\n                me.hands.push({ type: 'u' });\n                content = me.html('', 's', 'handlet') +\n                    me.html('.', '', 'digital') +\n                    me.html('', 'u', 'handlet');\n            } else {\n                me.hands.push({ type: type });\n            }\n\n            return me.html(content, type, 'hand');\n        });\n\n        const clock = me.config.clock;\n        me.hands.forEach((hand: Hand) => {\n            const type = hand.type;\n            let base = 100,\n                i: number;\n\n            hand.node = el.querySelector(`.hand-${type}`);\n            // radix, bits 初始化\n            for (i = clock.length - 3; i > -1; i -= 3) {\n                if (type === clock[i]) {\n                    break;\n                }\n\n                base *= clock[i + 1];\n            }\n            hand.base = base;\n            hand.radix = clock[i + 1];\n            hand.bits = clock[i + 2];\n        });\n\n        me.getLeft();\n        me.reflow(0, true);\n\n        // bind reflow to me\n        const _reflow = me.reflow;\n        me.reflow = (count: number = 0) => {\n            return _reflow.apply(me, [count]);\n        };\n\n        // 构建 notify\n        if (me.config.notify) {\n            me.config.notify.forEach((time: number) => {\n                if (time < 1) throw new Error(`the notify config must be a positive integer.`);\n                time = time * 1000;\n                time = time - time % me.frequency;\n                me._notify[time] = true;\n            });\n        }\n\n        me.timer.add(me.reflow, me.frequency);\n        // show\n        el.style.display = 'inline';\n\n        return me;\n    }\n\n    private destroy() {\n        this.timer.remove(this.reflow);\n        return this;\n    }\n\n    /**\n     * 更新时钟\n     */\n    private reflow(count: number = 0, force: boolean = false): void {\n        if (!force && (this.paused || this.stoped)) return ;\n        const me = this;\n        me.left = me.left - me.frequency * count;\n\n        me.hands.forEach((hand: Hand) => {\n            hand.lastValue = hand.value;\n            hand.value = Math.floor(me.left / hand.base) % hand.radix;\n        });\n\n        me.repaint();\n\n        if (me._notify[me.left]) {\n            me.notify.emit(me.left);\n            this.callEvent('notify');\n        }\n\n        if (me.left < 1) {\n            me.finished.emit(0);\n            this.stoped = true;\n            this.callEvent('finished');\n            this.destroy();\n        }\n    }\n\n    /**\n     * 重绘时钟\n     */\n    private repaint(): void {\n        const me = this;\n        if (me.config.repaint) {\n            me.config.repaint.apply(me);\n            return;\n        }\n\n        let content: string;\n\n        me.hands.forEach((hand: Hand) => {\n            if (hand.lastValue !== hand.value) {\n                content = '';\n\n                me.toDigitals(hand.value, hand.bits).forEach((digital: number) => {\n                    content += me.html(digital.toString(), '', 'digital');\n                });\n\n                hand.node.innerHTML = content;\n            }\n        });\n    }\n\n    /**\n     * 获取倒计时剩余帧数\n     */\n    private getLeft(): void {\n        let left: number = this.config.leftTime * 1000;\n        const end: number = this.config.stopTime;\n\n        if (!left && end)\n            left = end - new Date().getTime();\n\n        this.left = left - left % this.frequency;\n    }\n\n    /**\n     * 生成需要的html代码，辅助工具\n     */\n    private html(con: string, className: string, type: string): string {\n        switch (type) {\n            case 'hand':\n            case 'handlet':\n                className = type + ' hand-' + className;\n                break;\n            case 'digital':\n                if (con === '.') {\n                    className = type + ' ' + type + '-point ' + className;\n                } else {\n                    className = type + ' ' + type + '-' + con + ' ' + className;\n                }\n                break;\n        }\n        return '<span class=\"' + className + '\">' + con + '</span>';\n    }\n\n    /**\n     * 把值转换为独立的数字形式\n     */\n    private toDigitals(value: number, bits: number): number[] {\n        value = value < 0 ? 0 : value;\n        const digitals = [];\n        // 把时、分、秒等换算成数字.\n        while (bits--) {\n            digitals[bits] = value % 10;\n            value = Math.floor(value / 10);\n        }\n        return digitals;\n    }\n\n    ngOnInit() {\n        this.mergeConfig();\n        this.init();\n        if (!this.config.demand) this.begin();\n    }\n\n    ngOnDestroy(): void {\n        this.destroy();\n    }\n\n    ngOnChanges(changes: { [P in keyof this]?: SimpleChange } & SimpleChanges): void {\n        if (!changes.config.firstChange) {\n            this.mergeConfig();\n            this.destroy().init();\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { CountdownComponent } from './components/component';\nimport { Timer } from './components/timer';\n\n// region：export\n\nexport { Config } from './components/interfaces/config';\nexport { CountdownComponent } from './components/component';\n\n// endregion\n\n@NgModule({\n    imports:        [CommonModule],\n    providers:      [Timer],\n    declarations:   [CountdownComponent],\n    exports:        [CountdownComponent]\n})\nexport class CountdownModule {\n}\n"],"names":[],"mappings":"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"}
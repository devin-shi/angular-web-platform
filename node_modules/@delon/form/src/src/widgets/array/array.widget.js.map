{"version":3,"file":"array.widget.js","sourceRoot":"","sources":["../../../../../../../packages/form/src/widgets/array/array.widget.ts"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,SAAS,EAAU,MAAM,eAAe,CAAC;AAClD,OAAO,EAAE,iBAAiB,EAAE,MAAM,cAAc,CAAC;;IA4ChB,uCAAiB;;;0BAIpC,CAAC;;;IAEb,sBAAI,oCAAW;;;;QAAf;YACE,MAAM,CAAC,CACL,IAAI,CAAC,MAAM,CAAC,QAAQ;gBACpB,mBAAC,IAAI,CAAC,YAAY,CAAC,UAAmB,EAAC,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CACvE,CAAC;SACH;;;OAAA;;;;IAED,8BAAQ;;;IAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC;YACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC;QAE1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,IAAI,IAAI,CAAC;QACzC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,IAAI,QAAQ,CAAC;QAC3C,IAAI,CAAC,WAAW;YACd,IAAI,CAAC,EAAE,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,IAAI,IAAI,CAAC;KACpE;;;;IAED,6BAAO;;;IAAP;QACE,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC;KACzB;;;;;IAED,gCAAU;;;;IAAV,UAAW,KAAa;QACtB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;KACjC;;;;;;IAED,kCAAY;;;;;IAAZ,UAAa,KAAa,EAAE,IAAS;QACnC,MAAM,CAAC,KAAK,CAAC;KACd;;gBA3EF,SAAS,SAAC;oBACT,QAAQ,EAAE,UAAU;oBACpB,QAAQ,EAAE,gnDAsCT;iBACF;;sBA5CD;EA6CiC,iBAAiB;SAArC,WAAW","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ArrayLayoutWidget } from '../../widget';\r\n\r\n@Component({\r\n  selector: 'sf-array',\r\n  template: `\r\n  <nz-form-item>\r\n    <nz-col *ngIf=\"schema.title\" [nzSpan]=\"ui.spanLabel\" class=\"ant-form-item-label\">\r\n      <label>\r\n        {{ schema.title }}\r\n        <span class=\"optional\">\r\n          {{ ui.optional }}\r\n          <nz-tooltip *ngIf=\"ui.optionalHelp\" [nzTitle]=\"ui.optionalHelp\">\r\n            <i nz-tooltip class=\"anticon anticon-question-circle-o\"></i>\r\n          </nz-tooltip>\r\n        </span>\r\n      </label>\r\n      <div class=\"add\">\r\n        <button nz-button [nzType]=\"addType\" [disabled]=\"addDisabled\" (click)=\"addItem()\" [innerHTML]=\"addTitle\"></button>\r\n      </div>\r\n    </nz-col>\r\n    <nz-col class=\"ant-form-item-control-wrapper\" [nzSpan]=\"ui.spanControl\" [nzOffset]=\"ui.offsetControl\">\r\n      <div class=\"ant-form-item-control\" [class.has-error]=\"showError\">\r\n\r\n        <nz-row class=\"sf-array-container\">\r\n          <ng-container *ngFor=\"let i of formProperty.properties; let idx=index\">\r\n            <nz-col [nzSpan]=\"arraySpan\" *ngIf=\"i.visible\">\r\n              <nz-card>\r\n                <sf-item [formProperty]=\"i\"></sf-item>\r\n                <span *ngIf=\"removeTitle\" class=\"remove\" (click)=\"removeItem(idx)\" [attr.title]=\"removeTitle\">\r\n                  <i class=\"anticon anticon-delete\"></i>\r\n                </span>\r\n              </nz-card>\r\n            </nz-col>\r\n          </ng-container>\r\n        </nz-row>\r\n\r\n        <nz-form-extra *ngIf=\"schema.description\" [innerHTML]=\"schema.description\"></nz-form-extra>\r\n        <nz-form-explain *ngIf=\"!ui.onlyVisual && showError\">{{error}}</nz-form-explain>\r\n\r\n      </div>\r\n    </nz-col>\r\n  </nz-form-item>\r\n  `\r\n})\r\nexport class ArrayWidget extends ArrayLayoutWidget implements OnInit {\r\n  addTitle: string;\r\n  addType: string;\r\n  removeTitle: string;\r\n  arraySpan = 8;\r\n\r\n  get addDisabled() {\r\n    return (\r\n      this.schema.maxItems &&\r\n      (this.formProperty.properties as any[]).length >= this.schema.maxItems\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.ui.grid && this.ui.grid.arraySpan)\r\n      this.arraySpan = this.ui.grid.arraySpan;\r\n\r\n    this.addTitle = this.ui.addTitle || '添加';\r\n    this.addType = this.ui.addType || 'dashed';\r\n    this.removeTitle =\r\n      this.ui.removable === false ? null : this.ui.removeTitle || '移除';\r\n  }\r\n\r\n  addItem() {\r\n    this.formProperty.add();\r\n  }\r\n\r\n  removeItem(index: number) {\r\n    this.formProperty.remove(index);\r\n  }\r\n\r\n  trackByIndex(index: number, item: any) {\r\n    return index;\r\n  }\r\n}\r\n"]}
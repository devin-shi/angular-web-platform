{"version":3,"file":"number.widget.js","sourceRoot":"","sources":["../../../../../../../packages/form/src/widgets/number/number.widget.ts"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,SAAS,EAAU,MAAM,eAAe,CAAC;AAClD,OAAO,EAAE,aAAa,EAAE,MAAM,cAAc,CAAC;;IAqBX,wCAAa;;;0BAIjC,UAAC,KAAU,IAAK,OAAA,KAAK,EAAL,CAAK;uBACxB,UAAC,KAAU,IAAK,OAAA,KAAK,EAAL,CAAK;;;;;;IAE9B,+BAAQ;;;IAAR;QACE,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,KAAK,WAAW,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB;gBACrC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC;gBACzB,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;SACzB;QACD,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,KAAK,WAAW,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB;gBACrC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC;gBACzB,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;SACzB;QACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,IAAI,CAAC,CAAC;QACxC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAChC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACnC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE;YAAY,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,aAAU,CAAC;QAC1D,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE;YAAS,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,UAAO,CAAC;KAClD;;gBA7CF,SAAS,SAAC;oBACT,QAAQ,EAAE,WAAW;oBACrB,QAAQ,EAAE,4fAcM;oBAChB,mBAAmB,EAAE,KAAK;iBAC3B;;uBArBD;EAsBkC,aAAa;SAAlC,YAAY","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ControlWidget } from '../../widget';\r\n\r\n@Component({\r\n  selector: 'sf-number',\r\n  template: `\r\n  <sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\r\n    <nz-input-number\r\n      [ngModel]=\"value\"\r\n      (ngModelChange)=\"setValue($event)\"\r\n      [nzDisabled]=\"disabled\"\r\n      [nzSize]=\"ui.size\"\r\n      [nzMin]=\"min\"\r\n      [nzMax]=\"max\"\r\n      [nzStep]=\"step\"\r\n      [nzFormatter]=\"formatter\"\r\n      [nzParser]=\"parser\"\r\n      [nzPrecision]=\"ui.precision\">\r\n    </nz-input-number>\r\n  </sf-item-wrap>`,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class NumberWidget extends ControlWidget implements OnInit {\r\n  min: number;\r\n  max: number;\r\n  step: number;\r\n  formatter = (value: any) => value;\r\n  parser = (value: any) => value;\r\n\r\n  ngOnInit(): void {\r\n    if (typeof this.schema.minimum !== 'undefined') {\r\n      this.min = this.schema.exclusiveMinimum\r\n        ? this.schema.minimum + 1\r\n        : this.schema.minimum;\r\n    }\r\n    if (typeof this.schema.maximum !== 'undefined') {\r\n      this.max = this.schema.exclusiveMaximum\r\n        ? this.schema.maximum - 1\r\n        : this.schema.maximum;\r\n    }\r\n    this.step = this.schema.multipleOf || 1;\r\n    if (this.schema.type === 'integer') {\r\n      this.min = Math.trunc(this.min);\r\n      this.max = Math.trunc(this.max);\r\n      this.step = Math.trunc(this.step);\r\n    }\r\n    if (this.ui.formatter) this.formatter = this.ui.formatter;\r\n    if (this.ui.parser) this.parser = this.ui.parser;\r\n  }\r\n}\r\n"]}
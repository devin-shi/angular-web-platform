{"version":3,"file":"reuse-tab-context-menu.component.js","sourceRoot":"","sources":["../../../../../packages/abc/reuse-tab/reuse-tab-context-menu.component.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EACL,SAAS,EACT,KAAK,EACL,YAAY,EACZ,MAAM,EACN,YAAY,GAEb,MAAM,eAAe,CAAC;;;qBAyCH,IAAI,YAAY,EAA0B;;0BAnBxD,8CAAI;;;;QAWR;YACE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;SACnB;;;;;kBAbQ,KAAuB;YAC9B,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CACxB;gBACE,KAAK,EAAE,MAAM;gBACb,UAAU,EAAE,QAAQ;gBACpB,UAAU,EAAE,QAAQ;gBACpB,KAAK,EAAE,IAAI;aACZ,EACD,KAAK,CACN,CAAC;;;;;IAYJ,sBAAI,6DAAmB;;;;QAAvB;YACE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;SAC3B;;;OAAA;;;;;;IAEO,6CAAM;;;;;cAAC,IAAe,EAAE,IAAe;QAC7C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YACd,IAAI,MAAA;YACJ,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,mBAAmB,EAAE,IAAI,CAAC,mBAAmB;SAC9C,CAAC,CAAC;;;;;IAGL,+CAAQ;;;IAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC;YAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACzD;;;;;;IAED,4CAAK;;;;;IAAL,UAAM,CAAa,EAAE,IAAe;QAClC,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,EAAE,CAAC,CAAC,IAAI,KAAK,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC;QACpD,EAAE,CAAC,CAAC,IAAI,KAAK,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAAC,MAAM,CAAC;QACpD,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;KAC9B;;;;;IAID,gDAAS;;;;cAAC,KAAiB;QACzB,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,OAAO,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC;YAAC,MAAM,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;;gBA/D3B,SAAS,SAAC;oBACT,QAAQ,EAAE,wBAAwB;oBAClC,QAAQ,EAAE,ojBAMJ;oBACN,mBAAmB,EAAE,KAAK;iBAC3B;;;;yBAGE,KAAK;yBAgBL,KAAK;0BAEL,KAAK;0BAEL,MAAM;8BA0BN,YAAY,SAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC,cACzC,YAAY,SAAC,sBAAsB,EAAE,CAAC,QAAQ,CAAC;;uCA3ElD;;SA0Ba,4BAA4B","sourcesContent":["import {\r\n  Component,\r\n  Input,\r\n  EventEmitter,\r\n  Output,\r\n  HostListener,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport {\r\n  ReuseContextI18n,\r\n  ReuseContextCloseEvent,\r\n  ReuseItem,\r\n  CloseType,\r\n} from './interface';\r\n\r\n@Component({\r\n  selector: 'reuse-tab-context-menu',\r\n  template: `\r\n  <ul nz-menu>\r\n      <li nz-menu-item (click)=\"click($event, 'close')\" data-type=\"close\" [nzDisabled]=\"!item.closable\" [innerHTML]=\"i18n.close\"></li>\r\n      <li nz-menu-item (click)=\"click($event, 'closeOther')\" data-type=\"closeOther\" [innerHTML]=\"i18n.closeOther\"></li>\r\n      <li nz-menu-item (click)=\"click($event, 'closeRight')\" data-type=\"closeRight\" [nzDisabled]=\"item.last\" [innerHTML]=\"i18n.closeRight\"></li>\r\n      <li nz-menu-item (click)=\"click($event, 'clear')\" data-type=\"clear\" [innerHTML]=\"i18n.clear\"></li>\r\n  </ul>`,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class ReuseTabContextMenuComponent implements OnInit {\r\n  private _i18n: ReuseContextI18n;\r\n  @Input()\r\n  set i18n(value: ReuseContextI18n) {\r\n    this._i18n = Object.assign(\r\n      {\r\n        close: '关闭标签',\r\n        closeOther: '关闭其它标签',\r\n        closeRight: '关闭右侧标签',\r\n        clear: '清空',\r\n      },\r\n      value,\r\n    );\r\n  }\r\n  get i18n() {\r\n    return this._i18n;\r\n  }\r\n\r\n  @Input() item: ReuseItem;\r\n\r\n  @Input() event: MouseEvent;\r\n\r\n  @Output() close = new EventEmitter<ReuseContextCloseEvent>();\r\n\r\n  get includeNonCloseable() {\r\n    return this.event.ctrlKey;\r\n  }\r\n\r\n  private notify(type: CloseType, item: ReuseItem) {\r\n    this.close.next({\r\n      type,\r\n      item: this.item,\r\n      includeNonCloseable: this.includeNonCloseable,\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.includeNonCloseable) this.item.closable = true;\r\n  }\r\n\r\n  click(e: MouseEvent, type: CloseType) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (type === 'close' && !this.item.closable) return;\r\n    if (type === 'closeRight' && this.item.last) return;\r\n    this.notify(type, this.item);\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  @HostListener('document:contextmenu', ['$event'])\r\n  closeMenu(event: MouseEvent): void {\r\n    if (event.type === 'click' && event.button === 2) return;\r\n    this.notify(null, null);\r\n  }\r\n}\r\n"]}
{"version":3,"file":"desc-list.component.js","sourceRoot":"","sources":["../../../../../packages/abc/desc-list/desc-list.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  Input,\r\n  ViewEncapsulation,\r\n  ElementRef,\r\n  Renderer2,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  OnInit,\r\n  ContentChild,\r\n  TemplateRef,\r\n  ContentChildren,\r\n  QueryList,\r\n  SimpleChange,\r\n} from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\nimport { DescListItemComponent } from './desc-list-item.component';\r\nimport { AdDescListConfig } from './desc-list.config';\r\n\r\n@Component({\r\n  selector: 'desc-list',\r\n  template: `\r\n  <div *ngIf=\"_title || _titleTpl\" class=\"ad-desc-list__title\">\r\n    <ng-container *ngIf=\"_title; else _titleTpl\">{{_title}}</ng-container>\r\n  </div>\r\n  <div nz-row [nzGutter]=\"gutter\">\r\n    <div nz-col [nzXs]=\"_xs\" [nzSm]=\"_sm\" [nzMd]=\"_md\" *ngFor=\"let i of _items\">\r\n      <ng-template [ngTemplateOutlet]=\"i.tpl\"></ng-template>\r\n    </div>\r\n  </div>\r\n  `,\r\n  host: { '[class.ad-desc-list]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class DescListComponent implements OnChanges, OnInit {\r\n  // region fields\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  @Input() size: 'small' | 'large';\r\n\r\n  /** 列表项间距，单位为 `px` */\r\n  @Input()\r\n  get gutter() {\r\n    return this._gutter;\r\n  }\r\n  set gutter(value: any) {\r\n    this._gutter = coerceNumberProperty(value);\r\n  }\r\n  private _gutter = 32;\r\n\r\n  @Input() layout: 'horizontal' | 'vertical' = 'horizontal';\r\n\r\n  _xs = 24;\r\n  _sm = 12;\r\n  _md = 8;\r\n  /** 指定信息最多分几列展示，最终一行几列由 col 配置结合响应式规则决定 */\r\n  @Input()\r\n  get col() {\r\n    return this._col;\r\n  }\r\n  set col(value: any) {\r\n    this._col = coerceNumberProperty(value);\r\n  }\r\n  private _col = 3;\r\n\r\n  _classMap: string[] = [];\r\n  setClass() {\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.removeClass(this.el.nativeElement, cls),\r\n    );\r\n\r\n    this._classMap = ['desc-list', this.layout];\r\n    if (this.size) this._classMap.push(this.size);\r\n\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.addClass(this.el.nativeElement, cls),\r\n    );\r\n  }\r\n\r\n  setResponsive() {\r\n    const responsive = {\r\n      1: { xs: 24 },\r\n      2: { xs: 24, sm: 12 },\r\n      3: { xs: 24, sm: 12, md: 8 },\r\n      4: { xs: 24, sm: 12, md: 6 },\r\n    }[this.col > 4 ? 4 : this.col];\r\n\r\n    this._xs = responsive.xs;\r\n    this._sm = responsive.sm;\r\n    this._md = responsive.md;\r\n  }\r\n\r\n  @ContentChildren(DescListItemComponent)\r\n  _items: QueryList<DescListItemComponent>;\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    cog: AdDescListConfig,\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n  ) {\r\n    Object.assign(this, cog);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.setClass();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    this.setClass();\r\n    if (changes.col) this.setResponsive();\r\n  }\r\n}\r\n"]}
{"version":3,"file":"number-to-chinese.js","sourceRoot":"","sources":["../../../../../packages/abc/number-to-chinese/number-to-chinese.ts"],"names":[],"mappings":"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","sourcesContent":["import { NumberToChineseOptions } from './interface';\r\n\r\nexport function numberToChinese(\r\n  value: number | string,\r\n  rmb = true,\r\n  options?: NumberToChineseOptions,\r\n): string {\r\n  options = Object.assign(\r\n    {\r\n      minusSymbol: '负',\r\n      validThrow: false,\r\n    },\r\n    options,\r\n  );\r\n  if (typeof value === 'number') value = value.toString();\r\n  if (!/^-?\\d+(\\.\\d+)?$/.test(value) && options.validThrow)\r\n    throw new Error(`${value} is invalid number type`);\r\n  let integer: number | string, decimal: number | string;\r\n  [integer, decimal] = value.split('.');\r\n  let symbol = '';\r\n  if (integer.startsWith('-')) {\r\n    symbol = options.minusSymbol;\r\n    integer = integer.substr(1);\r\n  }\r\n  if (/^-?\\d+$/.test(value)) decimal = null;\r\n  integer = (+integer).toString();\r\n  const unit = {\r\n    num: rmb\r\n      ? ['', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖', '点']\r\n      : ['', '一', '二', '三', '四', '五', '六', '七', '八', '九', '点'],\r\n    radice: rmb\r\n      ? [\r\n          '',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '万',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '亿',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '万亿',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '兆',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n        ]\r\n      : [\r\n          '',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '万',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '亿',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '万亿',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '兆',\r\n          '十',\r\n          '百',\r\n          '千',\r\n        ],\r\n    dec: ['角', '分', '厘', '毫'],\r\n  };\r\n  if (rmb) value = (+value).toFixed(5).toString();\r\n  let integerRes = '';\r\n  const integerCount = integer.length;\r\n  if (integer === '0' || integerCount === 0) {\r\n    integerRes = '零';\r\n  } else {\r\n    let cnDesc = '';\r\n    for (let i = 0; i < integerCount; i++) {\r\n      const n = +integer[i],\r\n        j = integerCount - i - 1,\r\n        isZero = i > 1 && n !== 0 && integer[i - 1] === '0',\r\n        cnZero = isZero ? '零' : '',\r\n        isEmpptyUnit =\r\n          (n === 0 && j % 4 !== 0) || integer.substr(i - 3, 4) === '0000',\r\n        descMark = cnDesc;\r\n      let cnNum = unit.num[n];\r\n\r\n      cnDesc = isEmpptyUnit ? '' : unit.radice[j];\r\n      // 第一位是一十\r\n      if (i === 0 && cnNum === '一' && cnDesc === '十') cnNum = '';\r\n      const isChangeEr =\r\n        n > 1 &&\r\n        cnNum === '二' && // 去除首位\r\n        ['', '十', '百'].indexOf(cnDesc) === -1 && // 不读两\\两十\\两百\r\n        descMark !== '十'; // 不读十两\r\n      if (isChangeEr) cnNum = '两';\r\n      integerRes += cnZero + cnNum + cnDesc;\r\n    }\r\n  }\r\n\r\n  // 小数部分拼接\r\n  let decimalRes = '';\r\n  const decimalCount = decimal ? decimal.toString().length : 0;\r\n  if (decimal === null) {\r\n    decimalRes = rmb ? '整' : '';\r\n  } else if (decimal === '0') {\r\n    decimalRes = '零';\r\n  } else {\r\n    for (let i = 0; i < decimalCount; i++) {\r\n      if (rmb && i > unit.dec.length - 1) break;\r\n      const n = decimal[i],\r\n        cnZero = n === '0' ? '零' : '',\r\n        cnNum = unit.num[n],\r\n        cnDesc = rmb ? unit.dec[i] : '';\r\n      decimalRes += cnZero + cnNum + cnDesc;\r\n    }\r\n  }\r\n  const ret =\r\n    symbol +\r\n    (rmb\r\n      ? integerRes + (decimalRes === '零' ? '元整' : `元${decimalRes}`)\r\n      : integerRes + (decimalRes === '' ? '' : `点${decimalRes}`));\r\n  return ret;\r\n}\r\n"]}
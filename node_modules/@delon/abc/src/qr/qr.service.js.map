{"version":3,"file":"qr.service.js","sourceRoot":"","sources":["../../../../../packages/abc/qr/qr.service.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,aAAa,CAAC;AACzC,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;;IA2BzC,mBAAY,GAAe;;;;+BAhBT,GAAG;QAiBnB,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,EAAE,GAAG,IAAI,MAAM,EAAE,CAAC;KACxB;IAED;;;;OAIG;;;;;;;IACH,2BAAO;;;;;;IAAP,UAAQ,KAAuB;QAC7B,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAC9C,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,KAAK,EAAE,KAAK,IAAI,IAAI,CAAC,KAAK;SAC3B,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;KACrB;IAKD,sBAAI,8BAAO;QAHX;;WAEG;;;;;QACH;YACE,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;SAC5B;;;OAAA;;gBApDF,UAAU;;;;gBALF,UAAU;;oBAAnB;;SAMa,SAAS","sourcesContent":["import { AdQRConfig } from './qr.config';\r\nimport { Injectable } from '@angular/core';\r\n\r\ndeclare var QRious: any;\r\n\r\n@Injectable()\r\nexport class QRService {\r\n  /** 当前qr实例 */\r\n  readonly qr: any;\r\n  /** 背景 */\r\n  background: string;\r\n  /** 背景透明级别，范围：`0-1` 之间 */\r\n  backgroundAlpha = 1.0;\r\n  /** 前景 */\r\n  foreground: string;\r\n  /** 前景透明级别，范围：`0-1` 之间 */\r\n  foregroundAlpha: number;\r\n  /** 误差校正级别 */\r\n  level: string;\r\n  /** 二维码输出图片MIME类型 */\r\n  mime: string;\r\n  /** 内边距（单位：px） */\r\n  padding: number;\r\n  /** 大小（单位：px） */\r\n  size: number;\r\n  /** 值 */\r\n  value: string;\r\n\r\n  constructor(cog: AdQRConfig) {\r\n    Object.assign(this, cog);\r\n    this.qr = new QRious();\r\n  }\r\n\r\n  /**\r\n   * 生成二维码，并返回Base64编码\r\n   *\r\n   * @param [value] 重新指定值\r\n   */\r\n  refresh(value?: string | Object): string {\r\n    this.qr.set(typeof value === 'object' ? value : {\r\n      background: this.background,\r\n      backgroundAlpha: this.backgroundAlpha,\r\n      foreground: this.foreground,\r\n      foregroundAlpha: this.foregroundAlpha,\r\n      level: this.level,\r\n      padding: this.padding,\r\n      size: this.size,\r\n      value: value || this.value,\r\n    });\r\n    return this.dataURL;\r\n  }\r\n\r\n  /**\r\n   * 返回当前二维码Base64编码\r\n   */\r\n  get dataURL(): string {\r\n    return this.qr.toDataURL();\r\n  }\r\n}\r\n"]}
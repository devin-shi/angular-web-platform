{"version":3,"file":"chart.component.js","sourceRoot":"","sources":["../../../../../../packages/abc/charts/chart/chart.component.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EACL,SAAS,EAET,UAAU,EACV,KAAK,EAEL,YAAY,EACZ,MAAM,EACN,WAAW,GACZ,MAAM,eAAe,CAAC;AAGvB,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,EAAE,mBAAmB,EAAE,MAAM,qCAAqC,CAAC;AAC1E,OAAO,EAAE,oBAAoB,EAAE,MAAM,uBAAuB,CAAC;;IAkC3D,YAAY;IAEZ,0BAAoB,EAAc;QAAd,OAAE,GAAF,EAAE,CAAY;2BAVZ,CAAC;sBAEsB,IAAI,YAAY,EAAc;sBAE9B,IAAI,YAAY,EAAc;uBAE7B,IAAI,YAAY,EAAc;uBAsB5C,IAAI;KAlBE;0BAzBlC,oCAAM;;;;;YACR,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;;;;;;QAEtB,UAAW,KAAU;YACnB,IAAI,CAAC,OAAO,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC;SAC5C;;;;0BAIG,wCAAU;;;;;YACZ,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;;;;;;QAE1B,UAAe,KAAU;YACvB,IAAI,CAAC,WAAW,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC;SAChD;;;;;;;IAaO,sCAAW;;;;QACjB,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,SAAS,GAAG,EAAE,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;;IAG5B,mCAAQ;;;IAAR;QAAA,iBAEC;QADC,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,WAAW,EAAE,EAAlB,CAAkB,EAAE,GAAG,CAAC,CAAC;KAC3C;;;;IAED,sCAAW;;;IAAX;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,CAAC,oBAAoB,EAAE,CAAC;KAC7B;;;;IAMO,6CAAkB;;;;;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC;QAElD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,GAAG,CAAC;YAAC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QAElD,IAAI,CAAC,OAAO,qBAAQ,mBAAmB,CAAC,MAAM,CAAC,MAAM,EAAE,QAAQ,CAAC;aAC7D,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACnC,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,EAAE,CAAC,EAAzB,CAAyB,CAAC,CAAA,CAAC;;;;;IAGxC,+CAAoB;;;;QAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;;;gBAjEhD,SAAS,SAAC;oBACT,QAAQ,EAAE,UAAU;oBACpB,QAAQ,EAAE,EAAE;iBACb;;;;;gBAhBC,UAAU;;;2BAoBT,WAAW,SAAC,iBAAiB,cAC7B,KAAK;+BASL,KAAK;2BASL,MAAM;2BAEN,MAAM;4BAEN,MAAM;;2BA9CT;;SAoBa,gBAAgB","sourcesContent":["import {\r\n  Component,\r\n  OnInit,\r\n  ElementRef,\r\n  Input,\r\n  OnDestroy,\r\n  EventEmitter,\r\n  Output,\r\n  HostBinding,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-chart',\r\n  template: ``,\r\n})\r\nexport class G2ChartComponent implements OnInit, OnDestroy {\r\n  // region: fields\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height;\r\n\r\n  @Input()\r\n  get resizeTime() {\r\n    return this._resizeTime;\r\n  }\r\n  set resizeTime(value: any) {\r\n    this._resizeTime = coerceNumberProperty(value);\r\n  }\r\n  private _resizeTime = 0;\r\n\r\n  @Output() render: EventEmitter<ElementRef> = new EventEmitter<ElementRef>();\r\n\r\n  @Output() resize: EventEmitter<ElementRef> = new EventEmitter<ElementRef>();\r\n\r\n  @Output() destroy: EventEmitter<ElementRef> = new EventEmitter<ElementRef>();\r\n\r\n  // endregion\r\n\r\n  constructor(private el: ElementRef) {}\r\n\r\n  private renderChart() {\r\n    this.el.nativeElement.innerHTML = '';\r\n    this.render.emit(this.el);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    setTimeout(() => this.renderChart(), 200);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy.emit(this.el);\r\n    this.uninstallResizeEvent();\r\n  }\r\n\r\n  // region: resize\r\n\r\n  private resize$: Subscription = null;\r\n\r\n  private installResizeEvent() {\r\n    if (this.resizeTime <= 0 || !this.resize$) return;\r\n\r\n    if (this.resizeTime <= 200) this.resizeTime = 200;\r\n\r\n    this.resize$ = <any>FromEventObservable.create(window, 'resize')\r\n      .pipe(debounceTime(this.resizeTime))\r\n      .subscribe(() => this.resize.emit(this.el));\r\n  }\r\n\r\n  private uninstallResizeEvent() {\r\n    if (this.resize$) this.resize$.unsubscribe();\r\n  }\r\n\r\n  // endregion\r\n}\r\n"]}
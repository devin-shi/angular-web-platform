{"version":3,"file":"pie.component.js","sourceRoot":"","sources":["../../../../../../packages/abc/charts/pie/pie.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  OnInit,\r\n  HostListener,\r\n  ViewEncapsulation,\r\n  Output,\r\n  EventEmitter,\r\n  ContentChild,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport {\r\n  coerceNumberProperty,\r\n  coerceBooleanProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-pie',\r\n  template: `\r\n  <div class=\"chart\">\r\n    <div #container></div>\r\n    <div *ngIf=\"subTitle || total\" class=\"total\">\r\n      <h4 *ngIf=\"subTitle\" class=\"pie-sub-title\" [innerHTML]=\"subTitle\"></h4>\r\n      <div *ngIf=\"total\" class=\"pie-stat\" [innerHTML]=\"total\"></div>\r\n    </div>\r\n  </div>\r\n  <ul *ngIf=\"hasLegend && legendData?.length\" class=\"legend\">\r\n    <li *ngFor=\"let item of legendData; let index = index\" (click)=\"handleLegendClick(index)\">\r\n      <span class=\"dot\" [ngStyle]=\"{'background-color': !item.checked ? '#aaa' : item.color}\"></span>\r\n      <span class=\"legend-title\">{{item.x}}</span>\r\n      <nz-divider nzType=\"vertical\"></nz-divider>\r\n      <span class=\"percent\">{{item.percent}}%</span>\r\n      <span class=\"value\" [innerHTML]=\"valueFormat ? valueFormat(item.y) : item.y\"></span>\r\n    </li>\r\n  </ul>`,\r\n  host: { '[class.ad-pie]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2PieComponent implements OnDestroy, OnChanges, OnInit {\r\n  // region: fields\r\n\r\n  @Input()\r\n  get animate() {\r\n    return this._animate;\r\n  }\r\n  set animate(value: any) {\r\n    this._animate = coerceBooleanProperty(value);\r\n  }\r\n  private _animate = true;\r\n\r\n  @Input() color = 'rgba(24, 144, 255, 0.85)';\r\n  @Input() subTitle: string;\r\n  @Input() total: string;\r\n\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height = 0;\r\n\r\n  @HostBinding('class.has-legend')\r\n  @Input()\r\n  get hasLegend() {\r\n    return this._hasLegend;\r\n  }\r\n  set hasLegend(value: any) {\r\n    this._hasLegend = coerceBooleanProperty(value);\r\n  }\r\n  private _hasLegend = false;\r\n\r\n  @HostBinding('class.legend-block')\r\n  @Input()\r\n  get legendBlock() {\r\n    return this._legendBlock;\r\n  }\r\n  set legendBlock(value: any) {\r\n    this._legendBlock = coerceBooleanProperty(value);\r\n  }\r\n  private _legendBlock = false;\r\n\r\n  @Input() inner = 0.75;\r\n  @Input() padding: number[] = [12, 0, 12, 0];\r\n\r\n  @Input()\r\n  get percent() {\r\n    return this._percent;\r\n  }\r\n  set percent(value: any) {\r\n    this._percent = coerceNumberProperty(value);\r\n  }\r\n  private _percent: number;\r\n\r\n  @Input()\r\n  get tooltip() {\r\n    return this._tooltip;\r\n  }\r\n  set tooltip(value: any) {\r\n    this._tooltip = coerceBooleanProperty(value);\r\n  }\r\n  private _tooltip = true;\r\n\r\n  @Input()\r\n  get lineWidth() {\r\n    return this._lineWidth;\r\n  }\r\n  set lineWidth(value: any) {\r\n    this._lineWidth = coerceNumberProperty(value);\r\n  }\r\n  private _lineWidth = 0;\r\n\r\n  @Input()\r\n  get select() {\r\n    return this._select;\r\n  }\r\n  set select(value: any) {\r\n    this._select = coerceBooleanProperty(value);\r\n  }\r\n  private _select = true;\r\n\r\n  @Input() data: Array<{ x: number | string; y: number; [key: string]: any }>;\r\n  @Input() valueFormat: Function;\r\n  @Input() colors: any[];\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  chart: any;\r\n  initFlag = false;\r\n  legendData: any[] = [];\r\n\r\n  constructor(private el: ElementRef, private cd: ChangeDetectorRef) {}\r\n\r\n  install() {\r\n    let formatColor;\r\n    if (typeof this.percent !== 'undefined') {\r\n      this.select = false;\r\n      this.tooltip = false;\r\n      formatColor = value =>\r\n        value === '占比' ? this.color || 'rgba(24, 144, 255, 0.85)' : '#F0F2F5';\r\n\r\n      /* eslint no-param-reassign: */\r\n      this.data = [\r\n        {\r\n          x: '占比',\r\n          y: +this.percent,\r\n        },\r\n        {\r\n          x: '反比',\r\n          y: 100 - +this.percent,\r\n        },\r\n      ];\r\n    }\r\n\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: this.height,\r\n      padding: this.padding,\r\n      animate: this.animate,\r\n    });\r\n\r\n    if (!this.tooltip) {\r\n      chart.tooltip(false);\r\n    } else {\r\n      chart.tooltip({\r\n        showTitle: false,\r\n        itemTpl:\r\n          '<li><span style=\"background-color:{color};\" class=\"g2-tooltip-marker\"></span>{name}: {value} %</li>',\r\n      });\r\n    }\r\n\r\n    chart.axis(false);\r\n    chart.legend(false);\r\n\r\n    const dv = new DataSet.DataView();\r\n    dv.source(this.data).transform({\r\n      type: 'percent',\r\n      field: 'y',\r\n      dimension: 'x',\r\n      as: 'percent',\r\n    });\r\n    chart.source(dv, {\r\n      x: {\r\n        type: 'cat',\r\n        range: [0, 1],\r\n      },\r\n      y: {\r\n        min: 0,\r\n      },\r\n    });\r\n\r\n    chart.coord('theta', { innerRadius: this.inner });\r\n\r\n    chart\r\n      .intervalStack()\r\n      .position('y')\r\n      .style({ lineWidth: this.lineWidth, stroke: '#fff' })\r\n      .tooltip('x*percent', (item, percent) => {\r\n        return {\r\n          name: item,\r\n          value: percent,\r\n        };\r\n      })\r\n      .color('x', this.percent ? formatColor : this.colors)\r\n      .select(this.select);\r\n\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    });\r\n\r\n    this.chart = chart;\r\n    if (this.hasLegend) {\r\n      this.legendData = chart\r\n        .getAllGeoms()[0]\r\n        ._attrs.dataArray.map((item: any) => {\r\n          const origin = item[0]._origin;\r\n          origin.color = item[0].color;\r\n          origin.checked = true;\r\n          origin.percent = (origin.percent * 100).toFixed(2);\r\n          return origin;\r\n        });\r\n      this.cd.detectChanges();\r\n    }\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  handleLegendClick(i: number) {\r\n    this.legendData[i].checked = !this.legendData[i].checked;\r\n\r\n    if (this.chart) {\r\n      this.chart.filter('x', (val: any, item: any) => item.checked);\r\n      this.chart.repaint();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    setTimeout(() => this.install(), 100);\r\n    this.installResizeEvent();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (this.initFlag) this.install();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstallResizeEvent();\r\n    this.uninstall();\r\n  }\r\n\r\n  // region: resize\r\n\r\n  private scroll$: Subscription = null;\r\n  private installResizeEvent() {\r\n    if (!this.hasLegend) return;\r\n\r\n    this.scroll$ = <any>FromEventObservable.create(window, 'resize')\r\n      .pipe(debounceTime(200))\r\n      .subscribe(() => this.resize());\r\n  }\r\n\r\n  private uninstallResizeEvent() {\r\n    if (this.scroll$) this.scroll$.unsubscribe();\r\n  }\r\n\r\n  resize() {\r\n    if (this.el.nativeElement.clientWidth <= 380) {\r\n      if (!this.legendBlock) {\r\n        this.legendBlock = true;\r\n      }\r\n    } else if (this.legendBlock) {\r\n      this.legendBlock = false;\r\n    }\r\n    if (!this.chart) this.install();\r\n  }\r\n\r\n  // endregion\r\n}\r\n"]}
{"version":3,"file":"sidebar-nav.component.js","sourceRoot":"","sources":["../../../../../packages/abc/sidebar-nav/sidebar-nav.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  ElementRef,\r\n  Renderer2,\r\n  Inject,\r\n  OnInit,\r\n  OnDestroy,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n} from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { DOCUMENT, LocationStrategy } from '@angular/common';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { MenuService, SettingsService, Menu } from '@delon/theme';\r\n\r\nimport { Nav } from './interface';\r\n\r\nconst SHOWCLS = 'nav-floating-show';\r\nconst FLOATINGCLS = 'nav-floating';\r\n\r\n@Component({\r\n  selector: 'sidebar-nav',\r\n  template: `<ul class=\"nav\"> <ng-container *ngFor=\"let group of list\"> <ng-template [ngIf]=\"group._hidden !== true\"> <li class=\"nav-group-title\"> <span>{{ group.text }}</span> </li> <ng-container *ngFor=\"let child1 of group.children\"> <li *ngIf=\"child1._hidden !== true\" [routerLinkActive]=\"['nav-item-selected']\" [class.nav-submenu-open]=\"child1._open\"> <!-- link --> <a *ngIf=\"child1._type === 1\" (click)=\"onSelect(child1)\" [routerLink]=\"child1.link\" [target]=\"child1.target\"> <i *ngIf=\"!settings.layout.collapsed\" class=\"{{ child1.icon }}\"></i> <nz-tooltip *ngIf=\"settings.layout.collapsed\" nzPlacement=\"right\" [nzTitle]=\"child1.text\"> <span nz-tooltip> <i class=\"{{ child1.icon }}\"></i> </span> </nz-tooltip> <span>{{ child1.text }}</span> </a> <!-- external link --> <a *ngIf=\"child1._type === 2\" href=\"{{ child1.externalLink }}\" target=\"{{child1.target}}\"> <i *ngIf=\"!settings.layout.collapsed\" class=\"{{ child1.icon }}\"></i> <nz-tooltip *ngIf=\"settings.layout.collapsed\" nzPlacement=\"right\" [nzTitle]=\"child1.text\"> <span nz-tooltip> <i class=\"{{ child1.icon }}\"></i> </span> </nz-tooltip> <span>{{ child1.text }}</span> </a> <!-- has children link --> <a *ngIf=\"child1._type === 3\" class=\"nav-sub-title\" (click)=\"toggleOpen(child1)\" (mouseenter)=\"showSubMenu($event, child1)\"> <i class=\"{{ child1.icon }}\"></i> <span>{{ child1.text }}</span> </a> <!-- badge --> <div *ngIf=\"child1.badge\" title=\"{{child1.badge}}\" class=\"badge badge-{{child1.badge_status}}\" [class.badge-dot]=\"child1.badge_dot\"> <em>{{child1.badge}}</em> </div> <!-- Level 2 --> <ul *ngIf=\"child1._type === 3\" class=\"nav nav-sub nav-depth{{child1._depth}}\"> <ng-container *ngFor=\"let child2 of child1.children\"> <li *ngIf=\"child2._hidden !== true\" [routerLinkActive]=\"['nav-item-selected']\" [class.nav-submenu-open]=\"child2._open\"> <!-- link --> <a *ngIf=\"child2._type === 1\" (click)=\"onSelect(child2)\" [routerLink]=\"child2.link\" [target]=\"child2.target\">{{ child2.text }}</a> <!-- external link --> <a *ngIf=\"child2._type === 2\" href=\"{{ child2.externalLink }}\" target=\"{{ child2.target }}\">{{ child2.text }}</a> <!-- has children link --> <a *ngIf=\"child2._type === 3\" class=\"nav-sub-title\" (click)=\"toggleOpen(child2)\"> {{ child2.text }} </a> <!-- badge --> <div *ngIf=\"child2.badge\" title=\"{{child2.badge}}\" class=\"badge badge-{{child2.badge_status}}\" [class.badge-dot]=\"child2.badge_dot\"> <em>{{child2.badge}}</em> </div> <!-- Level 3 --> <ul *ngIf=\"child2._type === 3\" class=\"nav nav-sub nav-depth{{child2._depth}}\"> <ng-container *ngFor=\"let child3 of child2.children\"> <li *ngIf=\"child3._hidden !== true\" [routerLinkActive]=\"['nav-item-selected']\" [class.nav-submenu-open]=\"child3._open\"> <!-- link --> <a *ngIf=\"child3._type === 1\" (click)=\"onSelect(child3)\" [routerLink]=\"child3.link\" [target]=\"child3.target\">{{ child3.text }}</a> <!-- external link --> <a *ngIf=\"child3._type === 2\" href=\"{{ child3.externalLink }}\" target=\"{{ child3.target }}\">{{ child3.text }}</a> <!-- badge --> <div *ngIf=\"child3.badge\" title=\"{{child3.badge}}\" class=\"badge badge-{{child3.badge_status}}\" [class.badge-dot]=\"child3.badge_dot\"> <em>{{child3.badge}}</em> </div> </li> </ng-container> </ul> </li> </ng-container> </ul> </li> </ng-container> </ng-template> </ng-container> </ul> `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class SidebarNavComponent implements OnInit, OnDestroy {\r\n  private rootEl: HTMLDivElement;\r\n  /** @inner */\r\n  floatingEl: HTMLDivElement;\r\n  private bodyEl: HTMLBodyElement;\r\n  list: Nav[] = [];\r\n  private change$: Subscription;\r\n\r\n  @Input() autoCloseUnderPad = true;\r\n\r\n  @Output() select = new EventEmitter<Menu>();\r\n\r\n  constructor(\r\n    private menuSrv: MenuService,\r\n    public settings: SettingsService,\r\n    private router: Router,\r\n    private locationStrategy: LocationStrategy,\r\n    private render: Renderer2,\r\n    private cd: ChangeDetectorRef,\r\n    @Inject(DOCUMENT) private doc: any,\r\n    el: ElementRef,\r\n  ) {\r\n    this.rootEl = el.nativeElement as HTMLDivElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.bodyEl = this.doc.querySelector('body');\r\n    this.menuSrv.openedByUrl(this.router.url);\r\n    this.genFloatingContainer();\r\n    this.change$ = <any>this.menuSrv.change.subscribe(res => {\r\n      this.list = res;\r\n      this.cd.detectChanges();\r\n    });\r\n    this.installUnderPad();\r\n  }\r\n\r\n  private floatingAreaClickHandle(e: MouseEvent) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const linkNode = e.target as Element;\r\n    if (linkNode.nodeName !== 'A') {\r\n      return false;\r\n    }\r\n    let url: string = linkNode.getAttribute('href');\r\n    if (url && url.startsWith('#')) {\r\n      url = url.slice(1);\r\n    }\r\n    // 如果配置了bashHref 则去掉baseHref\r\n    const baseHerf = this.locationStrategy.getBaseHref();\r\n    if (baseHerf) {\r\n      url = url.slice(baseHerf.length);\r\n    }\r\n    this.router.navigateByUrl(url);\r\n    this.onSelect(this.menuSrv.getPathByUrl(url).pop());\r\n    this.hideAll();\r\n    return false;\r\n  }\r\n\r\n  clearFloatingContainer() {\r\n    if (!this.floatingEl) return;\r\n    this.floatingEl.removeEventListener(\r\n      'click',\r\n      this.floatingAreaClickHandle.bind(this),\r\n    );\r\n    // fix ie: https://github.com/cipchk/delon/issues/52\r\n    if (this.floatingEl.hasOwnProperty('remove')) {\r\n      this.floatingEl.remove();\r\n    } else if (this.floatingEl.parentNode) {\r\n      this.floatingEl.parentNode.removeChild(this.floatingEl);\r\n    }\r\n  }\r\n\r\n  genFloatingContainer() {\r\n    this.clearFloatingContainer();\r\n    this.floatingEl = this.render.createElement('div');\r\n    this.floatingEl.classList.add(FLOATINGCLS + '-container');\r\n    this.floatingEl.addEventListener(\r\n      'click',\r\n      this.floatingAreaClickHandle.bind(this),\r\n      false,\r\n    );\r\n    this.bodyEl.appendChild(this.floatingEl);\r\n  }\r\n\r\n  private genSubNode(linkNode: HTMLLinkElement, item: Nav): HTMLUListElement {\r\n    const id = `_sidebar-nav-${item.__id}`;\r\n    const node = linkNode.nextElementSibling.cloneNode(\r\n      true,\r\n    ) as HTMLUListElement;\r\n    node.id = id;\r\n    node.classList.add(FLOATINGCLS);\r\n    node.addEventListener(\r\n      'mouseleave',\r\n      () => {\r\n        node.classList.remove(SHOWCLS);\r\n      },\r\n      false,\r\n    );\r\n    this.floatingEl.appendChild(node);\r\n    return node;\r\n  }\r\n\r\n  private hideAll() {\r\n    const allNode = this.floatingEl.querySelectorAll('.' + FLOATINGCLS);\r\n    for (let i = 0; i < allNode.length; i++) {\r\n      allNode[i].classList.remove(SHOWCLS);\r\n    }\r\n  }\r\n\r\n  // calculate the node position values.\r\n  private calPos(linkNode: HTMLLinkElement, node: HTMLUListElement) {\r\n    const rect = linkNode.getBoundingClientRect();\r\n    // bug: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/14721015/\r\n    const scrollTop = Math.max(\r\n      this.doc.documentElement.scrollTop,\r\n      this.bodyEl.scrollTop,\r\n    );\r\n    const top = rect.top + scrollTop,\r\n      left = rect.right + 5;\r\n    node.style.top = `${top}px`;\r\n    node.style.left = `${left}px`;\r\n  }\r\n\r\n  showSubMenu(e: MouseEvent, item: Nav) {\r\n    if (this.settings.layout.collapsed !== true) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    const linkNode = e.target as Element;\r\n    this.genFloatingContainer();\r\n    const subNode = this.genSubNode(linkNode as HTMLLinkElement, item);\r\n    this.hideAll();\r\n    subNode.classList.add(SHOWCLS);\r\n    this.calPos(linkNode as HTMLLinkElement, subNode);\r\n  }\r\n\r\n  onSelect(item: Menu) {\r\n    this.select.emit(item);\r\n  }\r\n\r\n  toggleOpen(item: Nav) {\r\n    this.menuSrv.visit((i, p) => {\r\n      if (i !== item) i._open = false;\r\n    });\r\n    let pItem = item.__parent;\r\n    while (pItem) {\r\n      pItem._open = true;\r\n      pItem = pItem.__parent;\r\n    }\r\n    item._open = !item._open;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  @HostListener('document:click', ['$event.target'])\r\n  onClick() {\r\n    this.hideAll();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.change$.unsubscribe();\r\n    if (this.route$) this.route$.unsubscribe();\r\n    this.clearFloatingContainer();\r\n  }\r\n\r\n  // region: Under pad\r\n\r\n  private route$: Subscription;\r\n  private installUnderPad() {\r\n    if (!this.autoCloseUnderPad) return;\r\n    this.route$ = <any>this.router.events\r\n      .pipe(filter(e => e instanceof NavigationEnd))\r\n      .subscribe(s => this.underPad());\r\n    this.underPad();\r\n  }\r\n\r\n  private underPad() {\r\n    if (window.innerWidth < 992 && !this.settings.layout.collapsed) {\r\n      this.settings.setLayout('collapsed', true);\r\n    }\r\n  }\r\n\r\n  // endregion\r\n}\r\n"]}
{"version":3,"file":"abc.umd.min.js","sources":["../../../../../node_modules/tslib/tslib.es6.js","../../../../packages/abc/error-collect/error-collect.config.ts","../../../../packages/abc/error-collect/error-collect.component.ts","../../../../packages/abc/error-collect/error-collect.module.ts","../../../../packages/abc/footer-toolbar/footer-toolbar.component.ts","../../../../packages/abc/footer-toolbar/footer-toolbar.module.ts","../../../../packages/abc/sidebar-nav/sidebar-nav.component.ts","../../../../packages/abc/sidebar-nav/sidebar-nav.module.ts","../../../../packages/abc/down-file/down-file.directive.ts","../../../../packages/abc/down-file/down-file.module.ts","../../../../packages/abc/image/image.config.ts","../../../../packages/abc/image/image.directive.ts","../../../../packages/abc/image/image.module.ts","../../../../packages/abc/avatar-list/avatar-list-item.component.ts","../../../../packages/abc/avatar-list/avatar-list.component.ts","../../../../packages/abc/avatar-list/avatar-list.module.ts","../../../../packages/abc/desc-list/desc-list-item.component.ts","../../../../packages/abc/desc-list/desc-list.config.ts","../../../../packages/abc/desc-list/desc-list.component.ts","../../../../packages/abc/desc-list/desc-list.module.ts","../../../../packages/abc/ellipsis/ellipsis.component.ts","../../../../packages/abc/ellipsis/ellipsis.module.ts","../../../../packages/abc/global-footer/global-footer.component.ts","../../../../packages/abc/global-footer/global-footer.module.ts","../../../../packages/abc/exception/exception.component.ts","../../../../packages/abc/exception/exception.module.ts","../../../../packages/abc/notice-icon/notice-icon.component.ts","../../../../packages/abc/notice-icon/notice-icon-tab.component.ts","../../../../packages/abc/notice-icon/notice-icon.module.ts","../../../../packages/abc/number-info/number-info.component.ts","../../../../packages/abc/number-info/number-info.module.ts","../../../../packages/abc/page-header/page-header.config.ts","../../../../packages/abc/page-header/page-header.component.ts","../../../../packages/abc/page-header/page-header.module.ts","../../../../packages/abc/result/result.component.ts","../../../../packages/abc/result/result.module.ts","../../../../packages/abc/standard-form-row/standard-form-row.component.ts","../../../../packages/abc/standard-form-row/standard-form-row.module.ts","../../../../packages/abc/tag-select/tag-select.component.ts","../../../../packages/abc/tag-select/tag-select.module.ts","../../../../packages/abc/trend/trend.component.ts","../../../../packages/abc/trend/trend.module.ts","../../../../packages/abc/count-down/count-down.component.ts","../../../../packages/abc/count-down/count-down.module.ts","../../../../packages/abc/simple-table/simple-table.config.ts","../../../../packages/abc/xlsx/interface.ts","../../../../packages/abc/xlsx/xlsx.service.ts","../../../../packages/abc/simple-table/simple-table-export.ts","../../../../packages/abc/simple-table/simple-table.component.ts","../../../../packages/abc/simple-table/simple-table-row.directive.ts","../../../../packages/abc/simple-table/simple-table.module.ts","../../../../packages/abc/reuse-tab/reuse-tab.service.ts","../../../../packages/abc/reuse-tab/reuse-tab-context-menu.component.ts","../../../../packages/abc/reuse-tab/reuse-tab-context.service.ts","../../../../packages/abc/reuse-tab/reuse-tab.component.ts","../../../../packages/abc/reuse-tab/reuse-tab-context.component.ts","../../../../packages/abc/reuse-tab/reuse-tab-context.directive.ts","../../../../packages/abc/reuse-tab/reuse-tab.module.ts","../../../../packages/abc/full-content/full-content.service.ts","../../../../packages/abc/full-content/full-content.component.ts","../../../../packages/abc/full-content/full-content-toggle.directive.ts","../../../../packages/abc/full-content/full-content.module.ts","../../../../packages/abc/xlsx/xlsx.directive.ts","../../../../packages/abc/xlsx/xlsx.module.ts","../../../../packages/abc/zip/interface.ts","../../../../packages/abc/zip/zip.service.ts","../../../../packages/abc/zip/zip.module.ts","../../../../packages/abc/number-to-chinese/number-to-chinese.ts","../../../../packages/abc/number-to-chinese/number-to-chinese.pipe.ts","../../../../packages/abc/number-to-chinese/number-to-chinese.module.ts","../../../../packages/abc/lodop/lodop.config.ts","../../../../packages/abc/lodop/lodop.service.ts","../../../../packages/abc/lodop/lodop.module.ts","../../../../packages/abc/quick-menu/quick-menu.component.ts","../../../../packages/abc/quick-menu/quick-menu.module.ts","../../../../packages/abc/qr/qr.config.ts","../../../../packages/abc/qr/qr.service.ts","../../../../packages/abc/qr/qr.component.ts","../../../../packages/abc/qr/qr.module.ts","../../../../packages/abc/charts/bar/bar.component.ts","../../../../packages/abc/charts/bar/bar.module.ts","../../../../packages/abc/charts/card/card.component.ts","../../../../packages/abc/charts/card/card.module.ts","../../../../packages/abc/charts/chart/chart.component.ts","../../../../packages/abc/charts/chart/chart.module.ts","../../../../packages/abc/charts/gauge/gauge.component.ts","../../../../packages/abc/charts/gauge/gauge.module.ts","../../../../packages/abc/charts/mini-area/mini-area.component.ts","../../../../packages/abc/charts/mini-area/mini-area.module.ts","../../../../packages/abc/charts/mini-bar/mini-bar.component.ts","../../../../packages/abc/charts/mini-bar/mini-bar.module.ts","../../../../packages/abc/charts/mini-progress/mini-progress.component.ts","../../../../packages/abc/charts/mini-progress/mini-progress.module.ts","../../../../packages/abc/charts/pie/pie.component.ts","../../../../packages/abc/charts/pie/pie.module.ts","../../../../packages/abc/charts/radar/radar.component.ts","../../../../packages/abc/charts/radar/radar.module.ts","../../../../packages/abc/charts/tag-cloud/tag-cloud.component.ts","../../../../packages/abc/charts/tag-cloud/tag-cloud.module.ts","../../../../packages/abc/charts/timeline/timeline.component.ts","../../../../packages/abc/charts/timeline/timeline.module.ts","../../../../packages/abc/charts/water-wave/water-wave.component.ts","../../../../packages/abc/charts/water-wave/water-wave.module.ts","../../../../packages/abc/abc.module.ts","../../../../packages/abc/reuse-tab/reuse-tab.strategy.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class AdErrorCollectConfig {\r\n  /**\r\n   * 监听频率\r\n   */\r\n  freq?: number = 500;\r\n  /**\r\n   * 顶部偏移值\r\n   */\r\n  offsetTop?: number = 65 + 64 + 8 * 2;\r\n}\r\n","import {\r\n  Component,\r\n  Directive,\r\n  OnInit,\r\n  Input,\r\n  HostBinding,\r\n  OnDestroy,\r\n  ElementRef,\r\n  Renderer2,\r\n  HostListener,\r\n  Inject,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { DOCUMENT } from '@angular/platform-browser';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\nimport { AdErrorCollectConfig } from './error-collect.config';\r\n\r\n/**\r\n * 错误消息采集器\r\n * PS：虽然此法并不好看，但对响应式表单&模板表单有很好的效果。\r\n */\r\n@Component({\r\n  selector: 'error-collect, [error-collect]',\r\n  template: `\r\n  <i class=\"anticon anticon-exclamation-circle\"></i>\r\n  <span class=\"pl-sm\">{{count}}</span>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class ErrorCollectComponent implements OnInit, OnDestroy {\r\n  private $time = null;\r\n  private formEl: HTMLFormElement;\r\n\r\n  @Input()\r\n  get freq() {\r\n    return this._freq;\r\n  }\r\n  set freq(value: any) {\r\n    this._freq = coerceNumberProperty(value);\r\n  }\r\n  private _freq = 500;\r\n\r\n  @Input()\r\n  get offsetTop() {\r\n    return this._offsetTop;\r\n  }\r\n  set offsetTop(value: any) {\r\n    this._offsetTop = coerceNumberProperty(value);\r\n  }\r\n  private _offsetTop = 65 + 64 + 8 * 2;\r\n\r\n  @HostBinding('class.d-none') _hiden = true;\r\n\r\n  count = 0;\r\n\r\n  constructor(\r\n    cog: AdErrorCollectConfig,\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    private cd: ChangeDetectorRef,\r\n    @Inject(DOCUMENT) private doc: any,\r\n  ) {\r\n    Object.assign(this, cog);\r\n  }\r\n\r\n  private get errEls() {\r\n    return this.formEl.querySelectorAll('.has-error');\r\n  }\r\n\r\n  private update() {\r\n    const count = this.errEls.length;\r\n    if (count === this.count) return;\r\n    this.count = count;\r\n    this._hiden = count === 0;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  @HostListener('click')\r\n  _click() {\r\n    if (this.count === 0) return false;\r\n    // nz-form-control\r\n    const els = this.errEls;\r\n    const formItemEl = this.findParent(els[0], '[nz-form-control]') || els[0];\r\n    formItemEl.scrollIntoView(true);\r\n    // fix header height\r\n    this.doc.documentElement.scrollTop -= this.offsetTop;\r\n  }\r\n\r\n  private install() {\r\n    this.uninstall();\r\n    this.$time = setInterval(() => this.update(), this.freq);\r\n    this.update();\r\n  }\r\n\r\n  private uninstall() {\r\n    clearInterval(this.$time);\r\n  }\r\n\r\n  private findParent(el: any, selector: string) {\r\n    let retEl = null;\r\n    while (el) {\r\n      if (el.querySelector(selector)) {\r\n        retEl = el;\r\n        break;\r\n      }\r\n      el = el.parentElement;\r\n    }\r\n    return retEl;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.formEl = this.findParent(this.el.nativeElement, 'form');\r\n    if (this.formEl === null) throw new Error('未找到有效 form 元素');\r\n    (this.el.nativeElement as HTMLElement).classList.add(\r\n      'error-collect',\r\n      'pr-lg',\r\n      'text-error',\r\n      'point',\r\n    );\r\n    this.install();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ErrorCollectComponent } from './error-collect.component';\r\nimport { AdErrorCollectConfig } from './error-collect.config';\r\n\r\nconst COMPONENTS = [ErrorCollectComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdErrorCollectModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: AdErrorCollectModule,\r\n      providers: [AdErrorCollectConfig],\r\n    };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  OnInit,\r\n  OnDestroy,\r\n  Inject,\r\n  TemplateRef,\r\n  ContentChild,\r\n} from '@angular/core';\r\nimport { ElementRef, Renderer2, HostBinding } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/platform-browser';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\n\r\nconst CLS = 'ad-footer-toolbar';\r\n\r\n@Component({\r\n  selector: 'footer-toolbar',\r\n  template: `\r\n  <div class=\"left\"><ng-container *ngIf=\"extra\" [ngTemplateOutlet]=\"extra\"></ng-container></div>\r\n  <div class=\"right\">\r\n    <error-collect *ngIf=\"errorCollect\"></error-collect>\r\n    <ng-content></ng-content>\r\n  </div>\r\n  `,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class FooterToolbarComponent implements OnInit, OnDestroy {\r\n  @Input()\r\n  get errorCollect() {\r\n    return this._errorCollect;\r\n  }\r\n  set errorCollect(value: any) {\r\n    this._errorCollect = coerceBooleanProperty(value);\r\n  }\r\n  private _errorCollect = false;\r\n\r\n  @ContentChild('extra') extra: TemplateRef<any>;\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    @Inject(DOCUMENT) private doc: any,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    (this.el.nativeElement as HTMLElement).classList.add(CLS);\r\n    this.renderer.addClass(this.el.nativeElement, CLS);\r\n    this.doc.querySelector('body').classList.add(`has-${CLS}`);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.doc.querySelector('body').classList.remove(`has-${CLS}`);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AdErrorCollectModule } from './../error-collect/error-collect.module';\r\nimport { FooterToolbarComponent } from './footer-toolbar.component';\r\n\r\nconst COMPONENTS = [FooterToolbarComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, AdErrorCollectModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdFooterToolbarModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdFooterToolbarModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  Renderer2,\r\n  Inject,\r\n  OnInit,\r\n  OnDestroy,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n} from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { DOCUMENT, LocationStrategy } from '@angular/common';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { MenuService, SettingsService, Menu } from '@delon/theme';\r\n\r\nimport { Nav } from './interface';\r\n\r\nconst SHOWCLS = 'nav-floating-show';\r\nconst FLOATINGCLS = 'nav-floating';\r\n\r\n@Component({\r\n  selector: 'sidebar-nav',\r\n  template: `<ul class=\"nav\"> <ng-container *ngFor=\"let group of list\"> <ng-template [ngIf]=\"group._hidden !== true\"> <li class=\"nav-group-title\"> <span>{{ group.text }}</span> </li> <ng-container *ngFor=\"let child1 of group.children\"> <li *ngIf=\"child1._hidden !== true\" [routerLinkActive]=\"['nav-item-selected']\" [class.nav-submenu-open]=\"child1._open\"> <!-- link --> <a *ngIf=\"child1._type === 1\" (click)=\"onSelect(child1)\" [routerLink]=\"child1.link\" [target]=\"child1.target\"> <i *ngIf=\"!settings.layout.collapsed\" class=\"{{ child1.icon }}\"></i> <nz-tooltip *ngIf=\"settings.layout.collapsed\" nzPlacement=\"right\" [nzTitle]=\"child1.text\"> <span nz-tooltip> <i class=\"{{ child1.icon }}\"></i> </span> </nz-tooltip> <span>{{ child1.text }}</span> </a> <!-- external link --> <a *ngIf=\"child1._type === 2\" href=\"{{ child1.externalLink }}\" target=\"{{child1.target}}\"> <i *ngIf=\"!settings.layout.collapsed\" class=\"{{ child1.icon }}\"></i> <nz-tooltip *ngIf=\"settings.layout.collapsed\" nzPlacement=\"right\" [nzTitle]=\"child1.text\"> <span nz-tooltip> <i class=\"{{ child1.icon }}\"></i> </span> </nz-tooltip> <span>{{ child1.text }}</span> </a> <!-- has children link --> <a *ngIf=\"child1._type === 3\" class=\"nav-sub-title\" (click)=\"toggleOpen(child1)\" (mouseenter)=\"showSubMenu($event, child1)\"> <i class=\"{{ child1.icon }}\"></i> <span>{{ child1.text }}</span> </a> <!-- badge --> <div *ngIf=\"child1.badge\" title=\"{{child1.badge}}\" class=\"badge badge-{{child1.badge_status}}\" [class.badge-dot]=\"child1.badge_dot\"> <em>{{child1.badge}}</em> </div> <!-- Level 2 --> <ul *ngIf=\"child1._type === 3\" class=\"nav nav-sub nav-depth{{child1._depth}}\"> <ng-container *ngFor=\"let child2 of child1.children\"> <li *ngIf=\"child2._hidden !== true\" [routerLinkActive]=\"['nav-item-selected']\" [class.nav-submenu-open]=\"child2._open\"> <!-- link --> <a *ngIf=\"child2._type === 1\" (click)=\"onSelect(child2)\" [routerLink]=\"child2.link\" [target]=\"child2.target\">{{ child2.text }}</a> <!-- external link --> <a *ngIf=\"child2._type === 2\" href=\"{{ child2.externalLink }}\" target=\"{{ child2.target }}\">{{ child2.text }}</a> <!-- has children link --> <a *ngIf=\"child2._type === 3\" class=\"nav-sub-title\" (click)=\"toggleOpen(child2)\"> {{ child2.text }} </a> <!-- badge --> <div *ngIf=\"child2.badge\" title=\"{{child2.badge}}\" class=\"badge badge-{{child2.badge_status}}\" [class.badge-dot]=\"child2.badge_dot\"> <em>{{child2.badge}}</em> </div> <!-- Level 3 --> <ul *ngIf=\"child2._type === 3\" class=\"nav nav-sub nav-depth{{child2._depth}}\"> <ng-container *ngFor=\"let child3 of child2.children\"> <li *ngIf=\"child3._hidden !== true\" [routerLinkActive]=\"['nav-item-selected']\" [class.nav-submenu-open]=\"child3._open\"> <!-- link --> <a *ngIf=\"child3._type === 1\" (click)=\"onSelect(child3)\" [routerLink]=\"child3.link\" [target]=\"child3.target\">{{ child3.text }}</a> <!-- external link --> <a *ngIf=\"child3._type === 2\" href=\"{{ child3.externalLink }}\" target=\"{{ child3.target }}\">{{ child3.text }}</a> <!-- badge --> <div *ngIf=\"child3.badge\" title=\"{{child3.badge}}\" class=\"badge badge-{{child3.badge_status}}\" [class.badge-dot]=\"child3.badge_dot\"> <em>{{child3.badge}}</em> </div> </li> </ng-container> </ul> </li> </ng-container> </ul> </li> </ng-container> </ng-template> </ng-container> </ul> `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class SidebarNavComponent implements OnInit, OnDestroy {\r\n  private rootEl: HTMLDivElement;\r\n  /** @inner */\r\n  floatingEl: HTMLDivElement;\r\n  private bodyEl: HTMLBodyElement;\r\n  list: Nav[] = [];\r\n  private change$: Subscription;\r\n\r\n  @Input() autoCloseUnderPad = true;\r\n\r\n  @Output() select = new EventEmitter<Menu>();\r\n\r\n  constructor(\r\n    private menuSrv: MenuService,\r\n    public settings: SettingsService,\r\n    private router: Router,\r\n    private locationStrategy: LocationStrategy,\r\n    private render: Renderer2,\r\n    private cd: ChangeDetectorRef,\r\n    @Inject(DOCUMENT) private doc: any,\r\n    el: ElementRef,\r\n  ) {\r\n    this.rootEl = el.nativeElement as HTMLDivElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.bodyEl = this.doc.querySelector('body');\r\n    this.menuSrv.openedByUrl(this.router.url);\r\n    this.genFloatingContainer();\r\n    this.change$ = <any>this.menuSrv.change.subscribe(res => {\r\n      this.list = res;\r\n      this.cd.detectChanges();\r\n    });\r\n    this.installUnderPad();\r\n  }\r\n\r\n  private floatingAreaClickHandle(e: MouseEvent) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const linkNode = e.target as Element;\r\n    if (linkNode.nodeName !== 'A') {\r\n      return false;\r\n    }\r\n    let url: string = linkNode.getAttribute('href');\r\n    if (url && url.startsWith('#')) {\r\n      url = url.slice(1);\r\n    }\r\n    // 如果配置了bashHref 则去掉baseHref\r\n    const baseHerf = this.locationStrategy.getBaseHref();\r\n    if (baseHerf) {\r\n      url = url.slice(baseHerf.length);\r\n    }\r\n    this.router.navigateByUrl(url);\r\n    this.onSelect(this.menuSrv.getPathByUrl(url).pop());\r\n    this.hideAll();\r\n    return false;\r\n  }\r\n\r\n  clearFloatingContainer() {\r\n    if (!this.floatingEl) return;\r\n    this.floatingEl.removeEventListener(\r\n      'click',\r\n      this.floatingAreaClickHandle.bind(this),\r\n    );\r\n    // fix ie: https://github.com/cipchk/delon/issues/52\r\n    if (this.floatingEl.hasOwnProperty('remove')) {\r\n      this.floatingEl.remove();\r\n    } else if (this.floatingEl.parentNode) {\r\n      this.floatingEl.parentNode.removeChild(this.floatingEl);\r\n    }\r\n  }\r\n\r\n  genFloatingContainer() {\r\n    this.clearFloatingContainer();\r\n    this.floatingEl = this.render.createElement('div');\r\n    this.floatingEl.classList.add(FLOATINGCLS + '-container');\r\n    this.floatingEl.addEventListener(\r\n      'click',\r\n      this.floatingAreaClickHandle.bind(this),\r\n      false,\r\n    );\r\n    this.bodyEl.appendChild(this.floatingEl);\r\n  }\r\n\r\n  private genSubNode(linkNode: HTMLLinkElement, item: Nav): HTMLUListElement {\r\n    const id = `_sidebar-nav-${item.__id}`;\r\n    const node = linkNode.nextElementSibling.cloneNode(\r\n      true,\r\n    ) as HTMLUListElement;\r\n    node.id = id;\r\n    node.classList.add(FLOATINGCLS);\r\n    node.addEventListener(\r\n      'mouseleave',\r\n      () => {\r\n        node.classList.remove(SHOWCLS);\r\n      },\r\n      false,\r\n    );\r\n    this.floatingEl.appendChild(node);\r\n    return node;\r\n  }\r\n\r\n  private hideAll() {\r\n    const allNode = this.floatingEl.querySelectorAll('.' + FLOATINGCLS);\r\n    for (let i = 0; i < allNode.length; i++) {\r\n      allNode[i].classList.remove(SHOWCLS);\r\n    }\r\n  }\r\n\r\n  // calculate the node position values.\r\n  private calPos(linkNode: HTMLLinkElement, node: HTMLUListElement) {\r\n    const rect = linkNode.getBoundingClientRect();\r\n    // bug: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/14721015/\r\n    const scrollTop = Math.max(\r\n      this.doc.documentElement.scrollTop,\r\n      this.bodyEl.scrollTop,\r\n    );\r\n    const top = rect.top + scrollTop,\r\n      left = rect.right + 5;\r\n    node.style.top = `${top}px`;\r\n    node.style.left = `${left}px`;\r\n  }\r\n\r\n  showSubMenu(e: MouseEvent, item: Nav) {\r\n    if (this.settings.layout.collapsed !== true) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    const linkNode = e.target as Element;\r\n    this.genFloatingContainer();\r\n    const subNode = this.genSubNode(linkNode as HTMLLinkElement, item);\r\n    this.hideAll();\r\n    subNode.classList.add(SHOWCLS);\r\n    this.calPos(linkNode as HTMLLinkElement, subNode);\r\n  }\r\n\r\n  onSelect(item: Menu) {\r\n    this.select.emit(item);\r\n  }\r\n\r\n  toggleOpen(item: Nav) {\r\n    this.menuSrv.visit((i, p) => {\r\n      if (i !== item) i._open = false;\r\n    });\r\n    let pItem = item.__parent;\r\n    while (pItem) {\r\n      pItem._open = true;\r\n      pItem = pItem.__parent;\r\n    }\r\n    item._open = !item._open;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  @HostListener('document:click', ['$event.target'])\r\n  onClick() {\r\n    this.hideAll();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.change$.unsubscribe();\r\n    if (this.route$) this.route$.unsubscribe();\r\n    this.clearFloatingContainer();\r\n  }\r\n\r\n  // region: Under pad\r\n\r\n  private route$: Subscription;\r\n  private installUnderPad() {\r\n    if (!this.autoCloseUnderPad) return;\r\n    this.route$ = <any>this.router.events\r\n      .pipe(filter(e => e instanceof NavigationEnd))\r\n      .subscribe(s => this.underPad());\r\n    this.underPad();\r\n  }\r\n\r\n  private underPad() {\r\n    if (window.innerWidth < 992 && !this.settings.layout.collapsed) {\r\n      this.settings.setLayout('collapsed', true);\r\n    }\r\n  }\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { SidebarNavComponent } from './sidebar-nav.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, RouterModule, NgZorroAntdModule],\r\n  declarations: [SidebarNavComponent],\r\n  exports: [SidebarNavComponent],\r\n})\r\nexport class AdSidebarNavModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdSidebarNavModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  Input,\r\n  HostListener,\r\n  EventEmitter,\r\n  Output,\r\n} from '@angular/core';\r\nimport { HttpResponse, HttpClient } from '@angular/common/http';\r\nimport { saveAs } from 'file-saver';\r\n\r\n/**\r\n * 文件下载\r\n *\r\n * ```html\r\n * <button nz-button down-file http-url=\"assets/demo{{i}}\" file-name=\"demo中文\">{{i}}</button>\r\n * ```\r\n */\r\n@Directive({ selector: '[down-file]' })\r\nexport class DownFileDirective {\r\n  /** URL请求参数 */\r\n  @Input('http-data') httpData: any;\r\n  /** 请求类型 */\r\n  @Input('http-method') httpMethod: string = 'get';\r\n  /** 下载地址 */\r\n  @Input('http-url') httpUrl: string;\r\n  /** 指定文件名，若为空从服务端返回的 `header` 中获取 `filename`、`x-filename` */\r\n  @Input('file-name') fileName: string;\r\n  /** 成功回调 */\r\n  @Output() success: EventEmitter<any> = new EventEmitter<any>();\r\n  /** 错误回调 */\r\n  @Output() error: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  constructor(private el: ElementRef, private http: HttpClient) {}\r\n\r\n  @HostListener('click')\r\n  _click() {\r\n    this.el.nativeElement.disabled = true;\r\n    this.http\r\n      .request(this.httpMethod, this.httpUrl, {\r\n        params: this.httpData || {},\r\n        responseType: 'blob',\r\n        observe: 'response',\r\n      })\r\n      .subscribe(\r\n        (res: HttpResponse<Blob>) => {\r\n          if (res.status !== 200 || res.body.size <= 0) {\r\n            this.error.emit(res);\r\n            return;\r\n          }\r\n          const fileName =\r\n            this.fileName ||\r\n            res.headers.get('filename') ||\r\n            res.headers.get('x-filename');\r\n          saveAs(res.body, decodeURI(fileName));\r\n          this.success.emit(res);\r\n          this.el.nativeElement.disabled = false;\r\n        },\r\n        err => {\r\n          this.error.emit(err);\r\n          this.el.nativeElement.disabled = false;\r\n        },\r\n      );\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { DownFileDirective } from './down-file.directive';\r\n\r\nconst DIRECTIVES = [DownFileDirective];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...DIRECTIVES],\r\n  exports: [...DIRECTIVES],\r\n})\r\nexport class AdDownFileModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdDownFileModule, providers: [] };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class AdImageConfig {\r\n  /**\r\n   * 默认大小，默认值：`64`，单位：px\r\n   */\r\n  size?: number = 64;\r\n\r\n  /**\r\n   * 错误图片\r\n   */\r\n  error?: string = './assets/img/logo.svg';\r\n}\r\n","import {\r\n  Directive,\r\n  Input,\r\n  OnChanges,\r\n  ElementRef,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  OnInit,\r\n  SimpleChange,\r\n} from '@angular/core';\r\nimport { deepCopy } from '@delon/util';\r\nimport { AdImageConfig } from './image.config';\r\n\r\n/**\r\n * img标签\r\n * + 支持微信、qq头像规则缩略图规则\r\n * + 支持移除http&https协议http\r\n * + 支持增加onerror事件\r\n */\r\n@Directive({ selector: '[_src]' })\r\nexport class ImageDirective implements OnChanges, OnInit {\r\n  @Input('_src') src: string;\r\n\r\n  @Input() size = 64;\r\n\r\n  @Input() error = './assets/img/logo.svg';\r\n\r\n  private inited = false;\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private render: Renderer2,\r\n    DEF: AdImageConfig,\r\n  ) {\r\n    Object.assign(this, deepCopy(DEF));\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.update();\r\n    this.updateError();\r\n    this.inited = true;\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (this.inited) {\r\n      if (changes.error) this.updateError();\r\n      else this.update();\r\n    }\r\n  }\r\n\r\n  private update() {\r\n    let newSrc = this.src;\r\n\r\n    // region: fix weixin & qq avatar size\r\n    if (newSrc.includes('qlogo.cn')) {\r\n      const arr = newSrc.split('/'),\r\n        size = arr[arr.length - 1];\r\n      arr[arr.length - 1] =\r\n        size === '0' || +size !== this.size ? this.size.toString() : size;\r\n      newSrc = arr.join('/');\r\n    }\r\n    // endregion\r\n\r\n    // region: remove https & http\r\n    const isHttp = newSrc.startsWith('http:'),\r\n      isHttps = newSrc.startsWith('https:');\r\n    if (isHttp || isHttps) newSrc = newSrc.substr(isHttp ? 5 : 6);\r\n\r\n    // endregion\r\n\r\n    this.render.setAttribute(this.el.nativeElement, 'src', newSrc);\r\n  }\r\n\r\n  private updateError() {\r\n    this.render.setAttribute(\r\n      this.el.nativeElement,\r\n      'onerror',\r\n      `this.src='${this.error}';`,\r\n    );\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { ImageDirective } from './image.directive';\nimport { AdImageConfig } from './image.config';\n\nconst DIRECTIVES = [ImageDirective];\n\n@NgModule({\n  imports: [CommonModule, DelonUtilModule],\n  declarations: [...DIRECTIVES],\n  exports: [...DIRECTIVES],\n})\nexport class AdImageModule {\n  static forRoot(): ModuleWithProviders {\n    return { ngModule: AdImageModule, providers: [AdImageConfig] };\n  }\n}\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'avatar-list-item, [avatar-list-item]',\r\n  template: ``,\r\n})\r\nexport class AvatarListItemComponent {\r\n  @Input() src: string;\r\n  @Input() text: string;\r\n  @Input() icon: string;\r\n  @Input() tips: string;\r\n}\r\n","import { Component, Input, QueryList, ContentChildren } from '@angular/core';\r\nimport { AvatarListItemComponent } from './avatar-list-item.component';\r\n\r\n@Component({\r\n  selector: 'avatar-list',\r\n  template: `\r\n  <ul>\r\n    <li *ngFor=\"let i of _items\" class=\"item\" [ngClass]=\"_size\">\r\n      <nz-tooltip *ngIf=\"i.tips\" [nzTitle]=\"i.tips\">\r\n        <nz-avatar nz-tooltip [nzSrc]=\"i.src\" [nzText]=\"i.text\" [nzIcon]=\"i.icon\" [nzSize]=\"_avatarSize\"></nz-avatar>\r\n      </nz-tooltip>\r\n      <nz-avatar *ngIf=\"!i.tips\" [nzSrc]=\"i.src\" [nzText]=\"i.text\" [nzIcon]=\"i.icon\" [nzSize]=\"_avatarSize\"></nz-avatar>\r\n    </li>\r\n  </ul>\r\n  `,\r\n  host: { '[class.ad-avatar-list]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class AvatarListComponent {\r\n  _size = '';\r\n\r\n  _avatarSize = '';\r\n\r\n  @Input()\r\n  set size(value: 'large' | 'small' | 'mini' | 'default') {\r\n    this._size = value === 'default' ? '' : value;\r\n    switch (value) {\r\n      case 'large':\r\n      case 'small':\r\n      case 'default':\r\n        this._avatarSize = value;\r\n        break;\r\n      default:\r\n        this._avatarSize = 'small';\r\n        break;\r\n    }\r\n  }\r\n\r\n  @ContentChildren(AvatarListItemComponent)\r\n  _items: QueryList<AvatarListItemComponent>;\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AvatarListComponent } from './avatar-list.component';\r\nimport { AvatarListItemComponent } from './avatar-list-item.component';\r\n\r\nconst COMPONENTS = [AvatarListComponent, AvatarListItemComponent];\r\n\r\n// region: zorro modules\r\n\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nconst ZORROMODULES = [NgZorroAntdModule];\r\n\r\n// endregion\r\n\r\n@NgModule({\r\n  imports: [CommonModule, ...ZORROMODULES],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdAvatarListModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdAvatarListModule, providers: [] };\r\n  }\r\n}\r\n","import { Component, Input, ViewChild, TemplateRef } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'desc-list-item',\r\n  template: `\r\n  <ng-template #tpl>\r\n    <div class=\"ad-desc-list__term\" *ngIf=\"_term || _termTpl\">\r\n      <ng-container *ngIf=\"_term; else _termTpl\">{{_term}}</ng-container>\r\n    </div>\r\n    <div class=\"ad-desc-list__detail\"><ng-content></ng-content></div>\r\n  </ng-template>\r\n  `,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class DescListItemComponent {\r\n  // region fields\r\n\r\n  _term = '';\r\n  _termTpl: TemplateRef<any>;\r\n  @Input()\r\n  set term(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._term = null;\r\n      this._termTpl = value;\r\n    } else this._term = value;\r\n  }\r\n\r\n  // endregion\r\n\r\n  @ViewChild('tpl') tpl: TemplateRef<any>;\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class AdDescListConfig {\r\n  /**\r\n   * 布局方式\r\n   */\r\n  layout?: 'horizontal' | 'vertical' = 'horizontal';\r\n\r\n  /**\r\n   * 列表项间距，单位为 `px`\r\n   */\r\n  gutter?: number = 32;\r\n\r\n  /**\r\n   * 列表型号\r\n   */\r\n  size?: 'small' | 'large';\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  ViewEncapsulation,\r\n  ElementRef,\r\n  Renderer2,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  OnInit,\r\n  ContentChild,\r\n  TemplateRef,\r\n  ContentChildren,\r\n  QueryList,\r\n  SimpleChange,\r\n} from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\nimport { DescListItemComponent } from './desc-list-item.component';\r\nimport { AdDescListConfig } from './desc-list.config';\r\n\r\n@Component({\r\n  selector: 'desc-list',\r\n  template: `\r\n  <div *ngIf=\"_title || _titleTpl\" class=\"ad-desc-list__title\">\r\n    <ng-container *ngIf=\"_title; else _titleTpl\">{{_title}}</ng-container>\r\n  </div>\r\n  <div nz-row [nzGutter]=\"gutter\">\r\n    <div nz-col [nzXs]=\"_xs\" [nzSm]=\"_sm\" [nzMd]=\"_md\" *ngFor=\"let i of _items\">\r\n      <ng-template [ngTemplateOutlet]=\"i.tpl\"></ng-template>\r\n    </div>\r\n  </div>\r\n  `,\r\n  host: { '[class.ad-desc-list]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class DescListComponent implements OnChanges, OnInit {\r\n  // region fields\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  @Input() size: 'small' | 'large';\r\n\r\n  /** 列表项间距，单位为 `px` */\r\n  @Input()\r\n  get gutter() {\r\n    return this._gutter;\r\n  }\r\n  set gutter(value: any) {\r\n    this._gutter = coerceNumberProperty(value);\r\n  }\r\n  private _gutter = 32;\r\n\r\n  @Input() layout: 'horizontal' | 'vertical' = 'horizontal';\r\n\r\n  _xs = 24;\r\n  _sm = 12;\r\n  _md = 8;\r\n  /** 指定信息最多分几列展示，最终一行几列由 col 配置结合响应式规则决定 */\r\n  @Input()\r\n  get col() {\r\n    return this._col;\r\n  }\r\n  set col(value: any) {\r\n    this._col = coerceNumberProperty(value);\r\n  }\r\n  private _col = 3;\r\n\r\n  _classMap: string[] = [];\r\n  setClass() {\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.removeClass(this.el.nativeElement, cls),\r\n    );\r\n\r\n    this._classMap = ['desc-list', this.layout];\r\n    if (this.size) this._classMap.push(this.size);\r\n\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.addClass(this.el.nativeElement, cls),\r\n    );\r\n  }\r\n\r\n  setResponsive() {\r\n    const responsive = {\r\n      1: { xs: 24 },\r\n      2: { xs: 24, sm: 12 },\r\n      3: { xs: 24, sm: 12, md: 8 },\r\n      4: { xs: 24, sm: 12, md: 6 },\r\n    }[this.col > 4 ? 4 : this.col];\r\n\r\n    this._xs = responsive.xs;\r\n    this._sm = responsive.sm;\r\n    this._md = responsive.md;\r\n  }\r\n\r\n  @ContentChildren(DescListItemComponent)\r\n  _items: QueryList<DescListItemComponent>;\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    cog: AdDescListConfig,\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n  ) {\r\n    Object.assign(this, cog);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.setClass();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    this.setClass();\r\n    if (changes.col) this.setResponsive();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { DescListComponent } from './desc-list.component';\r\nimport { DescListItemComponent } from './desc-list-item.component';\r\nimport { AdDescListConfig } from './desc-list.config';\r\n\r\nconst COMPONENTS = [DescListComponent, DescListItemComponent];\r\n\r\n// region: zorro modules\r\n\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nconst ZORROMODULES = [NgZorroAntdModule];\r\n\r\n// endregion\r\n\r\n@NgModule({\r\n  imports: [CommonModule, ...ZORROMODULES],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdDescListModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdDescListModule, providers: [AdDescListConfig] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'ellipsis',\r\n  template: `<ng-content></ng-content>`,\r\n  host: { '[class.ad-ellipsis]': 'true' },\r\n})\r\nexport class EllipsisComponent {\r\n  /** 在按照行数截取下最大的行数，超过则截取省略 */\r\n  @Input()\r\n  @HostBinding('style.-webkit-line-clamp')\r\n  get lines() {\r\n    return this._lines;\r\n  }\r\n  set lines(value: any) {\r\n    this._lines = coerceNumberProperty(value);\r\n  }\r\n  private _lines = 3;\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { EllipsisComponent } from './ellipsis.component';\r\n\r\nconst COMPONENTS = [EllipsisComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdEllipsisModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdEllipsisModule, providers: [] };\r\n  }\r\n}\r\n","import { Component, ContentChild, TemplateRef, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'global-footer',\r\n  template: `\r\n  <div *ngIf=\"links && links.length > 0\" class=\"links\">\r\n    <a *ngFor=\"let i of links\" routerLink=\"{{i.href}}\" [attr.target]=\"i.blankTarget\">{{i.title}}</a>\r\n  </div>\r\n  <div class=\"copyright\"><ng-content></ng-content></div>\r\n  `,\r\n  host: { '[class.ad-global-footer]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class GlobalFooterComponent {\r\n  @Input() links: { title: string; href: string; blankTarget?: boolean }[];\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { GlobalFooterComponent } from './global-footer.component';\r\n\r\nconst COMPONENTS = [GlobalFooterComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, RouterModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdGlobalFooterModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdGlobalFooterModule, providers: [] };\r\n  }\r\n}\r\n","import { Component, Input, ContentChild, TemplateRef } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'exception',\r\n  template: `\r\n  <div class=\"img-block\">\r\n    <div class=\"img\" [ngStyle]=\"{'background-image': 'url(' + _img + ')'}\"></div>\r\n  </div>\r\n  <div class=\"cont\">\r\n    <h1 [innerHTML]=\"_title\"></h1>\r\n    <div class=\"desc\" [innerHTML]=\"_desc\"></div>\r\n    <ng-template #defaultActions>\r\n      <button nz-button [routerLink]=\"['/']\" [nzType]=\"'primary'\">返回首页</button>\r\n      <ng-content></ng-content>\r\n    </ng-template>\r\n    <div class=\"actions\" *ngIf=\"actions; else defaultActions\">\r\n      <ng-template [ngTemplateOutlet]=\"actions\"></ng-template>\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n  `,\r\n  host: { '[class.ad-exception]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class ExceptionComponent {\r\n  _img = '';\r\n  _title = '';\r\n  _desc = '';\r\n\r\n  @Input()\r\n  set type(value: 403 | 404 | 500) {\r\n    const item = {\r\n      403: {\r\n        img:\r\n          'https://gw.alipayobjects.com/zos/rmsportal/wZcnGqRDyhPOEYFcZDnb.svg',\r\n        title: '403',\r\n        desc: '抱歉，你无权访问该页面',\r\n      },\r\n      404: {\r\n        img:\r\n          'https://gw.alipayobjects.com/zos/rmsportal/KpnpchXsobRgLElEozzI.svg',\r\n        title: '404',\r\n        desc: '抱歉，你访问的页面不存在',\r\n      },\r\n      500: {\r\n        img:\r\n          'https://gw.alipayobjects.com/zos/rmsportal/RVRUAYdCGeYNBWoKiIwB.svg',\r\n        title: '500',\r\n        desc: '抱歉，服务器出错了',\r\n      },\r\n    }[value];\r\n\r\n    if (!item) return;\r\n\r\n    this._img = item.img;\r\n    this._title = item.title;\r\n    this._desc = item.desc;\r\n  }\r\n\r\n  @Input()\r\n  set img(value) {\r\n    this._img = value;\r\n  }\r\n  @Input()\r\n  set title(value) {\r\n    this._title = value;\r\n  }\r\n  @Input()\r\n  set desc(value) {\r\n    this._desc = value;\r\n  }\r\n\r\n  @ContentChild('actions') actions: TemplateRef<any>;\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { ExceptionComponent } from './exception.component';\r\n\r\nconst COMPONENTS = [ExceptionComponent];\r\n\r\n// region: zorro modules\r\n\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nconst ZORROMODULES = [NgZorroAntdModule];\r\n\r\n// endregion\r\n\r\n@NgModule({\r\n  imports: [CommonModule, RouterModule, ...ZORROMODULES],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdExceptionModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdExceptionModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostListener,\r\n  HostBinding,\r\n  ViewEncapsulation,\r\n  ViewChildren,\r\n  TemplateRef,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport {\r\n  coerceNumberProperty,\r\n  coerceBooleanProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\nimport { NoticeItem, NoticeIconClick } from './interface';\r\n\r\n@Component({\r\n  selector: 'notice-icon',\r\n  template: `\r\n  <nz-badge *ngIf=\"data?.length === 0\" [nzCount]=\"count\">\r\n    <i class=\"anticon anticon-bell\"></i>\r\n  </nz-badge>\r\n  <nz-popover *ngIf=\"data?.length > 0\"\r\n    [nzVisible]=\"popoverVisible\" (nzVisibleChange)=\"onVisibleChange($event)\" nzTrigger=\"click\"\r\n    nzPlacement=\"bottomRight\"\r\n    nzOverlayClassName=\"ad-notice-icon-con\">\r\n    <div nz-popover class=\"item\">\r\n      <nz-badge [nzCount]=\"count\">\r\n        <i class=\"anticon anticon-bell\"></i>\r\n      </nz-badge>\r\n    </div>\r\n    <ng-template #nzTemplate>\r\n      <nz-spin [nzSpinning]=\"loading\" [nzDelay]=\"0\">\r\n        <nz-tabset>\r\n          <nz-tab *ngFor=\"let i of data\" [nzTitle]=\"i.title\">\r\n            <notice-icon-tab\r\n              [data]=\"i\"\r\n              (select)=\"onSelect($event)\"\r\n              (clear)=\"onClear($event)\"></notice-icon-tab>\r\n          </nz-tab>\r\n        </nz-tabset>\r\n      </nz-spin>\r\n    </ng-template>\r\n  </nz-popover>\r\n  `,\r\n  host: { '[class.ad-notice-icon]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class NoticeIconComponent {\r\n  @Input() data: NoticeItem[] = [];\r\n\r\n  /** 图标上的消息总数 */\r\n  @Input()\r\n  get count() {\r\n    return this._count;\r\n  }\r\n  set count(value: any) {\r\n    this._count = coerceNumberProperty(value);\r\n  }\r\n  private _count: number;\r\n\r\n  /** 弹出卡片加载状态 */\r\n  @Input()\r\n  get loading() {\r\n    return this._loading;\r\n  }\r\n  set loading(value: any) {\r\n    this._loading = coerceBooleanProperty(value);\r\n  }\r\n  private _loading = false;\r\n\r\n  @Output() select = new EventEmitter<any>();\r\n  @Output() clear = new EventEmitter<string>();\r\n\r\n  /** 手动控制Popover显示 */\r\n  @Input()\r\n  get popoverVisible() {\r\n    return this._popoverVisible;\r\n  }\r\n  set popoverVisible(value: any) {\r\n    this._popoverVisible = coerceBooleanProperty(value);\r\n  }\r\n  private _popoverVisible = false;\r\n\r\n  @Output() popoverVisibleChange = new EventEmitter<boolean>();\r\n\r\n  onVisibleChange(result: boolean) {\r\n    this.popoverVisibleChange.emit(result);\r\n  }\r\n\r\n  onSelect(i: any) {\r\n    this.select.emit(i);\r\n  }\r\n\r\n  onClear(title: string) {\r\n    this.clear.emit(title);\r\n  }\r\n}\r\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { NoticeItem, NoticeIconClick } from './interface';\r\n\r\n@Component({\r\n  selector: 'notice-icon-tab',\r\n  template: `\r\n  <div *ngIf=\"data.list?.length === 0; else listTpl\" class=\"not-found\">\r\n    <img *ngIf=\"data.emptyImage\" src=\"{{data.emptyImage}}\" alt=\"not found\" />\r\n    <p>{{data.emptyText || '无通知'}}</p>\r\n  </div>\r\n  <ng-template #listTpl>\r\n    <nz-list [nzDataSource]=\"data.list\" [nzRenderItem]=\"item\">\r\n      <ng-template #item let-item>\r\n        <nz-list-item (click)=\"onClick(item)\" [ngClass]=\"{'read': item.read}\">\r\n          <nz-list-item-meta\r\n            [nzTitle]=\"nzTitle\"\r\n            [nzDescription]=\"nzDescription\"\r\n            [nzAvatar]=\"item.avatar\">\r\n            <ng-template #nzTitle>\r\n              {{item.title}}\r\n              <div class=\"extra\" *ngIf=\"item.extra\"><nz-tag [nzColor]=\"item.color\">{{item.extra}}</nz-tag></div>\r\n            </ng-template>\r\n            <ng-template #nzDescription>\r\n              <div *ngIf=\"item.description\" class=\"description\">{{item.description}}</div>\r\n              <div *ngIf=\"item.datetime\" class=\"datetime\">{{item.datetime}}</div>\r\n            </ng-template>\r\n          </nz-list-item-meta>\r\n        </nz-list-item>\r\n      </ng-template>\r\n    </nz-list>\r\n    <div class=\"clear\" (click)=\"onClear()\">{{ data.clearText || '清空' }}</div>\r\n  </ng-template>\r\n  `,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class NoticeIconTabComponent {\r\n  @Input() data: NoticeItem;\r\n  @Output() select = new EventEmitter<any>();\r\n  @Output() clear = new EventEmitter<string>();\r\n\r\n  onClick(item: NoticeItem) {\r\n    this.select.emit({\r\n      title: this.data.title,\r\n      item,\r\n    });\r\n  }\r\n\r\n  onClear() {\r\n    this.clear.emit(this.data.title);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { NoticeIconComponent } from './notice-icon.component';\r\nimport { NoticeIconTabComponent } from './notice-icon-tab.component';\r\n\r\nconst COMPONENTS = [NoticeIconComponent];\r\n\r\n// region: zorro modules\r\n\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nconst ZORROMODULES = [NgZorroAntdModule];\r\n\r\n// endregion\r\n\r\n@NgModule({\r\n  imports: [CommonModule, ...ZORROMODULES],\r\n  declarations: [...COMPONENTS, NoticeIconTabComponent],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdNoticeIconModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdNoticeIconModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  ViewEncapsulation,\r\n  TemplateRef,\r\n  Input,\r\n  ContentChild,\r\n  ElementRef,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  OnChanges,\r\n  SimpleChange,\r\n  ChangeDetectorRef,\r\n  ChangeDetectionStrategy,\r\n} from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'number-info',\r\n  template: `\r\n  <div *ngIf=\"_title || _titleTpl\" class=\"title\"><ng-container *ngIf=\"_title; else _titleTpl\">{{_title}}</ng-container></div>\r\n  <div *ngIf=\"_subTitle || _subTitleTpl\" class=\"sub-title\"><ng-container *ngIf=\"_subTitle; else _subTitleTpl\">{{_subTitle}}</ng-container></div>\r\n  <div class=\"value\" [ngStyle]=\"{'margin-top.px': gap}\">\r\n    <span><ng-container *ngIf=\"_total; else _totalTpl\">{{_total}}</ng-container><em class=\"suffix\" *ngIf=\"suffix\">{{suffix}}</em></span>\r\n    <span *ngIf=\"status || _isSubTotal\" class=\"sub-total\">\r\n      <ng-container *ngIf=\"_subTotal; else _subTotalTpl\">{{_subTotal}}</ng-container>\r\n      <i *ngIf=\"status\" class=\"anticon anticon-caret-{{status}}\"></i>\r\n    </span>\r\n  </div>\r\n  `,\r\n  host: { '[class.ad-number-info]': 'true' },\r\n  preserveWhitespaces: false,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class NumberInfoComponent implements OnChanges {\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  /** 标题 */\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  _subTitle = '';\r\n  _subTitleTpl: TemplateRef<any>;\r\n  /** 子标题 */\r\n  @Input()\r\n  set subTitle(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._subTitle = null;\r\n      this._subTitleTpl = value;\r\n    } else this._subTitle = value;\r\n  }\r\n\r\n  _total = '';\r\n  _totalTpl: TemplateRef<any>;\r\n  /** 总量 */\r\n  @Input()\r\n  set total(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._total = null;\r\n      this._totalTpl = value;\r\n    } else this._total = '' + value;\r\n  }\r\n\r\n  _isSubTotal = false;\r\n  _subTotal = '';\r\n  _subTotalTpl: TemplateRef<any>;\r\n  /** 总量后缀 */\r\n  @Input()\r\n  set subTotal(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._subTotal = null;\r\n      this._subTotalTpl = value;\r\n    } else this._subTotal = value;\r\n\r\n    this._isSubTotal = !!value;\r\n  }\r\n\r\n  /** 子总量 */\r\n  @Input() suffix: string;\r\n\r\n  /** 增加状态 */\r\n  @Input() status: 'up' | 'down';\r\n\r\n  /** 状态样式 */\r\n  @Input() theme: 'light' | '' = 'light';\r\n\r\n  /** 设置数字和描述直接的间距（像素） */\r\n  @Input()\r\n  get gap() {\r\n    return this._gap;\r\n  }\r\n  set gap(value: any) {\r\n    this._gap = coerceNumberProperty(value);\r\n  }\r\n  private _gap = 8;\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    private cd: ChangeDetectorRef,\r\n  ) {}\r\n\r\n  _classMap: string[] = [];\r\n  setClass() {\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.removeClass(this.el.nativeElement, cls),\r\n    );\r\n\r\n    this._classMap = [`number-info`];\r\n    if (this.theme) this._classMap.push(this.theme);\r\n\r\n    this._classMap.forEach(v =>\r\n      this.renderer.addClass(this.el.nativeElement, v),\r\n    );\r\n\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    this.setClass();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { NumberInfoComponent } from './number-info.component';\r\n\r\nconst COMPONENTS = [NumberInfoComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdNumberInfoModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdNumberInfoModule, providers: [] };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class AdPageHeaderConfig {\r\n  /**\r\n   * 首页文本，若指定空表示不显示\r\n   */\r\n  home?: string = '首页';\r\n  /**\r\n   * 首页链接\r\n   */\r\n  home_link?: string = '/';\r\n  /**\r\n   * 首页链接国际化参数\r\n   */\r\n  home_i18n?: string;\r\n  /**\r\n   * 自动生成导航，以当前路由从主菜单中定位\r\n   */\r\n  autoBreadcrumb?: boolean = true;\r\n}\r\n","import {\n  Component,\n  Input,\n  TemplateRef,\n  ContentChild,\n  OnInit,\n  OnChanges,\n  Inject,\n  Optional,\n  SimpleChange,\n  SimpleChanges,\n  ViewChild,\n  ElementRef,\n  AfterViewInit,\n  Renderer2,\n} from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { MenuService, ALAIN_I18N_TOKEN, AlainI18NService } from '@delon/theme';\nimport { isEmpty } from '@delon/util';\n\nimport { AdPageHeaderConfig } from './page-header.config';\n\n@Component({\n  selector: 'page-header',\n  template: `\n  <ng-container *ngIf=\"!breadcrumb; else breadcrumb\">\n    <nz-breadcrumb *ngIf=\"paths && paths.length > 0\">\n      <nz-breadcrumb-item *ngFor=\"let i of paths\">\n        <ng-container *ngIf=\"i.link\"><a [routerLink]=\"i.link\">{{i.title}}</a></ng-container>\n        <ng-container *ngIf=\"!i.link\">{{i.title}}</ng-container>\n      </nz-breadcrumb-item>\n    </nz-breadcrumb>\n  </ng-container>\n  <div class=\"detail\">\n    <div *ngIf=\"logo\" class=\"logo\"><ng-template [ngTemplateOutlet]=\"logo\"></ng-template></div>\n    <div class=\"main\">\n      <div class=\"row\">\n        <h1 *ngIf=\"title\" class=\"title\">{{title}}</h1>\n        <div *ngIf=\"action\" class=\"action\"><ng-template [ngTemplateOutlet]=\"action\"></ng-template></div>\n      </div>\n      <div class=\"row\">\n        <div class=\"desc\" (cdkObserveContent)=\"checkContent()\" #conTpl><ng-content></ng-content><ng-template [ngTemplateOutlet]=\"content\"></ng-template></div>\n        <div *ngIf=\"extra\" class=\"extra\"><ng-template [ngTemplateOutlet]=\"extra\"></ng-template></div>\n      </div>\n    </div>\n  </div>\n  <ng-template [ngTemplateOutlet]=\"tab\"></ng-template>\n  `,\n  host: {\n    '[class.content__title]': 'true',\n    '[class.ad-page-header]': 'true',\n  },\n  preserveWhitespaces: false,\n})\nexport class PageHeaderComponent implements OnInit, OnChanges, AfterViewInit {\n  @ViewChild('conTpl') conTpl: ElementRef;\n\n  // region fields\n\n  @Input() title: string;\n\n  @Input() home: string;\n\n  @Input() home_link: string;\n\n  @Input() home_i18n: string;\n\n  /**\n   * 自动生成导航，以当前路由从主菜单中定位\n   */\n  @Input()\n  get autoBreadcrumb() {\n    return this._autoBreadcrumb;\n  }\n  set autoBreadcrumb(value: any) {\n    this._autoBreadcrumb = coerceBooleanProperty(value);\n  }\n  private _autoBreadcrumb = true;\n\n  paths: any[] = [];\n\n  @ContentChild('breadcrumb') breadcrumb: TemplateRef<any>;\n\n  @ContentChild('logo') logo: TemplateRef<any>;\n\n  @ContentChild('action') action: TemplateRef<any>;\n\n  @ContentChild('content') content: TemplateRef<any>;\n\n  @ContentChild('extra') extra: TemplateRef<any>;\n\n  @ContentChild('tab') tab: TemplateRef<any>;\n\n  // endregion\n\n  constructor(\n    cog: AdPageHeaderConfig,\n    private renderer: Renderer2,\n    private route: Router,\n    @Optional() private menuSrv: MenuService,\n    @Optional()\n    @Inject(ALAIN_I18N_TOKEN)\n    private i18nSrv: AlainI18NService,\n  ) {\n    Object.assign(this, cog);\n  }\n\n  genBreadcrumb() {\n    if (this.breadcrumb || !this.autoBreadcrumb || !this.menuSrv) return;\n    const menus = this.menuSrv.getPathByUrl(this.route.url);\n    if (menus.length <= 0) return;\n    const paths: any[] = [];\n    menus.forEach(item => {\n      if (typeof item.hideInBreadcrumb !== 'undefined' && item.hideInBreadcrumb)\n        return;\n      let title = item.text;\n      if (item.i18n && this.i18nSrv) title = this.i18nSrv.fanyi(item.i18n);\n      paths.push({ title, link: item.link && [item.link] });\n    });\n    // add home\n    if (this.home) {\n      paths.splice(0, 0, {\n        title:\n          (this.home_i18n &&\n            this.i18nSrv &&\n            this.i18nSrv.fanyi(this.home_i18n)) ||\n          this.home,\n        link: [this.home_link],\n      });\n    }\n    this.paths = paths;\n  }\n\n  checkContent() {\n    if (isEmpty(this.conTpl.nativeElement)) {\n      this.renderer.setAttribute(this.conTpl.nativeElement, 'hidden', '');\n    } else {\n      this.renderer.removeAttribute(this.conTpl.nativeElement, 'hidden');\n    }\n  }\n\n  ngOnInit() {\n    this.genBreadcrumb();\n  }\n\n  ngAfterViewInit(): void {\n    this.checkContent();\n  }\n\n  ngOnChanges(\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\n  ): void {\n    if (changes.autoBreadcrumb && !changes.autoBreadcrumb.firstChange)\n      this.genBreadcrumb();\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { PageHeaderComponent } from './page-header.component';\nimport { AdPageHeaderConfig } from './page-header.config';\n\nconst COMPONENTS = [PageHeaderComponent];\n\n// region: zorro modules\n\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\n\nconst ZORROMODULES = [NgZorroAntdModule];\n\n// endregion\n\n@NgModule({\n  imports: [CommonModule, RouterModule, DelonUtilModule, ...ZORROMODULES],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS],\n})\nexport class AdPageHeaderModule {\n  static forRoot(): ModuleWithProviders {\n    return { ngModule: AdPageHeaderModule, providers: [AdPageHeaderConfig] };\n  }\n}\n","import { Component, Input, TemplateRef, ContentChild } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'result',\r\n  template: `\r\n  <div class=\"icon\"><i class=\"anticon anticon-{{_icon}} {{_type}}\"></i></div>\r\n  <div class=\"title\"><ng-container *ngIf=\"_title; else _titleTpl\">{{_title}}</ng-container></div>\r\n  <div *ngIf=\"_description || _descriptionTpl\" class=\"description\"><ng-container *ngIf=\"_description; else _descriptionTpl\">{{_description}}</ng-container></div>\r\n  <div *ngIf=\"_extra || _extraTpl\" class=\"extra\">\r\n    <ng-container *ngIf=\"_extra; else _extraTpl\">{{_extra}}</ng-container>\r\n  </div>\r\n  <div class=\"actions\"><ng-content></ng-content></div>\r\n  `,\r\n  host: { '[class.ad-result]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class ResultComponent {\r\n  // region: fields\r\n\r\n  _type = '';\r\n  _icon = '';\r\n  @Input()\r\n  set type(value: string) {\r\n    this._type = value;\r\n    switch (value) {\r\n      case 'success':\r\n        this._icon = 'check-circle';\r\n        break;\r\n      case 'error':\r\n        this._icon = 'close-circle';\r\n        break;\r\n      default:\r\n        this._icon = value;\r\n        break;\r\n    }\r\n  }\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  _description = '';\r\n  _descriptionTpl: TemplateRef<any>;\r\n  @Input()\r\n  set description(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._description = null;\r\n      this._descriptionTpl = value;\r\n    } else this._description = value;\r\n  }\r\n\r\n  _extra = '';\r\n  _extraTpl: TemplateRef<any>;\r\n  @Input()\r\n  set extra(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._extra = null;\r\n      this._extraTpl = value;\r\n    } else this._extra = value;\r\n  }\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ResultComponent } from './result.component';\r\n\r\nconst COMPONENTS = [ResultComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdResultModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdResultModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  ElementRef,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  Renderer2,\r\n  SimpleChange,\r\n} from '@angular/core';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'standard-form-row',\r\n  template: `\r\n  <div *ngIf=\"title\" class=\"label\"><span>{{title}}</span></div>\r\n  <div class=\"control\"><ng-content></ng-content></div>\r\n  `,\r\n  host: { '[class.ad-standard-form-row]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class StandardFormRowComponent implements OnChanges {\r\n  @Input() title: string;\r\n\r\n  /** 是否整行 */\r\n  @Input()\r\n  get block() {\r\n    return this._block;\r\n  }\r\n  set block(value: any) {\r\n    this._block = coerceBooleanProperty(value);\r\n  }\r\n  private _block: boolean;\r\n\r\n  /** 是否最后一行 */\r\n  @Input()\r\n  get last() {\r\n    return this._last;\r\n  }\r\n  set last(value: any) {\r\n    this._last = coerceBooleanProperty(value);\r\n  }\r\n  private _last: boolean;\r\n\r\n  /** 是否网格布局 */\r\n  @Input()\r\n  get grid() {\r\n    return this._grid;\r\n  }\r\n  set grid(value: any) {\r\n    this._grid = coerceBooleanProperty(value);\r\n  }\r\n  private _grid: boolean;\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\r\n\r\n  _classMap: string[] = [];\r\n  setClass() {\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.removeClass(this.el.nativeElement, cls),\r\n    );\r\n\r\n    this._classMap = [`standard-form-row`];\r\n    if (this.block) this._classMap.push('block');\r\n    if (this.grid) this._classMap.push('grid');\r\n    if (this.last) this._classMap.push('last');\r\n\r\n    this._classMap.forEach(v =>\r\n      this.renderer.addClass(this.el.nativeElement, v),\r\n    );\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    this.setClass();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { StandardFormRowComponent } from './standard-form-row.component';\r\n\r\nconst COMPONENTS = [StandardFormRowComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdStandardFormRowModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdStandardFormRowModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  HostBinding,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n} from '@angular/core';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'tag-select',\r\n  template: `\r\n    <ng-content></ng-content>\r\n    <a *ngIf=\"expandable\" class=\"trigger\" (click)=\"trigger()\">{{expand ? '收起' : '展开'}}<i class=\"anticon anticon-{{expand ? 'up' : 'down'}} ml-sm\"></i></a>`,\r\n  host: { '[class.ad-tag-select]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class TagSelectComponent {\r\n  /** 是否启用 `展开与收进` */\r\n  @HostBinding('class.has-expand')\r\n  @Input()\r\n  get expandable() {\r\n    return this._expandable;\r\n  }\r\n  set expandable(value: any) {\r\n    this._expandable = coerceBooleanProperty(value);\r\n  }\r\n  private _expandable = true;\r\n\r\n  @HostBinding('class.expanded') expand = false;\r\n\r\n  @Output() change: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n\r\n  trigger() {\r\n    this.expand = !this.expand;\r\n    this.change.emit(this.expand);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TagSelectComponent } from './tag-select.component';\r\n\r\nconst COMPONENTS = [TagSelectComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdTagSelectModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdTagSelectModule, providers: [] };\r\n  }\r\n}\r\n","import { Component, HostBinding, Input } from '@angular/core';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'trend',\r\n  template: `\r\n  <ng-content></ng-content>\r\n  <span *ngIf=\"flag\" class=\"{{flag}}\"><i class=\"anticon anticon-caret-{{flag}}\"></i></span>\r\n  `,\r\n  host: {\r\n    '[class.ad-trend]': 'true',\r\n    '[class.grey]': '!colorful',\r\n  },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class TrendComponent {\r\n  /** 上升下降标识 */\r\n  @Input() flag: 'up' | 'down';\r\n\r\n  /** 是否彩色标记 */\r\n  @Input()\r\n  get colorful() {\r\n    return this._colorful;\r\n  }\r\n  set colorful(value: any) {\r\n    this._colorful = coerceBooleanProperty(value);\r\n  }\r\n  private _colorful = true;\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TrendComponent } from './trend.component';\r\n\r\nconst COMPONENTS = [TrendComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdTrendModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdTrendModule, providers: [] };\r\n  }\r\n}\r\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport * as format from 'date-fns/format';\r\nimport * as addSeconds from 'date-fns/add_seconds';\r\n\r\n@Component({\r\n  selector: 'count-down',\r\n  template: `\r\n    <countdown *ngIf=\"config\" [config]=\"config\"\r\n      (start)=\"_start()\"\r\n      (finished)=\"_finished()\"\r\n      (notify)=\"_notify($event)\"></countdown>\r\n  `,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class CountDownComponent {\r\n  @Input() config: any;\r\n\r\n  /**\r\n   * 目标时间\r\n   */\r\n  @Input()\r\n  set target(value: number | Date) {\r\n    this.config = {\r\n      template: `$!h!:$!m!:$!s!`,\r\n      stopTime:\r\n        typeof value === 'number'\r\n          ? addSeconds(new Date(), value).valueOf()\r\n          : format(value, 'x'),\r\n    };\r\n  }\r\n\r\n  @Output() begin = new EventEmitter();\r\n  @Output() notify = new EventEmitter<number>();\r\n  @Output() end = new EventEmitter();\r\n\r\n  _start() {\r\n    this.begin.emit();\r\n  }\r\n\r\n  _notify(time: number) {\r\n    this.notify.emit(time);\r\n  }\r\n\r\n  _finished() {\r\n    this.end.emit();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CountdownModule } from 'ngx-countdown';\r\n\r\nimport { CountDownComponent } from './count-down.component';\r\n\r\nconst COMPONENTS = [CountDownComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, CountdownModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdCountDownModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdCountDownModule, providers: [] };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class AdSimpleTableConfig {\r\n  /**\r\n   * 起始页码，默认为：`1`\r\n   */\r\n  pi?: number;\r\n  /**\r\n   * 每页数量，当设置为 `0` 表示不分页，默认：`10`\r\n   */\r\n  ps?: number;\r\n  /**\r\n   * 是否显示边框\r\n   */\r\n  bordered?: boolean;\r\n  /**\r\n   * table大小\r\n   */\r\n  size?: 'small' | 'middle' | 'default';\r\n  /**\r\n   * 是否显示pagination中改变页数\r\n   */\r\n  showSizeChanger?: boolean;\r\n  /**\r\n   * pagination中每页显示条目数下拉框值\r\n   */\r\n  pageSizeOptions?: number[] = [10, 20, 30, 40, 50];\r\n  /**\r\n   * 是否显示pagination中快速跳转\r\n   */\r\n  showQuickJumper?: boolean;\r\n  /**\r\n   * 是否显示总数据量，默认：`共 {{total}} 条`\r\n   */\r\n  showTotal?: boolean | string = `共 {{total}} 条`;\r\n  /**\r\n   * 数据变更后是否保留在数据变更前的页码\r\n   */\r\n  isPageIndexReset?: boolean;\r\n  /**\r\n   * 分页方向\r\n   */\r\n  pagePlacement?: 'left' | 'center' | 'right';\r\n  /**\r\n   * 切换分页时返回顶部\r\n   */\r\n  toTopInChange?: boolean;\r\n  /**\r\n   * 返回顶部偏移值\r\n   */\r\n  toTopOffset?: number;\r\n  /**\r\n   * 重命名请求参数 `pi`、`ps`，例如：`{ pi: 'Page' }` `pi` 会被替换成 Page\r\n   */\r\n  reqReName?: Object;\r\n  /**\r\n   * 重命名返回参数 `total`、`list`，例如：`{ total: 'Total' }` Total 会被当作 `total`\r\n   */\r\n  resReName?: { total?: string | string[]; list?: string | string[] };\r\n  /**\r\n   * 重命名排序值，`columns` 的重命名高于属性\r\n   */\r\n  sortReName?: { ascend?: string; descend?: string };\r\n  /**\r\n   * 指定模态框目标组件的接收参数名，默认：`record`\r\n   */\r\n  modalParamsName?: string;\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport const DA_XLSX_CONFIG = new InjectionToken<XlsxConfig>('DA_XLSX_CONFIG');\r\n\r\nexport interface XlsxConfig {\r\n  /**\r\n   * Xlsx library path\r\n   * @default //cdn.bootcss.com/xlsx/0.11.17/xlsx.full.min.js\r\n   */\r\n  url?: string;\r\n  /**\r\n   * Defines which Xlsx optional modules should get loaded, e.g:\r\n   * `[ '//cdn.bootcss.com/xlsx/0.11.14/cpexcel.js' ]`\r\n   */\r\n  modules?: string[];\r\n}\r\n\r\nexport interface XlsxExportOptions {\r\n  /**\r\n   * worksheets in the workbook, e.g:\r\n   * - `{ Sheet1: { A1: { t:\"n\", v:10000 } } }`\r\n   * - `[['1'], [1]]`\r\n   */\r\n  sheets: { [sheet: string]: any } | XlsxExportSheet[];\r\n  /** save file name, default: `export.xlsx` */\r\n  filename?: string;\r\n  opts?: any;\r\n  /** triggers when saveas */\r\n  callback?: (wb: any) => void;\r\n}\r\n\r\nexport interface XlsxExportSheet {\r\n  /** arrays to a worksheet */\r\n  data: any[][];\r\n  /** sheet name */\r\n  name?: string;\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { saveAs } from 'file-saver';\nimport { LazyService, LazyResult } from '@delon/util';\nimport {\n  XlsxExportOptions,\n  DA_XLSX_CONFIG,\n  XlsxConfig,\n  XlsxExportSheet,\n} from './interface';\n\ndeclare var XLSX: any;\n\n@Injectable()\nexport class XlsxService {\n  constructor(\n    @Inject(DA_XLSX_CONFIG) private config: XlsxConfig,\n    private http: HttpClient,\n    private lazy: LazyService,\n  ) {}\n\n  private init(): Promise<LazyResult[]> {\n    const config = Object.assign(\n      {\n        url: `//cdn.bootcss.com/xlsx/0.11.17/xlsx.full.min.js`,\n        modules: [],\n      },\n      this.config,\n    );\n\n    return this.lazy.load([config.url].concat(config.modules));\n  }\n\n  private read(wb: any): { [key: string]: any[][] } {\n    const ret: any = {};\n    wb.SheetNames.forEach(name => {\n      const sheet: any = wb.Sheets[name];\n      ret[name] = XLSX.utils.sheet_to_json(sheet, { header: 1 });\n    });\n    return ret;\n  }\n\n  /** 导入Excel并输出JSON，支持 `<input type=\"file\">`、URL 形式 */\n  import(fileOrUrl: File | string): Promise<{ [key: string]: any[][] }> {\n    return new Promise<{ [key: string]: any[][] }>((resolver, reject) => {\n      this.init().then(() => {\n        // from url\n        if (typeof fileOrUrl === 'string') {\n          this.http\n            .request('GET', fileOrUrl, { responseType: 'arraybuffer' })\n            .subscribe(\n              (res: ArrayBuffer) => {\n                const wb = XLSX.read(new Uint8Array(res), { type: 'array' });\n                resolver(this.read(wb));\n              },\n              (err: any) => {\n                reject(err);\n              },\n            );\n          return;\n        }\n        // from file\n        const reader: FileReader = new FileReader();\n        reader.onload = (e: any) => {\n          const wb: any = XLSX.read(e.target.result, { type: 'binary' });\n          resolver(this.read(wb));\n        };\n        reader.readAsArrayBuffer(fileOrUrl);\n      });\n    });\n  }\n\n  /** 导出 */\n  export(options: XlsxExportOptions): Promise<void> {\n    return this.init().then(() => {\n      const wb: any = XLSX.utils.book_new();\n      if (Array.isArray(options.sheets)) {\n        (<XlsxExportSheet[]>options.sheets).forEach(\n          (value: XlsxExportSheet, index: number) => {\n            const ws: any = XLSX.utils.aoa_to_sheet(value.data);\n            XLSX.utils.book_append_sheet(\n              wb,\n              ws,\n              value.name || `Sheet${index + 1}`,\n            );\n          },\n        );\n      } else {\n        wb.SheetNames = Object.keys(options.sheets);\n        wb.Sheets = options.sheets;\n      }\n\n      if (options.callback) options.callback(wb);\n\n      const wbout: ArrayBuffer = XLSX.write(\n        wb,\n        Object.assign(\n          {\n            bookType: 'xlsx',\n            type: 'array',\n          },\n          options.opts,\n        ),\n      );\n      saveAs(\n        new Blob([wbout], { type: 'application/octet-stream' }),\n        options.filename || 'export.xlsx',\n      );\n    });\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { deepGet } from '@delon/util';\nimport { XlsxService } from '../xlsx/xlsx.service';\nimport { SimpleTableColumn, STExportOptions } from './interface';\n\n@Injectable()\nexport class SimpleTableExport {\n  constructor(@Optional() private xlsxSrv: XlsxService) {}\n\n  private _stGet(item: any, col: SimpleTableColumn): any {\n    const ret: any = { t: 's', v: '' };\n\n    if (col.format) {\n      ret.v = col.format(item, col);\n    } else {\n      const val = deepGet(item, col.index as string[], '');\n      if (typeof val === 'undefined') {\n        ret.v = '';\n      } else {\n        ret.v = val;\n        switch (col.type) {\n          case 'currency':\n            ret.t = 'n';\n            break;\n          case 'date':\n            ret.t = 'd';\n            break;\n          case 'yn':\n            ret.v = ret === col.ynTruth ? col.ynYes || '是' : col.ynNo || '否';\n            break;\n        }\n      }\n    }\n\n    return ret;\n  }\n\n  private genSheet(opt: STExportOptions): { [sheet: string]: any } {\n    const sheets: { [sheet: string]: any } = {};\n    const sheet = (sheets[opt.sheetname || 'Sheet1'] = {});\n    const colData = opt._c.filter(\n      w =>\n        w.exported !== false &&\n        w.index &&\n        (!w.buttons || w.buttons.length === 0),\n    );\n    const cc = colData.length,\n      dc = opt._d.length;\n    // region: column\n    for (let i = 0; i < cc; i++) {\n      sheet[`${String.fromCharCode(65 + i)}1`] = {\n        t: 's',\n        v: colData[i].title,\n      };\n    }\n    // endregion\n\n    // region: content\n    for (let i = 0; i < dc; i++) {\n      for (let j = 0; j < cc; j++) {\n        sheet[`${String.fromCharCode(65 + j)}${i + 2}`] = this._stGet(\n          opt._d[i],\n          colData[j],\n        );\n      }\n    }\n    // endregion\n\n    sheet['!ref'] = `A1:${String.fromCharCode(65 + cc - 1)}${dc + 1}`;\n\n    return sheets;\n  }\n\n  export(opt: STExportOptions) {\n    if (!this.xlsxSrv)\n      throw new Error(`muse be import 'AdXlsxModule' module, but got null`);\n    const sheets = this.genSheet(opt);\n    return this.xlsxSrv.export({\n      sheets,\n      filename: opt.filename,\n      callback: opt.callback,\n    });\n  }\n}\n","import {\r\n  Component,\r\n  Inject,\r\n  Input,\r\n  Output,\r\n  OnDestroy,\r\n  OnInit,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  EventEmitter,\r\n  Renderer2,\r\n  ElementRef,\r\n  TemplateRef,\r\n  SimpleChange,\r\n  QueryList,\r\n  ViewChildren,\r\n  ContentChildren,\r\n  ContentChild,\r\n  Optional,\r\n} from '@angular/core';\r\nimport { DecimalPipe } from '@angular/common';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { DOCUMENT } from '@angular/platform-browser';\r\nimport { ACLService } from '@delon/acl';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { tap, map, filter } from 'rxjs/operators';\r\nimport { of } from 'rxjs/observable/of';\r\nimport {\r\n  coerceBooleanProperty,\r\n  coerceNumberProperty,\r\n} from '@angular/cdk/coercion';\r\nimport {\r\n  CNCurrencyPipe,\r\n  DatePipe,\r\n  YNPipe,\r\n  ModalHelper,\r\n  ALAIN_I18N_TOKEN,\r\n  AlainI18NService,\r\n} from '@delon/theme';\r\nimport { deepGet, deepCopy } from '@delon/util';\r\n\r\nimport {\r\n  SimpleTableColumn,\r\n  SimpleTableChange,\r\n  CompareFn,\r\n  SimpleTableSelection,\r\n  SimpleTableFilter,\r\n  SimpleTableData,\r\n  SimpleTableButton,\r\n  STExportOptions,\r\n  ResReNameType,\r\n  ReqReNameType,\r\n} from './interface';\r\nimport { AdSimpleTableConfig } from './simple-table.config';\r\nimport { SimpleTableRowDirective } from './simple-table-row.directive';\r\nimport { SimpleTableExport } from './simple-table-export';\r\n\r\n@Component({\r\n  selector: 'simple-table',\r\n  template: `<nz-table [nzData]=\"_data\" [(nzPageIndex)]=\"pi\" (nzPageIndexChange)=\"_change('pi')\" [(nzPageSize)]=\"ps\" (nzPageSizeChange)=\"_change('ps')\" [nzTotal]=\"total\" [nzShowPagination]=\"_isPagination\" [nzFrontPagination]=\"false\" [nzBordered]=\"bordered\" [nzSize]=\"size\" [nzLoading]=\"loading\" [nzLoadingDelay]=\"loadingDelay\" [nzScroll]=\"scroll\" [nzTitle]=\"header\" [nzFooter]=\"footer\" [nzNoResult]=\"noResult\" [nzPageSizeOptions]=\"pageSizeOptions\" [nzShowQuickJumper]=\"showQuickJumper\" [nzShowSizeChanger]=\"showSizeChanger\" [nzShowTotal]=\"totalTpl\"> <thead> <tr> <th *ngIf=\"expand\" [nzShowExpand]=\"expand\"></th> <th *ngFor=\"let c of _columns; let index=index\" [nzWidth]=\"c.width\" [nzLeft]=\"c._left\" [nzRight]=\"c._right\" [ngClass]=\"c.className\" [attr.colspan]=\"c.colSpan\" [attr.data-col]=\"c.indexKey\" [nzShowSort]=\"_sortMap[index].enabled\" [(nzSort)]=\"_sortMap[index].v\" (nzSortChange)=\"sort(index, $event)\"> <ng-template #renderTitle [ngTemplateOutlet]=\"c.__renderTitle\" [ngTemplateOutletContext]=\"{$implicit: c, index: index }\"></ng-template> <ng-container *ngIf=\"!c.__renderTitle; else renderTitle\"> <ng-container [ngSwitch]=\"c.type\"> <ng-container *ngSwitchCase=\"'checkbox'\"> <label nz-checkbox [(ngModel)]=\"_allChecked\" [nzIndeterminate]=\"_indeterminate\" (ngModelChange)=\"_checkAll()\"></label> <nz-dropdown *ngIf=\"c.selections.length\"> <span nz-dropdown> <i class=\"anticon anticon-down\"></i> </span> <ul nz-menu> <li nz-menu-item *ngFor=\"let rw of c.selections\" (click)=\"_rowSelection(rw)\" [innerHTML]=\"rw.text\"> </li> </ul> </nz-dropdown> </ng-container> <ng-container *ngSwitchDefault> <span [innerHTML]=\"c.title\"></span> </ng-container> </ng-container> <nz-dropdown *ngIf=\"c.filters.length > 0\" nzTrigger=\"click\" [hasFilterButton]=\"true\" [nzClickHide]=\"false\" [(nzVisible)]=\"c.filterVisible\"> <i class=\"{{c.filterIcon}}\" [ngClass]=\"{'ant-table-filter-selected': c.filtered}\" nz-dropdown></i> <ul nz-menu> <ng-container *ngIf=\"c.filterMultiple\"> <li nz-menu-item *ngFor=\"let filter of c.filters\"> <label nz-checkbox [(ngModel)]=\"filter.checked\">{{filter.text}}</label> </li> </ng-container> <ng-container *ngIf=\"!c.filterMultiple\"> <li nz-menu-item *ngFor=\"let filter of c.filters\"> <label nz-radio [ngModel]=\"filter.checked\" (ngModelChange)=\"filterRadio(c, filter, $event)\">{{filter.text}}</label> </li> </ng-container> </ul> <div class=\"ant-table-filter-dropdown-btns\"> <a class=\"ant-table-filter-dropdown-link confirm\" (click)=\"c.filterVisible = false\"> <span (click)=\"filterConfirm(c)\">{{c.filterConfirmText}}</span> </a> <a class=\"ant-table-filter-dropdown-link clear\" (click)=\"c.filterVisible = false\"> <span (click)=\"filterClear(c)\">{{c.filterClearText}}</span> </a> </div> </nz-dropdown> </ng-container> </th> </tr> </thead> <tbody> <ng-container *ngFor=\"let i of _data; let index=index\"> <tr> <td *ngIf=\"expand\" [nzShowExpand]=\"expand\" [(nzExpand)]=\"i.expand\"></td> <td *ngFor=\"let c of _columns\" [nzLeft]=\"c._left\" [nzRight]=\"c._right\" [nzCheckbox]=\"c.type === 'checkbox'\" [ngClass]=\"c.className\" [attr.colspan]=\"c.colSpan\"> <ng-template #render [ngTemplateOutlet]=\"c.__render\" [ngTemplateOutletContext]=\"{$implicit: i, index: index, column: c }\"></ng-template> <ng-container *ngIf=\"!c.__render; else render\"> <ng-container *ngIf=\"c.index\" [ngSwitch]=\"c.type\"> <ng-container *ngSwitchCase=\"'checkbox'\"> <label nz-checkbox [nzDisabled]=\"i.disabled\" [ngModel]=\"i.checked\" (ngModelChange)=\"_checkSelection(i, $event)\"></label> </ng-container> <ng-container *ngSwitchCase=\"'radio'\"> <label nz-radio [nzDisabled]=\"i.disabled\" [ngModel]=\"i.checked\" (ngModelChange)=\"_refRadio(index, $event, i)\"></label> </ng-container> <ng-container *ngSwitchCase=\"'link'\"> <a (click)=\"_click($event, i, c)\" [innerHTML]=\"_get(i, c)\"></a> </ng-container> <span *ngSwitchDefault [innerHTML]=\"_get(i, c)\"></span> </ng-container> <ng-container *ngFor=\"let btn of c.buttons; let last=last\"> <ng-container *ngIf=\"btn.if(i, btn, c)\" [ngSwitch]=\"btn._type\"> <ng-container *ngSwitchCase=\"2\"> <nz-popconfirm [nzTitle]=\"btn.popTitle\" (nzOnConfirm)=\"btnClick(i, btn)\"> <a nz-popconfirm [innerHTML]=\"btnText(i, btn)\"></a> </nz-popconfirm> </ng-container> <ng-container *ngSwitchCase=\"3\"> <nz-dropdown> <a class=\"ant-dropdown-link\" nz-dropdown> {{btnText(i, btn)}} <i class=\"anticon anticon-down\"></i> </a> <ul nz-menu> <ng-container *ngFor=\"let subBtn of btn.children\"> <li nz-menu-item *ngIf=\"btn.if(i, btn, c)\"> <a (click)=\"btnClick(i, subBtn)\" [innerHTML]=\"btnText(i, subBtn)\"></a> </li> </ng-container> </ul> </nz-dropdown> </ng-container> <a *ngSwitchDefault (click)=\"btnClick(i, btn)\" [innerHTML]=\"btnText(i, btn)\"></a> <nz-divider *ngIf=\"!last\" nzType=\"vertical\"></nz-divider> </ng-container> </ng-container> <ng-template [ngIf]=\"!c.__renderExpanded\" [ngTemplateOutlet]=\"c.__renderExpanded\" [ngTemplateOutletContext]=\"{$implicit: i, index: index, column: c }\"></ng-template> </ng-container> </td> </tr> <tr [nzExpand]=\"i.expand\"> <td></td> <td [attr.colspan]=\"_columns.length\"> <ng-template [ngTemplateOutlet]=\"expand\" [ngTemplateOutletContext]=\"{$implicit: i, index: index, column: c }\"></ng-template> </td> </tr> </ng-container> <ng-template [ngIf]=\"!loading\" [ngTemplateOutlet]=\"body\"></ng-template> </tbody> <ng-template #totalTpl let-range=\"range\" let-total>{{ renderTotal(total, range) }}</ng-template> </nz-table> `,\r\n  host: { '[class.ad-st]': 'true' },\r\n  providers: [SimpleTableExport, CNCurrencyPipe, DatePipe, YNPipe, DecimalPipe],\r\n  preserveWhitespaces: false,\r\n})\r\nexport class SimpleTableComponent\r\n  implements OnInit, OnChanges, OnDestroy {\r\n  private data$: Subscription;\r\n  private _inited = false;\r\n  _data: SimpleTableData[] = [];\r\n  _url: string;\r\n  _isAjax = false;\r\n  _isPagination = true;\r\n  _classMap: string[] = [];\r\n  _allChecked = false;\r\n  _indeterminate = false;\r\n  _columns: SimpleTableColumn[] = [];\r\n\r\n  // region: fields\r\n\r\n  /** 数据源 */\r\n  @Input() data: string | any[] | Observable<any[]>;\r\n  /**\r\n   * 额外请求参数，默认自动附加 `pi`、`ps` 至URL\r\n   * - `{ status: 'new' }` => `url?pi=1&ps=10&status=new`\r\n   */\r\n  @Input() extraParams: any;\r\n  /** 请求方法 */\r\n  @Input() reqMehtod: string = 'GET';\r\n  /** 请求体 `body` */\r\n  @Input() reqBody: any;\r\n  /** 请求体 `Header` */\r\n  @Input() reqHeaders: any;\r\n  /**\r\n   * 重命名请求参数 `pi`、`ps`\r\n   * - `{ pi: 'Page' }` => `pi` 会被替换成 Page\r\n   */\r\n  @Input()\r\n  set reqReName(value: ReqReNameType) {\r\n    this._reqReName = Object.assign(this._reqReName, value);\r\n  }\r\n  get reqReName() {\r\n    return this._reqReName;\r\n  }\r\n  private _reqReName: ReqReNameType = { pi: 'pi', ps: 'ps' };\r\n  /** 请求异常时回调 */\r\n  @Output() reqError: EventEmitter<any> = new EventEmitter<any>();\r\n  /**\r\n   * 重命名返回参数 `total`、`list`\r\n   * - `{ total: 'Total' }` => Total 会被当作 `total`\r\n   */\r\n  @Input()\r\n  set resReName(cur: ResReNameType) {\r\n    let ret: ResReNameType = {};\r\n    if (cur) {\r\n      if (cur.list)\r\n        ret.list = Array.isArray(cur.list) ? cur.list : cur.list.split('.');\r\n      else ret.list = ['list'];\r\n\r\n      if (cur.total)\r\n        ret.total = Array.isArray(cur.total) ? cur.total : cur.total.split('.');\r\n      else ret.total = ['total'];\r\n    } else {\r\n      ret = { total: ['total'], list: ['list'] };\r\n    }\r\n    this._resReName = ret;\r\n  }\r\n  get resReName() {\r\n    return this._resReName;\r\n  }\r\n  private _resReName: ResReNameType = { total: ['total'], list: ['list'] };\r\n  /** 列描述  */\r\n  @Input() columns: SimpleTableColumn[] = [];\r\n  /** 每页数量，当设置为 `0` 表示不分页，默认：`10` */\r\n  @Input()\r\n  get ps() {\r\n    return this._ps;\r\n  }\r\n  set ps(value: any) {\r\n    this._ps = coerceNumberProperty(value);\r\n  }\r\n  private _ps = 10;\r\n  /** 当前页码 */\r\n  @Input()\r\n  get pi() {\r\n    return this._pi;\r\n  }\r\n  set pi(value: any) {\r\n    this._pi = coerceNumberProperty(value);\r\n  }\r\n  private _pi = 1;\r\n  /** 数据总量 */\r\n  @Input()\r\n  get total() {\r\n    return this._total;\r\n  }\r\n  set total(value: any) {\r\n    this._total = coerceNumberProperty(value);\r\n  }\r\n  private _total = 0;\r\n  /** 是否显示分页器 */\r\n  @Input()\r\n  get showPagination() {\r\n    return this._showPagination;\r\n  }\r\n  set showPagination(value: any) {\r\n    this._showPagination = coerceBooleanProperty(value);\r\n  }\r\n  private _showPagination: boolean;\r\n  /** 是否显示Loading */\r\n  @Input()\r\n  get loading() {\r\n    return this._loading;\r\n  }\r\n  set loading(value: any) {\r\n    this._loading = coerceBooleanProperty(value);\r\n  }\r\n  private _loading = false;\r\n  /** 延迟显示加载效果的时间（防止闪烁） */\r\n  @Input()\r\n  get loadingDelay() {\r\n    return this._loadingDelay;\r\n  }\r\n  set loadingDelay(value: any) {\r\n    this._loadingDelay = coerceNumberProperty(value);\r\n  }\r\n  private _loadingDelay = 0;\r\n  /** 是否显示边框 */\r\n  @Input()\r\n  get bordered() {\r\n    return this._bordered;\r\n  }\r\n  set bordered(value: any) {\r\n    this._bordered = coerceBooleanProperty(value);\r\n  }\r\n  private _bordered = false;\r\n  /** table大小 */\r\n  @Input() size: 'small' | 'middle' | 'default' = 'default';\r\n  /** 纵向支持滚动，也可用于指定滚动区域的高度：`{ y: '300px', x: '300px' }` */\r\n  @Input() scroll: { y: string; x: string };\r\n  /** 是否显示pagination中改变页数 */\r\n  @Input()\r\n  get showSizeChanger() {\r\n    return this._showSizeChanger;\r\n  }\r\n  set showSizeChanger(value: any) {\r\n    this._showSizeChanger = coerceBooleanProperty(value);\r\n  }\r\n  private _showSizeChanger = false;\r\n  /** pagination中每页显示条目数下拉框值 */\r\n  @Input() pageSizeOptions: number[];\r\n  /** 是否显示pagination中快速跳转 */\r\n  @Input()\r\n  get showQuickJumper() {\r\n    return this._showQuickJumper;\r\n  }\r\n  set showQuickJumper(value: any) {\r\n    this._showQuickJumper = coerceBooleanProperty(value);\r\n  }\r\n  private _showQuickJumper = false;\r\n  /** 是否显示总数据量 */\r\n  private _totalTpl = ``;\r\n  @Input()\r\n  set showTotal(value: any) {\r\n    if (typeof value === 'string' && value.length) {\r\n      this._totalTpl = value;\r\n    } else if (coerceBooleanProperty(value)) {\r\n      this._totalTpl = `共 {{total}} 条`;\r\n    } else {\r\n      this._totalTpl = '';\r\n    }\r\n  }\r\n  renderTotal(total: string, range: string[]) {\r\n    return this._totalTpl\r\n      ? this._totalTpl\r\n          .replace('{{total}}', total)\r\n          .replace('{{range[0]}}', range[0])\r\n          .replace('{{range[1]}}', range[1])\r\n      : '';\r\n  }\r\n  /** 数据变更后是否保留在数据变更前的页码 */\r\n  @Input()\r\n  get isPageIndexReset() {\r\n    return this._isPageIndexReset;\r\n  }\r\n  set isPageIndexReset(value: any) {\r\n    this._isPageIndexReset = coerceBooleanProperty(value);\r\n  }\r\n  private _isPageIndexReset = true;\r\n  /** 分页方向 */\r\n  @Input() pagePlacement?: 'left' | 'center' | 'right' = 'right';\r\n  /** 切换分页时返回顶部 */\r\n  @Input()\r\n  get toTopInChange() {\r\n    return this._toTopInChange;\r\n  }\r\n  set toTopInChange(value: any) {\r\n    this._toTopInChange = coerceBooleanProperty(value);\r\n  }\r\n  private _toTopInChange = true;\r\n  /** 返回顶部偏移值 */\r\n  @Input()\r\n  get toTopOffset() {\r\n    return this._toTopOffset;\r\n  }\r\n  set toTopOffset(value: any) {\r\n    this._toTopOffset = coerceNumberProperty(value);\r\n  }\r\n  private _toTopOffset = 100;\r\n  /** 重命名排序值，`columns` 的重命名高于属性 */\r\n  @Input() sortReName: { ascend?: string; descend?: string };\r\n  /** 是否多排序，建议后端支持时使用，默认：`false` */\r\n  @Input()\r\n  get multiSort() {\r\n    return this._multiSort;\r\n  }\r\n  set multiSort(value: any) {\r\n    this._multiSort = coerceBooleanProperty(value);\r\n  }\r\n  private _multiSort = false;\r\n  /** 数据处理前回调 */\r\n  @Input() preDataChange: (data: SimpleTableData[]) => SimpleTableData[];\r\n  /** `header` 标题 */\r\n  @ContentChild('header') header: TemplateRef<void>;\r\n  /** 额外 `body` 内容 */\r\n  @ContentChild('body') body: TemplateRef<void>;\r\n  /** `footer` 底部 */\r\n  @ContentChild('footer') footer: TemplateRef<void>;\r\n  /** `expand` 可展开，当数据源中包括 `expand` 表示展开状态 */\r\n  @ContentChild('expand')\r\n  expand: TemplateRef<{ $implicit: any; column: SimpleTableColumn }>;\r\n  @Input() noResult: string | TemplateRef<void>;\r\n  @Input() widthConfig: string[];\r\n  /** 页码、每页数量变化时回调 */\r\n  @Output()\r\n  change: EventEmitter<SimpleTableChange> = new EventEmitter<\r\n    SimpleTableChange\r\n  >();\r\n  /** checkbox变化时回调，参数为当前所选清单 */\r\n  @Output()\r\n  checkboxChange: EventEmitter<SimpleTableData[]> = new EventEmitter<\r\n    SimpleTableData[]\r\n  >();\r\n  /** radio变化时回调，参数为当前所选 */\r\n  @Output()\r\n  radioChange: EventEmitter<SimpleTableData> = new EventEmitter<\r\n    SimpleTableData\r\n  >();\r\n  /** 排序回调 */\r\n  @Output() sortChange: EventEmitter<any> = new EventEmitter<any>();\r\n  /** Filter回调 */\r\n  @Output()\r\n  filterChange: EventEmitter<SimpleTableColumn> = new EventEmitter<\r\n    SimpleTableColumn\r\n  >();\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    private defConfig: AdSimpleTableConfig,\r\n    private http: HttpClient,\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    private exportSrv: SimpleTableExport,\r\n    @Optional() private acl: ACLService,\r\n    @Optional()\r\n    @Inject(ALAIN_I18N_TOKEN)\r\n    private i18nSrv: AlainI18NService,\r\n    private modal: ModalHelper,\r\n    private currenty: CNCurrencyPipe,\r\n    private date: DatePipe,\r\n    private yn: YNPipe,\r\n    private number: DecimalPipe,\r\n    @Inject(DOCUMENT) private doc: any,\r\n  ) {\r\n    Object.assign(this, deepCopy(defConfig));\r\n  }\r\n\r\n  // region: data\r\n\r\n  private getAjaxData(url?: string): Observable<any> {\r\n    const params: any = Object.assign(\r\n      {\r\n        [this.reqReName.pi]: this.pi,\r\n        [this.reqReName.ps]: this.ps,\r\n      },\r\n      this.extraParams,\r\n      this.getReqSortMap(),\r\n      this.getReqFilterMap(),\r\n    );\r\n    return this.http\r\n      .request(this.reqMehtod || 'GET', url || this._url, {\r\n        params,\r\n        body: this.reqBody,\r\n        headers: this.reqHeaders,\r\n      })\r\n      .pipe(\r\n        map((res: any) => {\r\n          // list\r\n          const ret = deepGet(res, this.resReName.list as string[], []);\r\n          if (ret == null || !Array.isArray(ret)) return [];\r\n          // total\r\n          const retTotal =\r\n            this.resReName.total &&\r\n            deepGet(res, this.resReName.total as string[], null);\r\n          this.total = retTotal == null ? this.total || 0 : +retTotal;\r\n          return <any[]>ret;\r\n        }),\r\n      );\r\n  }\r\n\r\n  /**\r\n   * 根据页码重新加载数据\r\n   *\r\n   * @param pi 指定当前页码，默认：`1`\r\n   * @param extraParams 重新指定 `extraParams` 值\r\n   */\r\n  load(pi = 1, extraParams?: any) {\r\n    if (pi !== -1) this.pi = pi;\r\n    this.extraParams = extraParams || null;\r\n    this._change('pi');\r\n  }\r\n\r\n  /**\r\n   * 重新刷新当前页\r\n   * @param extraParams 重新指定 `extraParams` 值\r\n   */\r\n  reload(extraParams?: any) {\r\n    this.load(-1, extraParams);\r\n  }\r\n\r\n  /**\r\n   * 重置且重新设置 `pi` 为 `1`\r\n   *\r\n   * @param extraParams 重新指定 `extraParams` 值\r\n   */\r\n  reset(extraParams?: any) {\r\n    this.load(1, extraParams);\r\n  }\r\n\r\n  _change(type: 'pi' | 'ps') {\r\n    if (!this._inited) return ;\r\n    this._genAjax();\r\n    this._genData();\r\n    this._toTop();\r\n    this.change.emit({\r\n      type: type,\r\n      pi: this.pi,\r\n      ps: this.ps,\r\n      total: this.total,\r\n    });\r\n  }\r\n\r\n  _genAjax(forceRefresh: boolean = false) {\r\n    if (!this._isAjax) return;\r\n    this.loading = true;\r\n    if (forceRefresh === true) this.pi = 1;\r\n    this.getAjaxData().subscribe(\r\n      (res: any) => this._subscribeData(res),\r\n      err => {\r\n        this.loading = false;\r\n        this.reqError.emit(err);\r\n      },\r\n    );\r\n  }\r\n\r\n  _genData(forceRefresh: boolean = false) {\r\n    if (this._isAjax) return;\r\n    let data = <any[]>this.data || [];\r\n    // sort\r\n    data = data.slice(0);\r\n    const sorterFn = this.getSorterFn();\r\n    if (sorterFn) {\r\n      data = this.recursiveSort(data, sorterFn);\r\n    }\r\n\r\n    // filter\r\n    this._columns.filter(w => w.filters && w.filters.length).forEach(c => {\r\n      const values = c.filters.filter(w => w.checked);\r\n      if (values.length === 0) return;\r\n      const onFilter = c.filter;\r\n      data = data.filter(record => {\r\n        return values.some(v => onFilter(v, record));\r\n      });\r\n    });\r\n\r\n    if (forceRefresh) {\r\n      if (this.isPageIndexReset) {\r\n        this.pi = 1;\r\n      } else {\r\n        const maxPageIndex = Math.ceil(data.length / this.ps);\r\n        this.pi = !this.pi\r\n          ? 1\r\n          : this.pi > maxPageIndex\r\n            ? maxPageIndex\r\n            : this.pi;\r\n      }\r\n    }\r\n    this.total = data.length;\r\n    this._isPagination =\r\n      typeof this.showPagination === 'undefined'\r\n        ? this.ps > 0 && this.total > this.ps\r\n        : this.showPagination;\r\n    this._subscribeData(\r\n      this._isPagination\r\n        ? data.slice((this.pi - 1) * this.ps, this.pi * this.ps)\r\n        : data,\r\n    );\r\n  }\r\n\r\n  _toTop() {\r\n    if (!this.toTopInChange) return;\r\n    if (this.scroll) {\r\n      (this.el.nativeElement as HTMLElement)\r\n        .querySelector('.ant-table-body')\r\n        .scrollTo(0, 0);\r\n      return;\r\n    }\r\n    if (this.el.nativeElement.scrollIntoView)\r\n      this.el.nativeElement.scrollIntoView();\r\n    // todo: toTopOffset\r\n    // fix header height\r\n    this.doc.documentElement.scrollTop -= this.toTopOffset;\r\n  }\r\n\r\n  _get(item: any, col: SimpleTableColumn) {\r\n    if (col.format) return col.format(item, col);\r\n\r\n    const value = deepGet(item, col.index as string[], col.default);\r\n    if (typeof value === 'undefined') return col.default;\r\n\r\n    let ret = value;\r\n    switch (col.type) {\r\n      case 'img':\r\n        ret = `<img src=\"${value}\" class=\"img\">`;\r\n        break;\r\n      case 'number':\r\n        ret = this.number.transform(value, col.numberDigits);\r\n        break;\r\n      case 'currency':\r\n        ret = this.currenty.transform(value);\r\n        break;\r\n      case 'date':\r\n        ret = this.date.transform(value, col.dateFormat);\r\n        break;\r\n      case 'yn':\r\n        ret = this.yn.transform(value === col.ynTruth, col.ynYes, col.ynNo);\r\n        break;\r\n    }\r\n    return ret || col.default;\r\n  }\r\n\r\n  _click(e: Event, item: any, col: SimpleTableColumn) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (col.click) col.click(item, this);\r\n    return false;\r\n  }\r\n\r\n  private getDataObs(urlOrData?: string | any[]): Observable<any[]> {\r\n    return urlOrData || Array.isArray(this.data)\r\n      ? of((urlOrData as any[]) || (this.data as any[]))\r\n      : (this.data as Observable<any[]>);\r\n  }\r\n\r\n  private processData() {\r\n    if (!this.data) {\r\n      this._isAjax = false;\r\n      this.data = [];\r\n      return;\r\n    }\r\n\r\n    this._isAjax = false;\r\n    if (typeof this.data === 'string') {\r\n      this._url = this.data as string;\r\n      this._isAjax = true;\r\n      this._genAjax(true);\r\n    } else if (Array.isArray(this.data)) {\r\n      this._genData(true);\r\n    } else {\r\n      if (!this.data$) {\r\n        this.data$ = <any>this.data\r\n          .pipe(tap(() => (this.loading = true)))\r\n          .subscribe(res => {\r\n            this.data = res;\r\n            this._genData(true);\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  private _subscribeData(res: any[]) {\r\n    if (this.preDataChange) res = this.preDataChange(res);\r\n    this.loading = false;\r\n    this._data = res;\r\n    this._refCheck();\r\n  }\r\n\r\n  // endregion\r\n\r\n  // region: sort\r\n\r\n  _sortMap: { [key: number]: any } = {};\r\n  _sortColumn: SimpleTableColumn = null;\r\n  _sortOrder: string;\r\n  _sortIndex: number;\r\n\r\n  private getReqSortMap(): { [key: string]: string } {\r\n    const ret: { [key: string]: string } = {};\r\n    if (!this._sortOrder) return ret;\r\n\r\n    if (this.multiSort) {\r\n      Object.keys(this._sortMap).forEach(key => {\r\n        const item = this._sortMap[key];\r\n        if (item.v) {\r\n          ret[item.key] =\r\n            (item.column.sortReName || this.sortReName || {})[item.v] || item.v;\r\n        }\r\n      });\r\n    } else {\r\n      const mapData = this._sortMap[this._sortIndex];\r\n      ret[mapData.key] =\r\n        (this._sortColumn.sortReName || this.sortReName || {})[mapData.v] ||\r\n        mapData.v;\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  private recursiveSort(\r\n    data: any[],\r\n    sorterFn: (a: any, b: any) => number,\r\n  ): any[] {\r\n    const childrenColumnName = 'children';\r\n    return data.sort(sorterFn).map(\r\n      (item: any) =>\r\n        item[childrenColumnName]\r\n          ? {\r\n              ...item,\r\n              [childrenColumnName]: this.recursiveSort(\r\n                item[childrenColumnName],\r\n                sorterFn,\r\n              ),\r\n            }\r\n          : item,\r\n    );\r\n  }\r\n\r\n  private getSorterFn() {\r\n    // _sortMap\r\n    if (\r\n      !this._sortOrder ||\r\n      !this._sortColumn ||\r\n      typeof this._sortColumn.sorter !== 'function'\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    return (a: any, b: any) => {\r\n      const result = (this._sortColumn!.sorter as CompareFn)(a, b);\r\n      if (result !== 0) {\r\n        return this._sortOrder === 'descend' ? -result : result;\r\n      }\r\n      return 0;\r\n    };\r\n  }\r\n\r\n  sort(index: number, value: any) {\r\n    if (this._sortIndex === index && this._sortOrder === value) return;\r\n    this._sortColumn = this._columns[index];\r\n    this._sortOrder = value;\r\n    this._sortIndex = index;\r\n    if (this.multiSort) {\r\n      this._sortMap[index].v = value;\r\n    } else {\r\n      Object.keys(this._sortMap).forEach(\r\n        key => (this._sortMap[key].v = +key === index ? value : null),\r\n      );\r\n    }\r\n    this._genAjax(true);\r\n    this._genData(true);\r\n    this.sortChange.emit({\r\n      value,\r\n      map: this.getReqSortMap(),\r\n      column: this._sortColumn,\r\n    });\r\n  }\r\n\r\n  // endregion\r\n\r\n  // region: filter\r\n\r\n  private getReqFilterMap(): { [key: string]: string } {\r\n    let ret: { [key: string]: string } = {};\r\n    this._columns.filter(w => w.filtered === true).forEach(col => {\r\n      const values = col.filters.filter(f => f.checked === true);\r\n      let obj: Object = {};\r\n      if (col.filterReName) obj = col.filterReName(col.filters, col);\r\n      else\r\n        obj[col.filterKey || col.indexKey] = values.map(i => i.value).join(',');\r\n\r\n      ret = Object.assign(ret, obj);\r\n    });\r\n    return ret;\r\n  }\r\n\r\n  private handleFilter(col: SimpleTableColumn) {\r\n    col.filtered = col.filters.findIndex(w => w.checked) !== -1;\r\n    this._genAjax(true);\r\n    this._genData(true);\r\n    this.filterChange.emit(col);\r\n  }\r\n\r\n  filterConfirm(col: SimpleTableColumn) {\r\n    this.handleFilter(col);\r\n  }\r\n\r\n  filterClear(col: SimpleTableColumn) {\r\n    col.filters.forEach(i => (i.checked = false));\r\n    this.handleFilter(col);\r\n  }\r\n\r\n  filterRadio(\r\n    col: SimpleTableColumn,\r\n    item: SimpleTableFilter,\r\n    checked: boolean,\r\n  ) {\r\n    col.filters.forEach(i => (i.checked = false));\r\n    item.checked = checked;\r\n  }\r\n\r\n  // endregion\r\n\r\n  // region: checkbox\r\n\r\n  /** 清除所有 `checkbox` */\r\n  clearCheck(): this {\r\n    return this._checkAll(false);\r\n  }\r\n\r\n  _checkAll(checked?: boolean): this {\r\n    checked = typeof checked === 'undefined' ? this._allChecked : checked;\r\n    this._data.filter(w => !w.disabled).forEach(i => (i.checked = checked));\r\n    return this._refCheck()._checkNotify();\r\n  }\r\n\r\n  _checkSelection(i: SimpleTableData, value: boolean) {\r\n    i.checked = value;\r\n    return this._refCheck()._checkNotify();\r\n  }\r\n\r\n  _refCheck(): this {\r\n    const validData = this._data.filter(w => !w.disabled);\r\n    const checkedList = validData.filter(w => w.checked === true);\r\n    this._allChecked =\r\n      checkedList.length > 0 && checkedList.length === validData.length;\r\n    const allUnChecked = validData.every(value => !value.checked);\r\n    this._indeterminate = !this._allChecked && !allUnChecked;\r\n    return this;\r\n  }\r\n\r\n  _rowSelection(row: SimpleTableSelection): this {\r\n    if (row.select) row.select(this._data);\r\n    return this._refCheck()._checkNotify();\r\n  }\r\n\r\n  _checkNotify(): this {\r\n    this.checkboxChange.emit(\r\n      this._data.filter(w => !w.disabled && w.checked === true),\r\n    );\r\n    return this;\r\n  }\r\n\r\n  // endregion\r\n\r\n  // region: radio\r\n\r\n  /** 清除所有 `radio` */\r\n  clearRadio(): this {\r\n    this._data.filter(w => w.checked).forEach(item => (item.checked = false));\r\n    this.radioChange.emit(null);\r\n    return this;\r\n  }\r\n\r\n  _refRadio(idx: number, checked: boolean, item: SimpleTableData): this {\r\n    if (item.disabled === true) return;\r\n    this._data.filter(w => !w.disabled).forEach(i => (i.checked = false));\r\n    item.checked = checked;\r\n    this.radioChange.emit(item);\r\n    return this;\r\n  }\r\n\r\n  // endregion\r\n\r\n  // region: buttons\r\n\r\n  btnCoerceIf(list: SimpleTableButton[]) {\r\n    for (const item of list) {\r\n      if (!item.if) item.if = () => true;\r\n      if (!item.children) item.children = [];\r\n      if (item.children.length > 0) this.btnCoerceIf(item.children);\r\n    }\r\n  }\r\n\r\n  btnClick(record: any, btn: SimpleTableButton) {\r\n    if (btn.type === 'modal' || btn.type === 'static') {\r\n      const obj = {};\r\n      obj[btn.paramName || this.defConfig.modalParamsName || 'record'] = record;\r\n      (this.modal[btn.type === 'modal' ? 'open' : 'static'] as any)(\r\n        btn.component,\r\n        Object.assign(obj, btn.params && btn.params(record)),\r\n        btn.size,\r\n        btn.modalOptions,\r\n      )\r\n        .pipe(filter(w => typeof w !== 'undefined'))\r\n        .subscribe(res => {\r\n          if (btn.click) this.btnCallback(record, btn, res);\r\n        });\r\n      return;\r\n    }\r\n    this.btnCallback(record, btn);\r\n  }\r\n\r\n  private btnCallback(record: any, btn: SimpleTableButton, modal?: any) {\r\n    if (!btn.click) return;\r\n    if (typeof btn.click === 'string') {\r\n      switch (btn.click) {\r\n        case 'load':\r\n          this.load();\r\n          break;\r\n        case 'reload':\r\n          this.reload();\r\n          break;\r\n      }\r\n    } else {\r\n      btn.click(record, modal, this);\r\n    }\r\n  }\r\n\r\n  btnText(record: any, btn: SimpleTableButton) {\r\n    if (btn.format) return btn.format(record, btn);\r\n    return btn.text;\r\n  }\r\n\r\n  // endregion\r\n\r\n  // region: fixed\r\n\r\n  fixedCoerce(list: SimpleTableColumn[]) {\r\n    list.forEach((item, idx) => {\r\n      if (item.fixed && item.width) {\r\n        if (item.fixed === 'left') {\r\n          item._left = idx === 0 ? '0px' : list[idx - 1].width;\r\n        } else if (item.fixed === 'right') {\r\n          item._right = idx === list.length - 1 ? '0px' : list[idx + 1].width;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // endregion\r\n\r\n  // region: export\r\n\r\n  /**\r\n   * 导出Excel，确保已经注册 `AdXlsxModule`\r\n   * @param urlOrData 重新指定数据，例如希望导出所有数据非常有用\r\n   * @param opt 额外参数\r\n   */\r\n  export(urlOrData?: string | any[], opt?: STExportOptions) {\r\n    ((!urlOrData && this._isAjax) ||\r\n    (urlOrData && typeof urlOrData === 'string')\r\n      ? this.getAjaxData(urlOrData as string)\r\n      : this.getDataObs(urlOrData)\r\n    ).subscribe((res: any[]) =>\r\n      this.exportSrv.export(\r\n        Object.assign({}, opt, <STExportOptions>{\r\n          _d: res,\r\n          _c: this._columns,\r\n        }),\r\n      ),\r\n    );\r\n  }\r\n\r\n  // endregion\r\n\r\n  ngOnInit(): void {\r\n    this._inited = true;\r\n    this.updateColumns();\r\n    this.processData();\r\n  }\r\n\r\n  private setClass() {\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.removeClass(this.el.nativeElement, cls),\r\n    );\r\n\r\n    this._classMap = [];\r\n    if (this.pagePlacement)\r\n      this._classMap.push('ad-st__p' + this.pagePlacement);\r\n\r\n    this._classMap.forEach(cls =>\r\n      this.renderer.addClass(this.el.nativeElement, cls),\r\n    );\r\n  }\r\n\r\n  private updateColumns() {\r\n    this._columns = [];\r\n    if (!this.columns || this.columns.length === 0)\r\n      throw new Error(`the columns property muse be define!`);\r\n    let checkboxCount = 0;\r\n    let radioCount = 0;\r\n    const sortMap: Object = {};\r\n    let idx = 0;\r\n    const newColumns: SimpleTableColumn[] = [];\r\n    const copyColumens = deepCopy(this.columns);\r\n    for (const item of copyColumens) {\r\n      if (this.acl && item.acl && !this.acl.can(item.acl)) continue;\r\n      if (item.index) {\r\n        if (!Array.isArray(item.index)) item.index = item.index.split('.');\r\n\r\n        item.indexKey = item.index.join('.');\r\n      }\r\n      // rowSelection\r\n      if (!item.selections) item.selections = [];\r\n      if (item.type === 'checkbox') {\r\n        ++checkboxCount;\r\n        if (!item.width)\r\n          item.width = `${item.selections.length > 0 ? 60 : 50}px`;\r\n      }\r\n      if (item.type === 'radio') {\r\n        ++radioCount;\r\n        item.selections = [];\r\n        if (!item.width) item.width = '50px';\r\n      }\r\n      if (!item.className) {\r\n        item.className = {\r\n          // 'checkbox': 'text-center',\r\n          // 'radio': 'text-center',\r\n          number: 'text-right',\r\n          currency: 'text-right',\r\n          date: 'text-center',\r\n        }[item.type];\r\n      }\r\n      if (item.type === 'yn' && typeof item.ynTruth === 'undefined')\r\n        item.ynTruth = true;\r\n\r\n      // sorter\r\n      if (item.sorter) {\r\n        sortMap[idx] = {\r\n          enabled: true,\r\n          v: item.sort,\r\n          key: item.sortKey || item.indexKey,\r\n          column: item,\r\n        };\r\n        if (item.sort && !this._sortColumn) {\r\n          this._sortColumn = item;\r\n          this._sortOrder = item.sort;\r\n          this._sortIndex = idx;\r\n        }\r\n      } else {\r\n        sortMap[idx] = {\r\n          enabled: false,\r\n        };\r\n      }\r\n      // filter\r\n      if (!item.filter || !item.filters) item.filters = [];\r\n      if (typeof item.filterMultiple === 'undefined')\r\n        item.filterMultiple = true;\r\n      if (!item.filterConfirmText) item.filterConfirmText = `确认`;\r\n      if (!item.filterClearText) item.filterClearText = `重置`;\r\n      if (!item.filterIcon) item.filterIcon = `anticon anticon-filter`;\r\n      item.filtered = item.filters.findIndex(w => w.checked) !== -1;\r\n\r\n      if (this.acl) {\r\n        item.selections = item.selections.filter(\r\n          w => !w.acl || this.acl.can(w.acl),\r\n        );\r\n        item.filters = item.filters.filter(w => !w.acl || this.acl.can(w.acl));\r\n      }\r\n\r\n      // buttons\r\n      const buttons: SimpleTableButton[] = [];\r\n      if (item.buttons) {\r\n        for (const btn of item.buttons) {\r\n          if (this.acl && btn.acl && !this.acl.can(btn.acl)) continue;\r\n\r\n          if (btn.type === 'del' && typeof btn.pop === 'undefined')\r\n            btn.pop = true;\r\n\r\n          if (btn.pop === true) {\r\n            btn._type = 2;\r\n            if (typeof btn.popTitle === 'undefined')\r\n              btn.popTitle = `确认删除吗？`;\r\n          }\r\n          if (btn.children && btn.children.length > 0) {\r\n            btn._type = 3;\r\n          }\r\n          if (!btn._type) btn._type = 1;\r\n\r\n          // i18n\r\n          if (btn.i18n && this.i18nSrv) btn.text = this.i18nSrv.fanyi(btn.i18n);\r\n\r\n          buttons.push(btn);\r\n        }\r\n        if (buttons.length === 0) continue;\r\n        this.btnCoerceIf(buttons);\r\n      }\r\n      item.buttons = buttons;\r\n      // i18n\r\n      if (item.i18n && this.i18nSrv) item.title = this.i18nSrv.fanyi(item.i18n);\r\n      ++idx;\r\n      newColumns.push(item);\r\n    }\r\n    this.fixedCoerce(newColumns);\r\n    this._columns = newColumns;\r\n    if (checkboxCount > 1) throw new Error(`just only one column checkbox`);\r\n    if (radioCount > 1) throw new Error(`just only one column radio`);\r\n    this._sortMap = sortMap;\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (changes.columns && this._inited) this.updateColumns();\r\n    if (changes.data && this._inited) this.processData();\r\n\r\n    this.setClass();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.data$) {\r\n      this.data$.unsubscribe();\r\n      this.data$ = null;\r\n    }\r\n  }\r\n}\r\n","import { Directive, Input, TemplateRef, OnInit } from '@angular/core';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\nimport { SimpleTableComponent } from './simple-table.component';\r\n\r\n@Directive({\r\n  selector: '[st-row]',\r\n})\r\nexport class SimpleTableRowDirective implements OnInit {\r\n  @Input('st-row') id: string;\r\n\r\n  @Input() type: 'title';\r\n\r\n  constructor(\r\n    public templateRef: TemplateRef<any>,\r\n    private table: SimpleTableComponent,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    const col = this.table._columns.find(w => w.render === this.id);\r\n    if (!col) return;\r\n    switch (this.type) {\r\n      case 'title':\r\n        col.__renderTitle = this.templateRef;\r\n        break;\r\n      default:\r\n        col.__render = this.templateRef;\r\n        break;\r\n    }\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders, NO_ERRORS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { SimpleTableComponent } from './simple-table.component';\nimport { SimpleTableRowDirective } from './simple-table-row.directive';\nimport { AdSimpleTableConfig } from './simple-table.config';\n\nconst COMPONENTS = [SimpleTableComponent, SimpleTableRowDirective];\n\n// region: zorro modules\n\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\n\nconst ZORROMODULES = [NgZorroAntdModule];\n\n// endregion\n\n@NgModule({\n  schemas: [NO_ERRORS_SCHEMA],\n  imports: [CommonModule, FormsModule, DelonUtilModule, ...ZORROMODULES],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS],\n})\nexport class AdSimpleTableModule {\n  static forRoot(): ModuleWithProviders {\n    return { ngModule: AdSimpleTableModule, providers: [AdSimpleTableConfig] };\n  }\n}\n","import {\r\n  Injectable,\r\n  OnDestroy,\r\n  Optional,\r\n  Injector,\r\n  Inject,\r\n} from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  DetachedRouteHandle,\r\n  ActivatedRoute,\r\n} from '@angular/router';\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { filter } from 'rxjs/operators';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport { MenuService, ALAIN_I18N_TOKEN, AlainI18NService } from '@delon/theme';\r\n\r\nimport {\r\n  ReuseTabCached,\r\n  ReuseTabMatchMode,\r\n  ReuseTabNotify,\r\n  ReuseTitle,\r\n} from './interface';\r\n\r\n/**\r\n * 路由复用类，提供复用所需要一些基本接口\r\n *\r\n * **注：** 所有缓存数据来源于路由离开后才会产生\r\n */\r\n@Injectable()\r\nexport class ReuseTabService implements OnDestroy {\r\n  private _max = 10;\r\n  private _debug = false;\r\n  private _mode = ReuseTabMatchMode.Menu;\r\n  private _excludes: RegExp[] = [];\r\n  private _cachedChange: BehaviorSubject<ReuseTabNotify> = new BehaviorSubject<\r\n    ReuseTabNotify\r\n  >(null);\r\n  private _cached: ReuseTabCached[] = [];\r\n  private _titleCached: { [url: string]: ReuseTitle } = {};\r\n  private _closableCached: { [url: string]: boolean } = {};\r\n  private removeUrlBuffer: string;\r\n\r\n  // region: public\r\n\r\n  /** 允许最多复用多少个页面，取值范围 `2-100` */\r\n  set max(value: number) {\r\n    this._max = Math.min(Math.max(value, 2), 100);\r\n    for (let i = this._cached.length; i > this._max; i--) {\r\n      this._cached.pop();\r\n    }\r\n  }\r\n  /** 设置匹配模式 */\r\n  set mode(value: ReuseTabMatchMode) {\r\n    this._mode = value;\r\n  }\r\n  get mode() {\r\n    return this._mode;\r\n  }\r\n  /** 设置Debug模式 */\r\n  set debug(value: boolean) {\r\n    this._debug = value;\r\n  }\r\n  get debug() {\r\n    return this._debug;\r\n  }\r\n  /** 排除规则，限 `mode=URL` */\r\n  set excludes(values: RegExp[]) {\r\n    if (!values) return;\r\n    this._excludes = values;\r\n  }\r\n  get excludes() {\r\n    return this._excludes;\r\n  }\r\n  /** 获取已缓存的路由 */\r\n  get items(): ReuseTabCached[] {\r\n    return this._cached;\r\n  }\r\n  /** 获取当前缓存的路由总数 */\r\n  get count() {\r\n    return this._cached.length;\r\n  }\r\n  /** 订阅缓存变更通知 */\r\n  get change(): Observable<ReuseTabNotify> {\r\n    return this._cachedChange.asObservable(); // .pipe(filter(w => w !== null));\r\n  }\r\n  /** 自定义当前标题 */\r\n  set title(value: string | ReuseTitle) {\r\n    const curUrl = this.getUrl(this.injector.get(ActivatedRoute).snapshot);\r\n    if (typeof value === 'string') value = { text: value };\r\n    this._titleCached[curUrl] = value;\r\n    this.di('update current tag title: ', value);\r\n    this._cachedChange.next({\r\n      active: 'title',\r\n      title: value,\r\n      list: this._cached,\r\n    });\r\n  }\r\n  /** 获取指定路径缓存所在位置，`-1` 表示无缓存 */\r\n  index(url: string): number {\r\n    return this._cached.findIndex(w => w.url === url);\r\n  }\r\n  /** 获取指定路径缓存是否存在 */\r\n  exists(url: string): boolean {\r\n    return this.index(url) !== -1;\r\n  }\r\n  /** 获取指定路径缓存 */\r\n  get(url: string): ReuseTabCached {\r\n    return url ? this._cached.find(w => w.url === url) || null : null;\r\n  }\r\n  private remove(url: string | number, includeNonCloseable: boolean): boolean {\r\n    const idx = typeof url === 'string' ? this.index(url) : url;\r\n    const item = idx !== -1 ? this._cached[idx] : null;\r\n    if (!item || (!includeNonCloseable && !item.closable)) return false;\r\n\r\n    this.destroy(item._handle);\r\n\r\n    this._cached.splice(idx, 1);\r\n    delete this._titleCached[url];\r\n    return true;\r\n  }\r\n  /**\r\n   * 根据URL移除标签\r\n   *\r\n   * @param [includeNonCloseable=false] 是否强制包含不可关闭\r\n   */\r\n  close(url: string, includeNonCloseable = false) {\r\n    this.removeUrlBuffer = url;\r\n\r\n    this.remove(url, includeNonCloseable);\r\n\r\n    this._cachedChange.next({ active: 'close', url, list: this._cached });\r\n\r\n    this.di('close tag', url);\r\n    return true;\r\n  }\r\n  /**\r\n   * 清除右边\r\n   *\r\n   * @param [includeNonCloseable=false] 是否强制包含不可关闭\r\n   */\r\n  closeRight(url: string, includeNonCloseable = false) {\r\n    const start = this.index(url);\r\n    for (let i = this.count - 1; i > start; i--) {\r\n      this.remove(i, includeNonCloseable);\r\n    }\r\n\r\n    this.removeUrlBuffer = null;\r\n\r\n    this._cachedChange.next({ active: 'closeRight', url, list: this._cached });\r\n\r\n    this.di('close right tages', url);\r\n    return true;\r\n  }\r\n  /**\r\n   * 清除所有缓存\r\n   *\r\n   * @param [includeNonCloseable=false] 是否强制包含不可关闭\r\n   */\r\n  clear(includeNonCloseable = false) {\r\n    this._cached.forEach(w => {\r\n      if (!includeNonCloseable && w.closable) this.destroy(w._handle);\r\n    });\r\n    this._cached = this._cached.filter(\r\n      w => !includeNonCloseable && !w.closable,\r\n    );\r\n\r\n    this.removeUrlBuffer = null;\r\n\r\n    this._cachedChange.next({ active: 'clear', list: this._cached });\r\n\r\n    this.di('clear all catch');\r\n  }\r\n  /**\r\n   * 移动缓存数据\r\n   * @param url 要移动的URL地址\r\n   * @param position 新位置，下标从 `0` 开始\r\n   *\r\n   * @example\r\n   * ```\r\n   * // source\r\n   * [ '/a/1', '/a/2', '/a/3', '/a/4', '/a/5' ]\r\n   * move('/a/1', 2);\r\n   * // output\r\n   * [ '/a/2', '/a/3', '/a/1', '/a/4', '/a/5' ]\r\n   * move('/a/1', -1);\r\n   * // output\r\n   * [ '/a/2', '/a/3', '/a/4', '/a/5', '/a/1' ]\r\n   * ```\r\n   */\r\n  move(url: string, position: number) {\r\n    const start = this._cached.findIndex(w => w.url === url);\r\n    if (start === -1) return;\r\n    const data = this._cached.slice();\r\n    data.splice(\r\n      position < 0 ? data.length + position : position,\r\n      0,\r\n      data.splice(start, 1)[0],\r\n    );\r\n    this._cached = data;\r\n    this._cachedChange.next({\r\n      active: 'move',\r\n      url,\r\n      position,\r\n      list: this._cached,\r\n    });\r\n  }\r\n  /**\r\n   * 获取标题，顺序如下：\r\n   *\r\n   * 1. 组件内使用 `ReuseTabService.title = 'new title'` 重新指定文本\r\n   * 2. 路由配置中 data 属性中包含 titleI18n > title\r\n   * 3. 菜单数据中 text 属性\r\n   *\r\n   * @param url 指定URL\r\n   * @param route 指定路由快照\r\n   */\r\n  getTitle(url: string, route?: ActivatedRouteSnapshot): ReuseTitle {\r\n    if (this._titleCached[url]) return this._titleCached[url];\r\n\r\n    if (route && route.data && (route.data.titleI18n || route.data.title))\r\n      return <ReuseTitle>{ text: route.data.title, i18n: route.data.titleI18n };\r\n\r\n    const menu = this.mode !== ReuseTabMatchMode.URL ? this.getMenu(url) : null;\r\n    return menu ? { text: menu.text, i18n: menu.i18n } : { text: url };\r\n  }\r\n\r\n  /**\r\n   * 清除标题缓存\r\n   */\r\n  clearTitleCached() {\r\n    this._titleCached = {};\r\n  }\r\n  /** 自定义当前 `closable` 状态 */\r\n  set closable(value: boolean) {\r\n    const curUrl = this.getUrl(this.injector.get(ActivatedRoute).snapshot);\r\n    this._closableCached[curUrl] = value;\r\n    this.di('update current tag closable: ', value);\r\n    this._cachedChange.next({\r\n      active: 'closable',\r\n      closable: value,\r\n      list: this._cached,\r\n    });\r\n  }\r\n  /**\r\n   * 获取 `closable` 状态，顺序如下：\r\n   *\r\n   * 1. 组件内使用 `ReuseTabService.closable = true` 重新指定 `closable` 状态\r\n   * 2. 路由配置中 data 属性中包含 `reuseClosable`\r\n   * 3. 菜单数据中 `reuseClosable` 属性\r\n   *\r\n   * @param url 指定URL\r\n   * @param route 指定路由快照\r\n   */\r\n  getClosable(url: string, route?: ActivatedRouteSnapshot): boolean {\r\n    if (typeof this._closableCached[url] !== 'undefined')\r\n      return this._closableCached[url];\r\n\r\n    if (route && route.data && typeof route.data.reuseClosable === 'boolean')\r\n      return route.data.reuseClosable;\r\n\r\n    const menu = this.mode !== ReuseTabMatchMode.URL ? this.getMenu(url) : null;\r\n    if (menu && typeof menu.reuseClosable === 'boolean')\r\n      return menu.reuseClosable;\r\n\r\n    return true;\r\n  }\r\n  /**\r\n   * 清空 `closable` 缓存\r\n   */\r\n  clearClosableCached() {\r\n    this._closableCached = {};\r\n  }\r\n  getTruthRoute(route: ActivatedRouteSnapshot) {\r\n    let next = route;\r\n    while (next.firstChild) next = next.firstChild;\r\n    return next;\r\n  }\r\n  /**\r\n   * 根据快照获取URL地址\r\n   */\r\n  getUrl(route: ActivatedRouteSnapshot): string {\r\n    let next = this.getTruthRoute(route);\r\n    const segments = [];\r\n    while (next) {\r\n      segments.push(next.url.join('/'));\r\n      next = next.parent;\r\n    }\r\n    const url =\r\n      '/' +\r\n      segments\r\n        .filter(i => i)\r\n        .reverse()\r\n        .join('/');\r\n    return url;\r\n  }\r\n  /**\r\n   * 检查快照是否允许被复用\r\n   */\r\n  can(route: ActivatedRouteSnapshot): boolean {\r\n    const url = this.getUrl(route);\r\n    if (url === this.removeUrlBuffer) return false;\r\n\r\n    if (route.data && typeof route.data.reuse === 'boolean')\r\n      return route.data.reuse;\r\n\r\n    if (this.mode !== ReuseTabMatchMode.URL) {\r\n      const menu = this.getMenu(url);\r\n      if (!menu) return false;\r\n      if (this.mode === ReuseTabMatchMode.Menu) {\r\n        if (menu.reuse === false) return false;\r\n      } else {\r\n        if (!menu.reuse || menu.reuse !== true) return false;\r\n      }\r\n      return true;\r\n    }\r\n    return this._excludes.findIndex(r => r.test(url)) === -1;\r\n  }\r\n  /**\r\n   * 刷新，触发一个 refresh 类型事件\r\n   */\r\n  refresh(data?: any) {\r\n    this._cachedChange.next({ active: 'refresh', data });\r\n  }\r\n  // endregion\r\n\r\n  // region: privates\r\n\r\n  private destroy(_handle: any) {\r\n    if (_handle && _handle.componentRef && _handle.componentRef.destroy)\r\n      _handle.componentRef.destroy();\r\n  }\r\n\r\n  private di(...args) {\r\n    if (!this.debug) return;\r\n    // tslint:disable-next-line:no-console\r\n    console.warn(...args);\r\n  }\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    @Optional() private menuService: MenuService,\r\n  ) {}\r\n\r\n  private getMenu(url: string) {\r\n    const menus = this.menuService ? this.menuService.getPathByUrl(url) : [];\r\n    if (!menus || menus.length === 0) return null;\r\n    return menus.pop();\r\n  }\r\n\r\n  private runHook(method: string, url: string, comp: any) {\r\n    if (comp.instance && comp.instance.hasOwnProperty(method))\r\n      comp.instance[method]();\r\n  }\r\n\r\n  private hasInValidRoute(route: ActivatedRouteSnapshot) {\r\n    return (\r\n      !route.routeConfig ||\r\n      route.routeConfig.loadChildren ||\r\n      route.routeConfig.children\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 决定是否允许路由复用，若 `true` 会触发 `store`\r\n   */\r\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\r\n    if (this.hasInValidRoute(route)) return false;\r\n    this.di('#shouldDetach', this.can(route), this.getUrl(route));\r\n    return this.can(route);\r\n  }\r\n\r\n  /**\r\n   * 存储\r\n   */\r\n  store(_snapshot: ActivatedRouteSnapshot, _handle: any) {\r\n    if (this.count >= this._max) this._cached.shift();\r\n    const url = this.getUrl(_snapshot);\r\n    const idx = this.index(url);\r\n\r\n    const item: ReuseTabCached = {\r\n      title: this.getTitle(url, _snapshot),\r\n      closable: this.getClosable(url, _snapshot),\r\n      url,\r\n      _snapshot,\r\n      _handle,\r\n    };\r\n    if (idx === -1) {\r\n      this._cached.push(item);\r\n    } else {\r\n      this._cached[idx] = item;\r\n    }\r\n    this.removeUrlBuffer = null;\r\n\r\n    this.di('#store', idx === -1 ? '[new]' : '[override]', url);\r\n\r\n    if (_handle && _handle.componentRef) {\r\n      this.runHook('_onReuseDestroy', url, _handle.componentRef);\r\n    }\r\n\r\n    this._cachedChange.next({ active: 'add', item, list: this._cached });\r\n  }\r\n\r\n  /**\r\n   * 决定是否允许应用缓存数据\r\n   */\r\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\r\n    if (this.hasInValidRoute(route)) return false;\r\n    const url = this.getUrl(route);\r\n    const data = this.get(url);\r\n    const ret = !!(data && data._handle);\r\n    this.di('#shouldAttach', ret, url);\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * 提取复用数据\r\n   */\r\n  retrieve(route: ActivatedRouteSnapshot): {} {\r\n    if (this.hasInValidRoute(route)) return null;\r\n    const url = this.getUrl(route);\r\n    const data = this.get(url);\r\n    const ret = (data && data._handle) || null;\r\n    this.di('#retrieve', url, ret);\r\n    if (ret && ret.componentRef) {\r\n      this.runHook('_onReuseInit', url, ret.componentRef);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * 决定是否应该进行复用路由处理\r\n   */\r\n  shouldReuseRoute(\r\n    future: ActivatedRouteSnapshot,\r\n    curr: ActivatedRouteSnapshot,\r\n  ): boolean {\r\n    let ret = future.routeConfig === curr.routeConfig;\r\n    if (!ret) return false;\r\n\r\n    const path = ((future.routeConfig && future.routeConfig.path) ||\r\n      '') as string;\r\n    if (path.length > 0 && ~path.indexOf(':')) {\r\n      const futureUrl = this.getUrl(future);\r\n      const currUrl = this.getUrl(curr);\r\n      ret = futureUrl === currUrl;\r\n    }\r\n    this.di('=====================');\r\n    this.di(\r\n      '#shouldReuseRoute',\r\n      ret,\r\n      `${this.getUrl(curr)}=>${this.getUrl(future)}`,\r\n      future,\r\n      curr,\r\n    );\r\n    return ret;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._cached = [];\r\n    this._cachedChange.unsubscribe();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  EventEmitter,\r\n  Output,\r\n  HostListener,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport {\r\n  ReuseContextI18n,\r\n  ReuseContextCloseEvent,\r\n  ReuseItem,\r\n  CloseType,\r\n} from './interface';\r\n\r\n@Component({\r\n  selector: 'reuse-tab-context-menu',\r\n  template: `\r\n  <ul nz-menu>\r\n      <li nz-menu-item (click)=\"click($event, 'close')\" data-type=\"close\" [nzDisabled]=\"!item.closable\" [innerHTML]=\"i18n.close\"></li>\r\n      <li nz-menu-item (click)=\"click($event, 'closeOther')\" data-type=\"closeOther\" [innerHTML]=\"i18n.closeOther\"></li>\r\n      <li nz-menu-item (click)=\"click($event, 'closeRight')\" data-type=\"closeRight\" [nzDisabled]=\"item.last\" [innerHTML]=\"i18n.closeRight\"></li>\r\n      <li nz-menu-item (click)=\"click($event, 'clear')\" data-type=\"clear\" [innerHTML]=\"i18n.clear\"></li>\r\n  </ul>`,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class ReuseTabContextMenuComponent implements OnInit {\r\n  private _i18n: ReuseContextI18n;\r\n  @Input()\r\n  set i18n(value: ReuseContextI18n) {\r\n    this._i18n = Object.assign(\r\n      {\r\n        close: '关闭标签',\r\n        closeOther: '关闭其它标签',\r\n        closeRight: '关闭右侧标签',\r\n        clear: '清空',\r\n      },\r\n      value,\r\n    );\r\n  }\r\n  get i18n() {\r\n    return this._i18n;\r\n  }\r\n\r\n  @Input() item: ReuseItem;\r\n\r\n  @Input() event: MouseEvent;\r\n\r\n  @Output() close = new EventEmitter<ReuseContextCloseEvent>();\r\n\r\n  get includeNonCloseable() {\r\n    return this.event.ctrlKey;\r\n  }\r\n\r\n  private notify(type: CloseType, item: ReuseItem) {\r\n    this.close.next({\r\n      type,\r\n      item: this.item,\r\n      includeNonCloseable: this.includeNonCloseable,\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.includeNonCloseable) this.item.closable = true;\r\n  }\r\n\r\n  click(e: MouseEvent, type: CloseType) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (type === 'close' && !this.item.closable) return;\r\n    if (type === 'closeRight' && this.item.last) return;\r\n    this.notify(type, this.item);\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  @HostListener('document:contextmenu', ['$event'])\r\n  closeMenu(event: MouseEvent): void {\r\n    if (event.type === 'click' && event.button === 2) return;\r\n    this.notify(null, null);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  Overlay,\r\n  OverlayRef,\r\n  ScrollStrategyOptions,\r\n} from '@angular/cdk/overlay';\r\nimport { ComponentPortal } from '@angular/cdk/portal';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Subject } from 'rxjs/Subject';\r\n\r\nimport {\r\n  ReuseContextEvent,\r\n  ReuseContextI18n,\r\n  ReuseContextCloseEvent,\r\n} from './interface';\r\nimport { ReuseTabContextMenuComponent } from './reuse-tab-context-menu.component';\r\n\r\n@Injectable()\r\nexport class ReuseTabContextService {\r\n  private ref: OverlayRef;\r\n  i18n: ReuseContextI18n;\r\n\r\n  show: Subject<ReuseContextEvent> = new Subject<ReuseContextEvent>();\r\n  close: Subject<ReuseContextCloseEvent> = new Subject<\r\n    ReuseContextCloseEvent\r\n  >();\r\n\r\n  constructor(private overlay: Overlay) {}\r\n\r\n  remove() {\r\n    if (!this.ref) return;\r\n    this.ref.detach();\r\n    this.ref.dispose();\r\n    this.ref = null;\r\n  }\r\n\r\n  open(context: ReuseContextEvent) {\r\n    this.remove();\r\n    const { event, item } = context;\r\n    const fakeElement = {\r\n      getBoundingClientRect: (): ClientRect => ({\r\n        bottom: event.clientY,\r\n        height: 0,\r\n        left: event.clientX,\r\n        right: event.clientX,\r\n        top: event.clientY,\r\n        width: 0,\r\n      }),\r\n    };\r\n    const positionStrategy = this.overlay\r\n      .position()\r\n      .connectedTo(\r\n        { nativeElement: fakeElement },\r\n        { originX: 'start', originY: 'bottom' },\r\n        { overlayX: 'start', overlayY: 'top' },\r\n      )\r\n      .withFallbackPosition(\r\n        { originX: 'start', originY: 'top' },\r\n        { overlayX: 'start', overlayY: 'bottom' },\r\n      )\r\n      .withFallbackPosition(\r\n        { originX: 'end', originY: 'top' },\r\n        { overlayX: 'start', overlayY: 'top' },\r\n      )\r\n      .withFallbackPosition(\r\n        { originX: 'start', originY: 'top' },\r\n        { overlayX: 'end', overlayY: 'top' },\r\n      )\r\n      .withFallbackPosition(\r\n        { originX: 'end', originY: 'center' },\r\n        { overlayX: 'start', overlayY: 'center' },\r\n      )\r\n      .withFallbackPosition(\r\n        { originX: 'start', originY: 'center' },\r\n        { overlayX: 'end', overlayY: 'center' },\r\n      );\r\n    this.ref = this.overlay.create({\r\n      positionStrategy,\r\n      panelClass: 'reuse-tab-cm',\r\n      scrollStrategy: this.overlay.scrollStrategies.close(),\r\n    });\r\n    const comp = this.ref.attach(\r\n      new ComponentPortal(ReuseTabContextMenuComponent),\r\n    );\r\n    const instance = comp.instance;\r\n    instance.i18n = this.i18n;\r\n    instance.item = { ...item };\r\n    instance.event = event;\r\n\r\n    const sub$ = new Subscription();\r\n    sub$.add(\r\n      instance.close.subscribe((res: ReuseContextCloseEvent) => {\r\n        this.close.next(res);\r\n        this.remove();\r\n      }),\r\n    );\r\n    comp.onDestroy(() => sub$.unsubscribe());\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnChanges,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  EventEmitter,\r\n  OnInit,\r\n  SimpleChanges,\r\n  SimpleChange,\r\n  OnDestroy,\r\n  ElementRef,\r\n  Renderer2,\r\n  Inject,\r\n  Optional,\r\n} from '@angular/core';\r\nimport { Router, NavigationEnd, ActivatedRoute } from '@angular/router';\r\nimport { DOCUMENT } from '@angular/platform-browser';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { combineLatest } from 'rxjs/observable/combineLatest';\r\nimport { filter } from 'rxjs/operators';\r\nimport {\r\n  coerceNumberProperty,\r\n  coerceBooleanProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\nimport { ALAIN_I18N_TOKEN, AlainI18NService } from '@delon/theme';\r\n\r\nimport { ReuseTabService } from './reuse-tab.service';\r\nimport {\r\n  ReuseTabCached,\r\n  ReuseTabNotify,\r\n  ReuseTabMatchMode,\r\n  ReuseItem,\r\n  ReuseContextI18n,\r\n  ReuseContextCloseEvent,\r\n  ReuseTitle,\r\n} from './interface';\r\nimport { ReuseTabContextService } from './reuse-tab-context.service';\r\n\r\n@Component({\r\n  selector: 'reuse-tab',\r\n  template: `<nz-tabset [nzSelectedIndex]=\"pos\" [nzAnimated]=\"false\" nzType=\"line\"> <nz-tab *ngFor=\"let i of list; let index = index\" [nzTitle]=\"titleTemplate\"> <ng-template #titleTemplate> <span [context-menu]=\"i\" (click)=\"to($event, index)\" class=\"name\">{{i.title}}</span> <i *ngIf=\"i.closable\" class=\"anticon anticon-close op\" (click)=\"_close($event, index, false)\"></i> </ng-template> </nz-tab> </nz-tabset> <reuse-tab-context [i18n]=\"i18n\" (change)=\"cmChange($event)\"></reuse-tab-context> `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n  providers: [ReuseTabContextService],\r\n})\r\nexport class ReuseTabComponent implements OnInit, OnChanges, OnDestroy {\r\n  private sub$: Subscription;\r\n  private i18n$: Subscription;\r\n  list: ReuseItem[] = [];\r\n  item: ReuseItem;\r\n  pos = 0;\r\n\r\n  // region: properties\r\n  /** 设置匹配模式 */\r\n  @Input() mode: ReuseTabMatchMode = ReuseTabMatchMode.Menu;\r\n  /** 选项文本国际化 */\r\n  @Input() i18n: ReuseContextI18n;\r\n  /** 是否Debug模式 */\r\n  @Input()\r\n  get debug() {\r\n    return this._debug;\r\n  }\r\n  set debug(value: any) {\r\n    this._debug = coerceBooleanProperty(value);\r\n  }\r\n  private _debug = false;\r\n  /** 允许最多复用多少个页面 */\r\n  @Input()\r\n  get max() {\r\n    return this._max;\r\n  }\r\n  set max(value: any) {\r\n    this._max = coerceNumberProperty(value);\r\n  }\r\n  private _max: number;\r\n  /** 排除规则，限 `mode=URL` */\r\n  @Input() excludes: RegExp[];\r\n  /** 允许关闭 */\r\n  @Input()\r\n  get allowClose() {\r\n    return this._allowClose;\r\n  }\r\n  set allowClose(value: any) {\r\n    this._allowClose = coerceBooleanProperty(value);\r\n  }\r\n  private _allowClose = true;\r\n  /** 是否固定 */\r\n  @Input()\r\n  get fixed() {\r\n    return this._fixed;\r\n  }\r\n  set fixed(value: any) {\r\n    this._fixed = coerceBooleanProperty(value);\r\n  }\r\n  private _fixed = true;\r\n  /** 总是显示当前页 */\r\n  @Input()\r\n  get showCurrent() {\r\n    return this._showCurrent;\r\n  }\r\n  set showCurrent(value: any) {\r\n    this._showCurrent = coerceBooleanProperty(value);\r\n  }\r\n  private _showCurrent = true;\r\n  /** 切换时回调 */\r\n  @Output() change: EventEmitter<ReuseItem> = new EventEmitter<ReuseItem>();\r\n  /** 关闭回调 */\r\n  @Output() close: EventEmitter<ReuseItem> = new EventEmitter<ReuseItem>();\r\n  // endregion\r\n\r\n  constructor(\r\n    public srv: ReuseTabService,\r\n    private cd: ChangeDetectorRef,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private el: ElementRef,\r\n    private render: Renderer2,\r\n    @Inject(DOCUMENT) private doc: any,\r\n    @Optional()\r\n    @Inject(ALAIN_I18N_TOKEN)\r\n    private i18nSrv: AlainI18NService,\r\n  ) {\r\n    const route$ = this.router.events.pipe(\r\n      filter(evt => evt instanceof NavigationEnd),\r\n    );\r\n    this.sub$ = <any>combineLatest(this.srv.change, route$).subscribe(\r\n      ([res, e]) => this.genList(res),\r\n    );\r\n    if (this.i18nSrv)\r\n      this.i18n$ = this.i18nSrv.change.subscribe(() => this.genList());\r\n  }\r\n\r\n  private genTit(title: ReuseTitle): string {\r\n    return title.i18n && this.i18nSrv\r\n      ? this.i18nSrv.fanyi(title.i18n)\r\n      : title.text;\r\n  }\r\n\r\n  private genList(notify?: ReuseTabNotify) {\r\n    const isClosed = notify && notify.active === 'close';\r\n    const beforeClosePos = isClosed\r\n      ? this.list.findIndex(w => w.url === notify.url)\r\n      : -1;\r\n    const ls = this.srv.items.map((item: ReuseTabCached, index: number) => {\r\n      return <ReuseItem>{\r\n        url: item.url,\r\n        title: this.genTit(item.title),\r\n        closable: this.allowClose && item.closable && this.srv.count > 0,\r\n        index,\r\n        active: false,\r\n        last: false,\r\n      };\r\n    });\r\n    if (this.showCurrent) {\r\n      const snapshot = this.route.snapshot;\r\n      const url = this.srv.getUrl(snapshot);\r\n      const idx = ls.findIndex(w => w.url === url);\r\n      // jump directly when the current exists in the list\r\n      // or create a new current item and jump\r\n      if (idx !== -1 || (isClosed && notify.url === url)) {\r\n        this.pos = isClosed\r\n          ? idx >= beforeClosePos\r\n            ? this.pos - 1\r\n            : this.pos\r\n          : idx;\r\n      } else {\r\n        const snapshotTrue = this.srv.getTruthRoute(snapshot);\r\n        ls.push(<ReuseItem>{\r\n          url,\r\n          title: this.genTit(this.srv.getTitle(url, snapshotTrue)),\r\n          closable:\r\n            this.allowClose &&\r\n            this.srv.count > 0 &&\r\n            this.srv.getClosable(url, snapshotTrue),\r\n          index: ls.length,\r\n          active: false,\r\n          last: false,\r\n        });\r\n        this.pos = ls.length - 1;\r\n      }\r\n      // fix unabled close last item\r\n      if (ls.length <= 1) ls[0].closable = false;\r\n    }\r\n\r\n    this.list = ls;\r\n\r\n    if (ls.length && isClosed) {\r\n      this.to(null, this.pos);\r\n    }\r\n\r\n    this.refStatus(false);\r\n    this.visibility();\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  private visibility() {\r\n    if (this.showCurrent) return;\r\n    this.render.setStyle(\r\n      this.el.nativeElement,\r\n      'display',\r\n      this.list.length === 0 ? 'none' : 'block',\r\n    );\r\n  }\r\n\r\n  // region: UI\r\n\r\n  cmChange(res: ReuseContextCloseEvent) {\r\n    switch (res.type) {\r\n      case 'close':\r\n        this._close(null, res.item.index, res.includeNonCloseable);\r\n        break;\r\n      case 'closeRight':\r\n        this.srv.closeRight(res.item.url, res.includeNonCloseable);\r\n        this.close.emit(null);\r\n        break;\r\n      case 'clear':\r\n      case 'closeOther':\r\n        this.srv.clear(res.includeNonCloseable);\r\n        this.close.emit(null);\r\n        break;\r\n    }\r\n  }\r\n\r\n  refStatus(dc = true) {\r\n    if (this.list.length) {\r\n      this.list[this.list.length - 1].last = true;\r\n      this.list.forEach((i, idx) => (i.active = this.pos === idx));\r\n    }\r\n    if (dc) this.cd.detectChanges();\r\n  }\r\n\r\n  to(e: Event, index: number) {\r\n    if (e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n    index = Math.max(0, Math.min(index, this.list.length - 1));\r\n    const item = this.list[index];\r\n    this.router.navigateByUrl(item.url).then(res => {\r\n      if (!res) return;\r\n      this.pos = index;\r\n      this.item = item;\r\n      this.refStatus();\r\n      this.change.emit(item);\r\n    });\r\n  }\r\n\r\n  _close(e: Event, idx: number, includeNonCloseable: boolean) {\r\n    if (e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n    const item = this.list[idx];\r\n    this.srv.close(item.url, includeNonCloseable);\r\n    this.close.emit(item);\r\n    this.cd.detectChanges();\r\n    return false;\r\n  }\r\n\r\n  // endregion\r\n\r\n  ngOnInit(): void {\r\n    this.setClass();\r\n\r\n    this.genList();\r\n  }\r\n\r\n  private setClass() {\r\n    const el = this.el.nativeElement;\r\n    const body = this.doc.querySelector('body');\r\n    const fixedCls = `fixed`;\r\n    const bodyCls = `has-reuse-tab`;\r\n    if (this.fixed) {\r\n      this.render.addClass(el, fixedCls);\r\n      this.render.addClass(body, bodyCls);\r\n    } else {\r\n      this.render.removeClass(el, fixedCls);\r\n      this.render.removeClass(body, bodyCls);\r\n    }\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (changes.max) this.srv.max = this.max;\r\n    if (changes.excludes) this.srv.excludes = this.excludes;\r\n    if (changes.mode) this.srv.mode = this.mode;\r\n    this.srv.debug = this.debug;\r\n\r\n    this.setClass();\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.sub$.unsubscribe();\r\n    if (this.i18n$) this.i18n$.unsubscribe();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnDestroy,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport { ReuseContextI18n, ReuseContextCloseEvent } from './interface';\r\nimport { ReuseTabContextService } from './reuse-tab-context.service';\r\n\r\n@Component({\r\n  selector: 'reuse-tab-context',\r\n  template: ``,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class ReuseTabContextComponent implements OnDestroy {\r\n  private sub$: Subscription = new Subscription();\r\n\r\n  @Input()\r\n  set i18n(value: ReuseContextI18n) {\r\n    this.srv.i18n = value;\r\n  }\r\n\r\n  @Output() change = new EventEmitter<ReuseContextCloseEvent>();\r\n\r\n  constructor(private srv: ReuseTabContextService) {\r\n    this.sub$.add(srv.show.subscribe(context => this.srv.open(context)));\r\n    this.sub$.add(srv.close.subscribe(res => this.change.emit(res)));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.sub$.unsubscribe();\r\n  }\r\n}\r\n","import { Directive, HostListener, Input } from '@angular/core';\r\n\r\nimport { ReuseTabContextService } from './reuse-tab-context.service';\r\nimport { ReuseItem } from './interface';\r\n\r\n@Directive({\r\n  selector: '[context-menu]',\r\n})\r\nexport class ReuseTabContextDirective {\r\n  @Input('context-menu') item: ReuseItem;\r\n\r\n  constructor(private srv: ReuseTabContextService) {}\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(event: MouseEvent): void {\r\n    this.srv.show.next({\r\n      event,\r\n      item: this.item,\r\n    });\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\nimport { ReuseTabComponent } from './reuse-tab.component';\nimport { ReuseTabService } from './reuse-tab.service';\nimport { ReuseTabContextComponent } from './reuse-tab-context.component';\nimport { ReuseTabContextDirective } from './reuse-tab-context.directive';\nimport { ReuseTabContextMenuComponent } from './reuse-tab-context-menu.component';\n\nconst COMPONENTS = [ReuseTabComponent];\nconst NOEXPORTS = [\n  ReuseTabContextMenuComponent,\n  ReuseTabContextComponent,\n  ReuseTabContextDirective,\n];\n\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, NgZorroAntdModule, OverlayModule],\n  declarations: [...COMPONENTS, ...NOEXPORTS],\n  entryComponents: [ReuseTabContextMenuComponent],\n  exports: [...COMPONENTS],\n})\nexport class AdReuseTabModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: AdReuseTabModule,\n      providers: [\n        ReuseTabService\n      ],\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { share } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class FullContentService {\r\n  private _change: BehaviorSubject<any> = new BehaviorSubject<any>(null);\r\n\r\n  /** 切换全屏工作区状态 */\r\n  toggle() {\r\n    this._change.next(true);\r\n  }\r\n\r\n  get change(): Observable<boolean> {\r\n    return this._change.pipe(share());\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  SimpleChange,\r\n  OnInit,\r\n  Inject,\r\n  HostBinding,\r\n  OnDestroy,\r\n  AfterViewInit,\r\n} from '@angular/core';\r\nimport {\r\n  coerceBooleanProperty,\r\n  coerceNumberProperty,\r\n} from '@angular/cdk/coercion';\r\nimport { DOCUMENT } from '@angular/platform-browser';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { debounceTime, filter, distinct } from 'rxjs/operators';\r\nimport { FullContentService } from './full-content.service';\r\nimport { Router, ActivationStart, ActivationEnd } from '@angular/router';\r\n\r\nconst cls = `ad-full-content-wrap`;\r\nconst fsCls = `ad-full-content-fs`;\r\nconst hideTitleCls = `ad-full-content-ht`;\r\n\r\n@Component({\r\n  selector: 'full-content',\r\n  template: `<ng-content></ng-content>`,\r\n  host: { '[class.ad-full-content]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class FullContentComponent\r\n  implements AfterViewInit, OnInit, OnChanges, OnDestroy {\r\n  private bodyEl: HTMLElement;\r\n  private inited = false;\r\n  private srv$: Subscription;\r\n  private route$: Subscription;\r\n  private id = `_full-content-${Math.random()\r\n    .toString(36)\r\n    .substring(2)}`;\r\n\r\n  @HostBinding('style.height.px') _height = 0;\r\n\r\n  // region: fields\r\n\r\n  @Input()\r\n  get fullscreen() {\r\n    return this._fullscreen;\r\n  }\r\n  set fullscreen(value: any) {\r\n    this._fullscreen = coerceBooleanProperty(value);\r\n  }\r\n  private _fullscreen;\r\n\r\n  @Input()\r\n  get hideTitle() {\r\n    return this._hideTitle;\r\n  }\r\n  set hideTitle(value: any) {\r\n    this._hideTitle = coerceBooleanProperty(value);\r\n  }\r\n  private _hideTitle = true;\r\n\r\n  @Input()\r\n  get padding() {\r\n    return this._padding;\r\n  }\r\n  set padding(value: any) {\r\n    this._padding = coerceNumberProperty(value);\r\n  }\r\n  private _padding = 24;\r\n\r\n  @Output()\r\n  fullscreenChange: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private router: Router,\r\n    private cd: ChangeDetectorRef,\r\n    private srv: FullContentService,\r\n    @Inject(DOCUMENT) private doc: any,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.inited = true;\r\n    this.bodyEl = this.doc.querySelector('body');\r\n    this.bodyEl.classList.add(cls);\r\n    (this.el.nativeElement as HTMLElement).id = this.id;\r\n    this.update();\r\n    this.installResizeEvent();\r\n    this.srv$ = <any>this.srv.change.subscribe(res => {\r\n      if (res) this.toggle();\r\n    });\r\n    this.route$ = <any>this.router.events\r\n      .pipe(\r\n        filter(\r\n          (e: any) =>\r\n            e instanceof ActivationStart || e instanceof ActivationEnd,\r\n        ),\r\n        debounceTime(200),\r\n      )\r\n      .subscribe(e => {\r\n        if (!!document.querySelector('#' + this.id)) {\r\n          this.bodyEl.classList.add(cls);\r\n          this.updateFsCls();\r\n        } else {\r\n          this.bodyEl.classList.remove(cls, fsCls, hideTitleCls);\r\n        }\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => this.updateHeight());\r\n  }\r\n\r\n  private updateFsCls() {\r\n    if (this.fullscreen) {\r\n      this.bodyEl.classList.add(fsCls);\r\n      if (this.hideTitle) this.bodyEl.classList.add(hideTitleCls);\r\n    } else {\r\n      this.bodyEl.classList.remove(fsCls);\r\n      if (this.hideTitle) this.bodyEl.classList.remove(hideTitleCls);\r\n    }\r\n  }\r\n\r\n  private update() {\r\n    this.updateFsCls();\r\n    this.fullscreenChange.emit(this.fullscreen);\r\n  }\r\n\r\n  private updateHeight() {\r\n    this._height =\r\n      this.bodyEl.getBoundingClientRect().height -\r\n      (this.el.nativeElement as HTMLElement).getBoundingClientRect().top -\r\n      this.padding;\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  toggle() {\r\n    this.fullscreen = !this.fullscreen;\r\n    this.update();\r\n    this.updateHeight();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (this.inited) this.update();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.bodyEl.classList.remove(cls, fsCls, hideTitleCls);\r\n    this.uninstallResizeEvent();\r\n    this.srv$.unsubscribe();\r\n    this.route$.unsubscribe();\r\n  }\r\n\r\n  // region: resize\r\n\r\n  private scroll$: Subscription = null;\r\n  private installResizeEvent() {\r\n    this.scroll$ = <any>FromEventObservable.create(window, 'resize')\r\n      .pipe(debounceTime(200))\r\n      .subscribe(() => this.updateHeight());\r\n  }\r\n\r\n  private uninstallResizeEvent() {\r\n    this.scroll$.unsubscribe();\r\n  }\r\n\r\n  // endregion\r\n}\r\n","import { Directive, HostListener } from '@angular/core';\r\nimport { FullContentComponent } from './full-content.component';\r\n\r\n@Directive({\r\n  selector: '[full-toggle]',\r\n})\r\nexport class FullContentToggleDirective {\r\n  constructor(private parent: FullContentComponent) {}\r\n\r\n  @HostListener('click')\r\n  _click() {\r\n    this.parent.toggle();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { FullContentComponent } from './full-content.component';\r\nimport { FullContentToggleDirective } from './full-content-toggle.directive';\r\nimport { FullContentService } from './full-content.service';\r\n\r\nconst COMPONENTS = [FullContentComponent, FullContentToggleDirective];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdFullContentModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: AdFullContentModule,\r\n      providers: [FullContentService],\r\n    };\r\n  }\r\n}\r\n","import { Directive, HostListener, Input } from '@angular/core';\r\nimport { XlsxService } from './xlsx.service';\r\nimport { XlsxExportOptions } from './interface';\r\n\r\n@Directive({ selector: '[xlsx]' })\r\nexport class XlsxDirective {\r\n  @Input('xlsx') data: XlsxExportOptions;\r\n\r\n  constructor(private srv: XlsxService) {}\r\n\r\n  @HostListener('click')\r\n  _click() {\r\n    this.srv.export(this.data);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DelonUtilModule } from '@delon/util';\nimport { XlsxService } from './xlsx.service';\nimport { XlsxDirective } from './xlsx.directive';\nimport { XlsxConfig, DA_XLSX_CONFIG } from './interface';\n\nconst COMPONENTS = [XlsxDirective];\n\n@NgModule({\n  imports: [CommonModule, DelonUtilModule],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS],\n})\nexport class AdXlsxModule {\n  static forRoot(config?: XlsxConfig): ModuleWithProviders {\n    return {\n      ngModule: AdXlsxModule,\n      providers: [XlsxService, { provide: DA_XLSX_CONFIG, useValue: config }],\n    };\n  }\n}\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport const DA_ZIP_CONFIG = new InjectionToken<ZipConfig>('DA_ZIP_CONFIG');\r\n\r\nexport interface ZipConfig {\r\n  /**\r\n   * Zip library path\r\n   * @default //cdn.bootcss.com/jszip/3.1.5/jszip.min.js\r\n   */\r\n  url?: string;\r\n  /**\r\n   * Defines which zip optional utils should get loaded\r\n   */\r\n  utils?: string[];\r\n}\r\n\r\nexport interface ZipWriteOptions {\r\n  /** save file name, default: `download.zip` */\r\n  filename?: string;\r\n  options?: any;\r\n  /** The optional function called on each internal update with the metadata. */\r\n  update?: (metadata: any) => void;\r\n  /** triggers when saveas */\r\n  callback?: () => void;\r\n}\r\n\r\nexport interface ZipSaveOptions {\r\n  /**\r\n   * 指定保存文件名，默认 `download.zip`\r\n   */\r\n  filename?: string;\r\n  /**\r\n   * JSZip `generateAsync` 方法的 `options` 选项\r\n   * @see https://stuk.github.io/jszip/documentation/api_jszip/generate_async.html\r\n   */\r\n  options?: any;\r\n  /**\r\n   * JSZip `generateAsync` 方法的 `onUpdate` 回调\r\n   * @see https://stuk.github.io/jszip/documentation/api_jszip/generate_async.html\r\n   */\r\n  update?: (percent: number, currentFile: string) => void;\r\n  /**\r\n   * 保存前回调方法\r\n   */\r\n  callback?: (blob: Blob) => void;\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { saveAs } from 'file-saver';\nimport { LazyService, LazyResult } from '@delon/util';\n\nimport {\n  ZipConfig,\n  DA_ZIP_CONFIG,\n  ZipWriteOptions,\n  ZipSaveOptions,\n} from './interface';\n\ndeclare var JSZip: any;\n\n@Injectable()\nexport class ZipService {\n  constructor(\n    @Inject(DA_ZIP_CONFIG) private config: ZipConfig,\n    private http: HttpClient,\n    private lazy: LazyService,\n  ) {}\n\n  private init(): Promise<LazyResult[]> {\n    const config = Object.assign(\n      {\n        url: `//cdn.bootcss.com/jszip/3.1.5/jszip.min.js`,\n        utils: [],\n      },\n      this.config,\n    );\n\n    return this.lazy.load([config.url].concat(config.utils));\n  }\n\n  private check(zip: any) {\n    if (!zip) throw new Error('get instance via `ZipService.create()`');\n  }\n\n  /** 解压 */\n  read(fileOrUrl: File | string, options?: any): Promise<any> {\n    return new Promise<any>((resolve, reject) => {\n      this.init().then(() => {\n        // from url\n        if (typeof fileOrUrl === 'string') {\n          this.http\n            .request('GET', fileOrUrl, { responseType: 'arraybuffer' })\n            .subscribe(\n              (res: ArrayBuffer) => {\n                JSZip.loadAsync(res, options).then(ret => resolve(ret));\n              },\n              (err: any) => {\n                reject(err);\n              },\n            );\n          return;\n        }\n        // from file\n        const reader: FileReader = new FileReader();\n        reader.onload = (e: any) => {\n          JSZip.loadAsync(e.target.result, options).then(ret => resolve(ret));\n        };\n        reader.readAsBinaryString(<File>fileOrUrl);\n      });\n    });\n  }\n\n  /** 创建 Zip 实例，用于创建压缩文件 */\n  create(): Promise<any> {\n    return new Promise<any>(resolve => {\n      this.init().then(() => {\n        const zipFile: any = new JSZip();\n        resolve(zipFile);\n      });\n    });\n  }\n\n  /**\n   * 下载URL资源并写入 zip\n   * @param zip Zip 实例\n   * @param path Zip 路径，例如： `text.txt`、`txt/hi.txt`\n   * @param url URL 地址\n   */\n  pushUrl(zip: any, path: string, url: string): Promise<void> {\n    this.check(zip);\n    return new Promise<void>((resolve, reject) => {\n      this.http.request('GET', url, { responseType: 'arraybuffer' }).subscribe(\n        (res: ArrayBuffer) => {\n          zip.file(path, res);\n          resolve();\n        },\n        (error: any) => {\n          reject({ url, error });\n        },\n      );\n    });\n  }\n\n  /**\n   * 保存Zip并执行打开保存对话框\n   *\n   * @param zip zip 对象，务必通过 `create()` 构建\n   * @param options 额外参数，\n   */\n  save(zip: any, options?: ZipSaveOptions): Promise<void> {\n    this.check(zip);\n    const opt = Object.assign({}, options);\n    return new Promise<void>((resolve, reject) => {\n      zip\n        .generateAsync(Object.assign({ type: 'blob' }, opt.options), opt.update)\n        .then(\n          (data: Blob) => {\n            if (opt.callback) opt.callback(data);\n            saveAs(data, opt.filename || 'download.zip');\n            resolve();\n          },\n          err => {\n            reject(err);\n          },\n        );\n    });\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { ZipService } from './zip.service';\nimport { ZipConfig, DA_ZIP_CONFIG } from './interface';\n\n@NgModule({\n  imports: [CommonModule, DelonUtilModule],\n})\nexport class AdZipModule {\n  static forRoot(config?: ZipConfig): ModuleWithProviders {\n    return {\n      ngModule: AdZipModule,\n      providers: [ZipService, { provide: DA_ZIP_CONFIG, useValue: config }],\n    };\n  }\n}\n","import { NumberToChineseOptions } from './interface';\r\n\r\nexport function numberToChinese(\r\n  value: number | string,\r\n  rmb = true,\r\n  options?: NumberToChineseOptions,\r\n): string {\r\n  options = Object.assign(\r\n    {\r\n      minusSymbol: '负',\r\n      validThrow: false,\r\n    },\r\n    options,\r\n  );\r\n  if (typeof value === 'number') value = value.toString();\r\n  if (!/^-?\\d+(\\.\\d+)?$/.test(value) && options.validThrow)\r\n    throw new Error(`${value} is invalid number type`);\r\n  let integer: number | string, decimal: number | string;\r\n  [integer, decimal] = value.split('.');\r\n  let symbol = '';\r\n  if (integer.startsWith('-')) {\r\n    symbol = options.minusSymbol;\r\n    integer = integer.substr(1);\r\n  }\r\n  if (/^-?\\d+$/.test(value)) decimal = null;\r\n  integer = (+integer).toString();\r\n  const unit = {\r\n    num: rmb\r\n      ? ['', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖', '点']\r\n      : ['', '一', '二', '三', '四', '五', '六', '七', '八', '九', '点'],\r\n    radice: rmb\r\n      ? [\r\n          '',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '万',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '亿',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '万亿',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n          '兆',\r\n          '拾',\r\n          '佰',\r\n          '仟',\r\n        ]\r\n      : [\r\n          '',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '万',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '亿',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '万亿',\r\n          '十',\r\n          '百',\r\n          '千',\r\n          '兆',\r\n          '十',\r\n          '百',\r\n          '千',\r\n        ],\r\n    dec: ['角', '分', '厘', '毫'],\r\n  };\r\n  if (rmb) value = (+value).toFixed(5).toString();\r\n  let integerRes = '';\r\n  const integerCount = integer.length;\r\n  if (integer === '0' || integerCount === 0) {\r\n    integerRes = '零';\r\n  } else {\r\n    let cnDesc = '';\r\n    for (let i = 0; i < integerCount; i++) {\r\n      const n = +integer[i],\r\n        j = integerCount - i - 1,\r\n        isZero = i > 1 && n !== 0 && integer[i - 1] === '0',\r\n        cnZero = isZero ? '零' : '',\r\n        isEmpptyUnit =\r\n          (n === 0 && j % 4 !== 0) || integer.substr(i - 3, 4) === '0000',\r\n        descMark = cnDesc;\r\n      let cnNum = unit.num[n];\r\n\r\n      cnDesc = isEmpptyUnit ? '' : unit.radice[j];\r\n      // 第一位是一十\r\n      if (i === 0 && cnNum === '一' && cnDesc === '十') cnNum = '';\r\n      const isChangeEr =\r\n        n > 1 &&\r\n        cnNum === '二' && // 去除首位\r\n        ['', '十', '百'].indexOf(cnDesc) === -1 && // 不读两\\两十\\两百\r\n        descMark !== '十'; // 不读十两\r\n      if (isChangeEr) cnNum = '两';\r\n      integerRes += cnZero + cnNum + cnDesc;\r\n    }\r\n  }\r\n\r\n  // 小数部分拼接\r\n  let decimalRes = '';\r\n  const decimalCount = decimal ? decimal.toString().length : 0;\r\n  if (decimal === null) {\r\n    decimalRes = rmb ? '整' : '';\r\n  } else if (decimal === '0') {\r\n    decimalRes = '零';\r\n  } else {\r\n    for (let i = 0; i < decimalCount; i++) {\r\n      if (rmb && i > unit.dec.length - 1) break;\r\n      const n = decimal[i],\r\n        cnZero = n === '0' ? '零' : '',\r\n        cnNum = unit.num[n],\r\n        cnDesc = rmb ? unit.dec[i] : '';\r\n      decimalRes += cnZero + cnNum + cnDesc;\r\n    }\r\n  }\r\n  const ret =\r\n    symbol +\r\n    (rmb\r\n      ? integerRes + (decimalRes === '零' ? '元整' : `元${decimalRes}`)\r\n      : integerRes + (decimalRes === '' ? '' : `点${decimalRes}`));\r\n  return ret;\r\n}\r\n","import { PipeTransform, Pipe } from '@angular/core';\r\nimport { CurrencyPipe } from '@angular/common';\r\nimport { numberToChinese } from './number-to-chinese';\r\nimport { NumberToChineseOptions } from './interface';\r\n\r\n@Pipe({ name: 'n2c' })\r\nexport class NumberToChinesePipe implements PipeTransform {\r\n  transform(\r\n    value: number | string,\r\n    rmb: boolean = true,\r\n    minusSymbol: string = '负',\r\n  ): string {\r\n    return numberToChinese(value, rmb, { minusSymbol });\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NumberToChinesePipe } from './number-to-chinese.pipe';\r\n\r\nconst PIPES = [NumberToChinesePipe];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: PIPES,\r\n  exports: PIPES,\r\n})\r\nexport class AdNumberToChineseModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdNumberToChineseModule, providers: [] };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class AdLodopConfig {\r\n  /**\r\n   * 注册信息：主注册号\r\n   */\r\n  license: string;\r\n  /**\r\n   * 注册信息：附加注册号A\r\n   */\r\n  licenseA: string;\r\n  /**\r\n   * 注册信息：附加注册号B\r\n   */\r\n  licenseB?: string;\r\n  /**\r\n   * 注册信息：注册单位名称\r\n   */\r\n  companyName?: string;\r\n  /**\r\n   * Lodop 远程脚本URL地址，**注意**务必使用 `name` 属性指定变量值\r\n   *\r\n   * - http://localhost:18000/CLodopfuncs.js\r\n   * - https://localhost:8443/CLodopfuncs.js [默认]\r\n   */\r\n  url?: string;\r\n  /**\r\n   * Lodop 变量名，默认：`CLODOP`\r\n   */\r\n  name?: string;\r\n  /**\r\n   * 检查次数，默认 `100`，当检查超过时视为异常，这是因为 Lodop 需要连接 WebSocket\r\n   */\r\n  checkMaxCount?: number;\r\n}\r\n","import { Inject, Injectable, OnDestroy } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { of } from 'rxjs/observable/of';\nimport { Subject } from 'rxjs/Subject';\nimport { Observer } from 'rxjs/Observer';\n\nimport { LazyService } from '@delon/util';\n\nimport { Lodop, LodopResult, LodopPrintResult } from './interface';\nimport { AdLodopConfig } from './lodop.config';\n\n// TODO: zone\n@Injectable()\nexport class LodopService implements OnDestroy {\n  private _cog: AdLodopConfig;\n  private pending = false;\n  private _lodop: Lodop = null;\n  private _init: Subject<LodopResult> = new Subject<LodopResult>();\n  private _events: Subject<LodopPrintResult> = new Subject<LodopPrintResult>();\n\n  constructor(private defCog: AdLodopConfig, private scriptSrv: LazyService) {\n    this.cog = defCog;\n  }\n\n  /**\n   * 获取或重新设置配置\n   *\n   * **注：**重新设置会倒置重新加载脚本资源\n   */\n  get cog() {\n    return this._cog;\n  }\n  set cog(value: AdLodopConfig) {\n    this._cog = Object.assign(\n      {\n        url: 'https://localhost:8443/CLodopfuncs.js',\n        name: 'CLODOP',\n        companyName: '',\n        checkMaxCount: 100,\n      },\n      this.defCog,\n      value,\n    );\n  }\n\n  /** 事件变更通知 */\n  get events(): Observable<LodopPrintResult> {\n    return this._events.asObservable();\n  }\n\n  private check() {\n    if (!this._lodop) throw new Error(`请务必先调用 lodop 获取对象`);\n  }\n\n  private request(): void {\n    this.pending = true;\n\n    const url = `${this.cog.url}?name=${this.cog.name}`;\n    let checkMaxCount = this.cog.checkMaxCount;\n    const onResolve = (status, error?: any) => {\n      this._init.next({\n        ok: status === 'ok',\n        status,\n        error,\n        lodop: this._lodop,\n      });\n    };\n    const checkStatus = () => {\n      --checkMaxCount;\n      if (this._lodop.webskt && this._lodop.webskt.readyState === 1) {\n        onResolve('ok');\n      } else {\n        if (checkMaxCount < 0) {\n          onResolve('check-limit');\n          return;\n        }\n        setTimeout(() => checkStatus(), 100);\n      }\n    };\n\n    this.scriptSrv.load(url).then((res: any[]) => {\n      if (res.length === 1 && res[0].status !== 'ok') {\n        this.pending = false;\n        onResolve('script-load-error', res[0]);\n        return;\n      }\n      this._lodop =\n        window.hasOwnProperty(this.cog.name) &&\n        (window[this.cog.name] as Lodop);\n      if (this._lodop === null) {\n        onResolve('load-variable-name-error', { name: this.cog.name });\n        return;\n      }\n      this._lodop.SET_LICENSES(\n        this.cog.companyName,\n        this.cog.license,\n        this.cog.licenseA,\n        this.cog.licenseB,\n      );\n      checkStatus();\n    });\n  }\n\n  /** 重置 lodop 对象 */\n  reset() {\n    this._lodop = null;\n    this.pending = false;\n    this.request();\n  }\n\n  /** 获取 lodop 对象 */\n  get lodop(): Observable<LodopResult> {\n    if (this._lodop) return of(<LodopResult>{ ok: true, lodop: this._lodop });\n    if (this.pending) return this._init.asObservable();\n\n    this.request();\n\n    return this._init.asObservable();\n  }\n\n  /** 获取打印机列表 */\n  get printer(): string[] {\n    this.check();\n    const ret: string[] = [];\n    const count = this._lodop.GET_PRINTER_COUNT();\n    for (let index = 0; index < count; index++) {\n      ret.push(this._lodop.GET_PRINTER_NAME(index));\n    }\n    return ret;\n  }\n\n  /**\n   * 附加代码至 `lodop` 对象上，字符串类支持 `{{key}}` 的动态参数\n   *\n   * **注：** 代码是指打印设计所产生字符串数据\n   *\n   * @param code 代码\n   * @param contextObj 动态参数上下文对象\n   * @param parser 自定义解析表达式，默认：`/LODOP\\.([^(]+)\\(([^\\n]+)\\);/i`\n   */\n  attachCode(code: string, contextObj?: Object, parser?: RegExp): void {\n    this.check();\n    if (!parser) parser = /LODOP\\.([^(]+)\\(([^\\n]+)\\);/i;\n    code.split('\\n').forEach(line => {\n      const res = parser.exec(line.trim());\n      if (!res) return;\n      const fn = this._lodop[res[1]];\n      if (fn) {\n        let arr: Array<any>;\n        try {\n          const fakeFn = new Function(`return [${res[2]}]`);\n          arr = fakeFn() as any[];\n        } catch {}\n\n        if (Array.isArray(arr) && contextObj) {\n          for (let i = 0; i < arr.length; i++) {\n            if (typeof arr[i] === 'string') {\n              arr[i] = arr[i].replace(\n                /{{(.*?)}}/g,\n                (match, key) => contextObj[key.trim()] || '',\n              );\n            }\n          }\n        }\n        fn.apply(this._lodop, arr);\n      }\n    });\n  }\n\n  /**\n   * 打开打印设计关闭后自动返回代码\n   *\n   * **注：** 自动监听 `On_Return` 事件，运行后会移除\n   */\n  design(): Promise<string> {\n    this.check();\n    const tid = this._lodop.PRINT_DESIGN();\n    return new Promise(resolve => {\n      this._lodop.On_Return = (taskID: string, value: boolean | string) => {\n        if (tid !== taskID) return;\n        this._lodop.On_Return = null;\n        resolve('' + value);\n      };\n    });\n  }\n\n  private printBuffer: any[] = [];\n  private printDo() {\n    const data = this.printBuffer.shift();\n    if (!data) return;\n    this.attachCode(data.code, data.item, data.parser);\n    const tid = this._lodop.PRINT();\n    this._lodop.On_Return = (taskID: string, value: boolean | string) => {\n      if (tid !== taskID) return;\n      this._lodop.On_Return = null;\n      this._events.next(\n        Object.assign(\n          <LodopPrintResult>{\n            ok: value === true,\n            error: value === true ? null : value,\n          },\n          data,\n        ),\n      );\n      this.printDo();\n    };\n  }\n\n  /**\n   * 立即打印，一般用于批量套打\n   *\n   * @param code 代码\n   * @param contextObj 动态参数上下文对象\n   * @param parser 自定义解析表达式，默认：`/LODOP\\.([^(]+)\\(([^\\n]+)\\);/i`\n   */\n  print(code: string, contextObj: Object | Object[], parser?: RegExp): void {\n    this.check();\n    if (contextObj) {\n      this.printBuffer.push(\n        ...(Array.isArray(contextObj) ? contextObj : [contextObj]).map(item => {\n          return { code, parser, item };\n        }),\n      );\n    }\n    this.printDo();\n  }\n\n  ngOnDestroy(): void {\n    this._init.unsubscribe();\n    this._events.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { AdLodopConfig } from './lodop.config';\nimport { LodopService } from './lodop.service';\n\n@NgModule({\n  imports: [DelonUtilModule],\n})\nexport class AdLodopModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: AdLodopModule,\n      providers: [LodopService, AdLodopConfig],\n    };\n  }\n}\n","import {\r\n  Component,\r\n  Input,\r\n  HostListener,\r\n  OnInit,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Renderer2,\r\n  ElementRef,\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'quick-menu',\r\n  template: `\r\n  <div class=\"ad-quick-menu__inner\">\r\n    <div class=\"ad-quick-menu__ctrl\" [ngStyle]=\"ctrlStyle\">\r\n      <i [ngClass]=\"icon\"></i>\r\n    </div>\r\n    <ng-content></ng-content>\r\n  </div>\r\n  `,\r\n  host: { '[class.ad-quick-menu]': 'true' },\r\n  preserveWhitespaces: false,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class QuickMenuComponent implements OnInit, OnChanges {\r\n  // region: fields\r\n\r\n  @Input()\r\n  icon:\r\n    | string\r\n    | string[]\r\n    | { [key: string]: string } = 'anticon anticon-question-circle-o';\r\n\r\n  @Input() top = 120;\r\n\r\n  @Input() width = 200;\r\n\r\n  @Input() bgColor = '#fff';\r\n\r\n  @Input() borderColor = '#ddd';\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    private cd: ChangeDetectorRef,\r\n    private el: ElementRef,\r\n    private render: Renderer2,\r\n  ) {}\r\n\r\n  private show = false;\r\n\r\n  @HostListener('click')\r\n  _click() {\r\n    this.show = !this.show;\r\n    this.setStyle();\r\n  }\r\n\r\n  ctrlStyle: { [key: string]: string } = {};\r\n  private setStyle() {\r\n    this.ctrlStyle = {\r\n      'background-color': this.bgColor,\r\n      'border-color': this.borderColor,\r\n    };\r\n\r\n    const res: string[] = [\r\n      `top:${this.top}px`,\r\n      `width:${this.width}px`,\r\n      `background-color:${this.bgColor}`,\r\n      `border-color:${this.borderColor}`,\r\n      `margin-right:-${this.show ? 0 : this.width}px`,\r\n    ];\r\n    this.render.setAttribute(this.el.nativeElement, 'style', res.join(';'));\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  private initFlag = false;\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    this.setStyle();\r\n  }\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (this.initFlag) this.setStyle();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { QuickMenuComponent } from './quick-menu.component';\r\n\r\nconst COMPONENTS = [QuickMenuComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdQuickMenuModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdQuickMenuModule, providers: [] };\r\n  }\r\n}\r\n","export class AdQRConfig {\r\n  /** 背景，默认：`white` */\r\n  background = 'white';\r\n  /** 背景透明级别，范围：`0-1` 之间，默认：`1.0` */\r\n  backgroundAlpha = 1.0;\r\n  /** 前景，默认：`black` */\r\n  foreground = 'black';\r\n  /** 前景透明级别，范围：`0-1` 之间，默认：`1.0` */\r\n  foregroundAlpha = 1.0;\r\n  /** 误差校正级别，默认：`L` */\r\n  level: 'L' | 'M' | 'Q' | 'H' = 'L';\r\n  /** 二维码输出图片MIME类型，默认：`image/png` */\r\n  mime = 'image/png';\r\n  /** 内边距（单位：px），默认：`10` */\r\n  padding = 10;\r\n  /** 大小（单位：px），默认：`220` */\r\n  size = 220;\r\n}\r\n","import { AdQRConfig } from './qr.config';\r\nimport { Injectable } from '@angular/core';\r\n\r\ndeclare var QRious: any;\r\n\r\n@Injectable()\r\nexport class QRService {\r\n  /** 当前qr实例 */\r\n  readonly qr: any;\r\n  /** 背景 */\r\n  background: string;\r\n  /** 背景透明级别，范围：`0-1` 之间 */\r\n  backgroundAlpha = 1.0;\r\n  /** 前景 */\r\n  foreground: string;\r\n  /** 前景透明级别，范围：`0-1` 之间 */\r\n  foregroundAlpha: number;\r\n  /** 误差校正级别 */\r\n  level: string;\r\n  /** 二维码输出图片MIME类型 */\r\n  mime: string;\r\n  /** 内边距（单位：px） */\r\n  padding: number;\r\n  /** 大小（单位：px） */\r\n  size: number;\r\n  /** 值 */\r\n  value: string;\r\n\r\n  constructor(cog: AdQRConfig) {\r\n    Object.assign(this, cog);\r\n    this.qr = new QRious();\r\n  }\r\n\r\n  /**\r\n   * 生成二维码，并返回Base64编码\r\n   *\r\n   * @param [value] 重新指定值\r\n   */\r\n  refresh(value?: string | Object): string {\r\n    this.qr.set(typeof value === 'object' ? value : {\r\n      background: this.background,\r\n      backgroundAlpha: this.backgroundAlpha,\r\n      foreground: this.foreground,\r\n      foregroundAlpha: this.foregroundAlpha,\r\n      level: this.level,\r\n      padding: this.padding,\r\n      size: this.size,\r\n      value: value || this.value,\r\n    });\r\n    return this.dataURL;\r\n  }\r\n\r\n  /**\r\n   * 返回当前二维码Base64编码\r\n   */\r\n  get dataURL(): string {\r\n    return this.qr.toDataURL();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  ChangeDetectionStrategy,\r\n  OnChanges,\r\n  ChangeDetectorRef,\r\n  SimpleChanges,\r\n  HostBinding,\r\n  Output,\r\n  EventEmitter,\r\n} from '@angular/core';\r\nimport { QRService } from './qr.service';\r\nimport { AdQRConfig } from './qr.config';\r\n\r\n@Component({\r\n  selector: 'qr',\r\n  template: `\r\n  <img src=\"{{dataURL}}\">\r\n  `,\r\n  preserveWhitespaces: false,\r\n  host: { '[class.ad-qr]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class QRComponent implements OnChanges {\r\n  dataURL: string;\r\n  // region: fields\r\n\r\n  /** 背景 */\r\n  @Input() background: string;\r\n  /** 背景透明级别，范围：`0-1` 之间 */\r\n  @Input() backgroundAlpha: number;\r\n  /** 前景 */\r\n  @Input() foreground: string;\r\n  /** 前景透明级别，范围：`0-1` 之间 */\r\n  @Input() foregroundAlpha: number;\r\n  /** 误差校正级别 */\r\n  @Input() level: string;\r\n  /** 二维码输出图片MIME类型 */\r\n  @Input() mime: string;\r\n  /** 内边距（单位：px） */\r\n  @Input() padding: number;\r\n  /** 大小（单位：px） */\r\n  @HostBinding('style.height.px')\r\n  @HostBinding('style.width.px')\r\n  @Input() size: number;\r\n  /** 值 */\r\n  @Input() value: string;\r\n  /** 变更时回调 */\r\n  @Output() change = new EventEmitter<string>();\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    cog: AdQRConfig,\r\n    private srv: QRService,\r\n    private cd: ChangeDetectorRef,\r\n  ) {\r\n    Object.assign(this, cog);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.dataURL = this.srv.refresh({\r\n      background: this.background,\r\n      backgroundAlpha: this.backgroundAlpha,\r\n      foreground: this.foreground,\r\n      foregroundAlpha: this.foregroundAlpha,\r\n      level: this.level,\r\n      mime: this.mime,\r\n      padding: this.padding,\r\n      size: this.size,\r\n      value: this.value\r\n    });\r\n    this.cd.detectChanges();\r\n    this.change.emit(this.dataURL);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AdQRConfig } from './qr.config';\r\nimport { QRComponent } from './qr.component';\r\nimport { QRService } from './qr.service';\r\n\r\nconst COMPONENTS = [QRComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdQRModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdQRModule, providers: [AdQRConfig, QRService] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  OnInit,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport {\r\n  coerceBooleanProperty,\r\n  coerceNumberProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-bar',\r\n  template: `\r\n  <ng-container *ngIf=\"_title; else _titleTpl\"><h4>{{_title}}</h4></ng-container>\r\n  <div #container></div>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2BarComponent implements OnDestroy, OnChanges, OnInit {\r\n  // region: fields\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  @Input() color = 'rgba(24, 144, 255, 0.85)';\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height = 0;\r\n\r\n  @Input() padding: number[];\r\n  @Input() data: Array<{ x: any; y: any; [key: string]: any }>;\r\n\r\n  @Input()\r\n  get autoLabel() {\r\n    return this._autoLabel;\r\n  }\r\n  set autoLabel(value: any) {\r\n    this._autoLabel = coerceBooleanProperty(value);\r\n  }\r\n  private _autoLabel = true;\r\n\r\n  // endregion\r\n\r\n  @HostBinding('class.g2-chart') private _cls = true;\r\n\r\n  @ViewChild('container') private node: ElementRef;\r\n\r\n  chart: any;\r\n\r\n  constructor(private el: ElementRef, private cd: ChangeDetectorRef) {\r\n    this.cd.detach();\r\n  }\r\n\r\n  install() {\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n    // this.uninstall();\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    let padding = Object.assign([], this.padding);\r\n    if (padding.length <= 0)\r\n      padding = [32, 0, this.autoHideXLabels ? 8 : 32, 40];\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: +this.height - 22,\r\n      legend: null,\r\n      padding: padding,\r\n    });\r\n\r\n    chart.axis('x', !this.autoHideXLabels);\r\n    chart.axis('y', {\r\n      title: false,\r\n      line: false,\r\n      tickLine: false,\r\n    });\r\n\r\n    chart.source(this.data, {\r\n      x: {\r\n        type: 'cat',\r\n      },\r\n      y: {\r\n        min: 0,\r\n      },\r\n    });\r\n\r\n    chart.tooltip({\r\n      showTitle: false,\r\n    });\r\n    chart\r\n      .interval()\r\n      .position('x*y')\r\n      .color(this.color)\r\n      .tooltip('x*y', (x, y) => {\r\n        return {\r\n          name: x,\r\n          value: y,\r\n        };\r\n      });\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    }, 30);\r\n    this.chart = chart;\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.installResizeEvent();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.resize();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstallResizeEvent();\r\n    this.uninstall();\r\n  }\r\n\r\n  // region: resize\r\n\r\n  private autoHideXLabels = false;\r\n  private scroll$: Subscription = null;\r\n  private installResizeEvent() {\r\n    if (!this.autoLabel || this.scroll$) return;\r\n\r\n    this.scroll$ = <any>FromEventObservable.create(window, 'resize')\r\n      .pipe(debounceTime(200))\r\n      .subscribe(() => this.resize());\r\n  }\r\n\r\n  private uninstallResizeEvent() {\r\n    if (this.scroll$) this.scroll$.unsubscribe();\r\n  }\r\n\r\n  resize() {\r\n    const canvasWidth = this.el.nativeElement.clientWidth;\r\n    const minWidth = this.data.length * 30;\r\n\r\n    if (canvasWidth <= minWidth) {\r\n      if (!this.autoHideXLabels) {\r\n        this.autoHideXLabels = true;\r\n        this.install();\r\n        return;\r\n      }\r\n    } else if (this.autoHideXLabels) {\r\n      this.autoHideXLabels = false;\r\n      this.install();\r\n      return;\r\n    }\r\n    if (!this.chart) this.install();\r\n  }\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { G2BarComponent } from './bar.component';\r\n\r\nconst COMPONENTS = [G2BarComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2BarModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2BarModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  ViewEncapsulation,\r\n  TemplateRef,\r\n  Input,\r\n  ContentChild,\r\n} from '@angular/core';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-card',\r\n  template: `\r\n  <nz-card [nzBodyStyle]=\"{padding: '20px 24px 8px 24px'}\" [nzBordered]=\"bordered\">\r\n    <nz-spin [nzSpinning]=\"loading\">\r\n      <div class=\"chart-card\">\r\n        <div class=\"chart-top\">\r\n          <div class=\"avatar\"><ng-container *ngIf=\"_avatar; else _avatarTpl\">{{ _avatar }}</ng-container></div>\r\n          <div class=\"meta-wrap\">\r\n            <div class=\"meta\">\r\n              <span class=\"title\" *ngIf=\"_title; else _titleTpl\">{{ _title }}</span>\r\n              <span class=\"action\" *ngIf=\"_action || _actionTpl\">\r\n                <ng-container *ngIf=\"_action; else _actionTpl\">{{ _action }}</ng-container>\r\n              </span>\r\n            </div>\r\n            <p *ngIf=\"total\" class=\"total\" [innerHTML]=\"total\"></p>\r\n          </div>\r\n        </div>\r\n        <div class=\"desc\" [ngStyle]=\"{'height':_height}\">\r\n          <div [ngClass]=\"{'fixed': !!_orgHeight }\">\r\n            <ng-content></ng-content>\r\n          </div>\r\n        </div>\r\n        <div class=\"footer\" *ngIf=\"_footer || _footerTpl\">\r\n          <ng-container *ngIf=\"_footer; else _footerTpl\">{{ _footer }}</ng-container>\r\n        </div>\r\n      </div>\r\n    </nz-spin>\r\n  </nz-card>`,\r\n  host: { '[class.ad-g2-card]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2CardComponent {\r\n  // region fields\r\n\r\n  /** 是否显示边框 */\r\n  @Input()\r\n  get bordered() {\r\n    return this._bordered;\r\n  }\r\n  set bordered(value: any) {\r\n    this._bordered = coerceBooleanProperty(value);\r\n  }\r\n  private _bordered = false;\r\n\r\n  _avatar = '';\r\n  _avatarTpl: TemplateRef<any>;\r\n  @Input()\r\n  set avatar(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._avatar = null;\r\n      this._avatarTpl = value;\r\n    } else this._avatar = value;\r\n  }\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  _action = '';\r\n  _actionTpl: TemplateRef<any>;\r\n  @Input()\r\n  set action(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._action = null;\r\n      this._actionTpl = value;\r\n    } else this._action = value;\r\n  }\r\n\r\n  @Input() total = '';\r\n\r\n  _height = 'auto';\r\n  _orgHeight: any;\r\n  @Input()\r\n  set contentHeight(value: number | string) {\r\n    this._orgHeight = value;\r\n    this._height =\r\n      typeof value === 'number' ? (this._height = `${value}px`) : value;\r\n  }\r\n\r\n  _footer = '';\r\n  _footerTpl: TemplateRef<any>;\r\n  @Input()\r\n  set footer(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._footer = null;\r\n      this._footerTpl = value;\r\n    } else this._footer = value;\r\n  }\r\n\r\n  /** 是否显示Loading */\r\n  @Input()\r\n  get loading() {\r\n    return this._loading;\r\n  }\r\n  set loading(value: any) {\r\n    this._loading = coerceBooleanProperty(value);\r\n  }\r\n  private _loading = false;\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { G2CardComponent } from './card.component';\r\n\r\nconst COMPONENTS = [G2CardComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2CardModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2CardModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ElementRef,\r\n  Input,\r\n  OnDestroy,\r\n  EventEmitter,\r\n  Output,\r\n  HostBinding,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-chart',\r\n  template: ``,\r\n})\r\nexport class G2ChartComponent implements OnInit, OnDestroy {\r\n  // region: fields\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height;\r\n\r\n  @Input()\r\n  get resizeTime() {\r\n    return this._resizeTime;\r\n  }\r\n  set resizeTime(value: any) {\r\n    this._resizeTime = coerceNumberProperty(value);\r\n  }\r\n  private _resizeTime = 0;\r\n\r\n  @Output() render: EventEmitter<ElementRef> = new EventEmitter<ElementRef>();\r\n\r\n  @Output() resize: EventEmitter<ElementRef> = new EventEmitter<ElementRef>();\r\n\r\n  @Output() destroy: EventEmitter<ElementRef> = new EventEmitter<ElementRef>();\r\n\r\n  // endregion\r\n\r\n  constructor(private el: ElementRef) {}\r\n\r\n  private renderChart() {\r\n    this.el.nativeElement.innerHTML = '';\r\n    this.render.emit(this.el);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    setTimeout(() => this.renderChart(), 200);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy.emit(this.el);\r\n    this.uninstallResizeEvent();\r\n  }\r\n\r\n  // region: resize\r\n\r\n  private resize$: Subscription = null;\r\n\r\n  private installResizeEvent() {\r\n    if (this.resizeTime <= 0 || !this.resize$) return;\r\n\r\n    if (this.resizeTime <= 200) this.resizeTime = 200;\r\n\r\n    this.resize$ = <any>FromEventObservable.create(window, 'resize')\r\n      .pipe(debounceTime(this.resizeTime))\r\n      .subscribe(() => this.resize.emit(this.el));\r\n  }\r\n\r\n  private uninstallResizeEvent() {\r\n    if (this.resize$) this.resize$.unsubscribe();\r\n  }\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { G2ChartComponent } from './chart.component';\r\n\r\nconst COMPONENTS = [G2ChartComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2ChartModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2ChartModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnInit,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  SimpleChange,\r\n} from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-gauge',\r\n  template: `<div #container></div>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class G2GaugeComponent implements OnInit, OnDestroy, OnChanges {\r\n  // region: fields\r\n\r\n  @Input() title: string;\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height;\r\n  @Input() color = '#2F9CFF';\r\n  @Input() bgColor = '#F0F2F5';\r\n  @Input() format: Function;\r\n\r\n  @Input()\r\n  get percent() {\r\n    return this._percent;\r\n  }\r\n  set percent(value: any) {\r\n    this._percent = coerceNumberProperty(value);\r\n  }\r\n  private _percent: number;\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  chart: any;\r\n  initFlag = false;\r\n\r\n  constructor(private cd: ChangeDetectorRef) {\r\n    this.cd.detach();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    this.install();\r\n  }\r\n\r\n  private createData() {\r\n    return [{ name: this.title, value: +this.percent }];\r\n  }\r\n\r\n  private draw() {\r\n    if (!this.chart) return;\r\n    this.chart.guide().clear();\r\n    const data = this.createData();\r\n    // 绘制仪表盘背景\r\n    this.chart.guide().arc({\r\n      zIndex: 0,\r\n      top: false,\r\n      start: [0, 0.95],\r\n      end: [100, 0.95],\r\n      style: {\r\n        // 底灰色\r\n        stroke: this.bgColor,\r\n        lineWidth: 12,\r\n      },\r\n    });\r\n    // 绘制指标\r\n    this.chart.guide().arc({\r\n      zIndex: 1,\r\n      start: [0, 0.95],\r\n      end: [data[0].value, 0.95],\r\n      style: {\r\n        stroke: this.color,\r\n        lineWidth: 12,\r\n      },\r\n    });\r\n    this.chart.changeData(data);\r\n  }\r\n\r\n  install() {\r\n    this.node.nativeElement.innerHTML = '';\r\n    const Shape = G2.Shape;\r\n    // 自定义Shape 部分\r\n    Shape.registerShape('point', 'pointer', {\r\n      drawShape(cfg, group) {\r\n        let point = cfg.points[0]; // 获取第一个标记点\r\n        point = this.parsePoint(point);\r\n        const center = this.parsePoint({\r\n          // 获取极坐标系下画布中心点\r\n          x: 0,\r\n          y: 0,\r\n        });\r\n        // 绘制指针\r\n        group.addShape('line', {\r\n          attrs: {\r\n            x1: center.x,\r\n            y1: center.y,\r\n            x2: point.x,\r\n            y2: point.y,\r\n            stroke: cfg.color,\r\n            lineWidth: 2,\r\n            lineCap: 'round',\r\n          },\r\n        });\r\n\r\n        const { origin } = cfg;\r\n        group.addShape('text', {\r\n          attrs: {\r\n            x: center.x,\r\n            y: center.y + 80,\r\n            text: `${origin._origin.value}%`,\r\n            textAlign: 'center',\r\n            fontSize: 24,\r\n            fill: 'rgba(0, 0, 0, 0.85)',\r\n          },\r\n        });\r\n        return group.addShape('circle', {\r\n          attrs: {\r\n            x: center.x,\r\n            y: center.y,\r\n            r: 9.75,\r\n            stroke: cfg.color,\r\n            lineWidth: 2,\r\n            fill: '#fff',\r\n          },\r\n        });\r\n      },\r\n    });\r\n\r\n    const data = this.createData();\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: this.height,\r\n      padding: [10, 10, 30, 10],\r\n    });\r\n    chart.source(data);\r\n\r\n    chart.coord('polar', {\r\n      startAngle: -1.2 * Math.PI,\r\n      endAngle: 0.2 * Math.PI,\r\n    });\r\n    chart.scale('value', {\r\n      min: 0,\r\n      max: 100,\r\n      nice: true,\r\n      tickCount: 6,\r\n    });\r\n\r\n    chart.axis('1', false);\r\n    // 刻度值\r\n    chart.axis('value', {\r\n      zIndex: 2,\r\n      line: null,\r\n      label: {\r\n        offset: -12,\r\n        formatter: this.format,\r\n      },\r\n      tickLine: null,\r\n      grid: null,\r\n    });\r\n    chart.legend(false);\r\n    chart\r\n      .point({\r\n        generatePoints: true,\r\n      })\r\n      .position('value*1')\r\n      .shape('pointer')\r\n      .color(this.color)\r\n      .active(false);\r\n\r\n    this.chart = chart;\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    });\r\n    this.draw();\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) this.chart.destroy();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (this.initFlag) this.draw();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { G2GaugeComponent } from './gauge.component';\r\n\r\nconst COMPONENTS = [G2GaugeComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2GaugeModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2GaugeModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  ChangeDetectorRef,\r\n  ChangeDetectionStrategy,\r\n} from '@angular/core';\r\nimport {\r\n  coerceNumberProperty,\r\n  coerceBooleanProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-mini-area',\r\n  template: `<div #container></div>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class G2MiniAreaComponent implements OnDestroy, OnChanges {\r\n  // region: fields\r\n\r\n  @Input() color = 'rgba(24, 144, 255, 0.2)';\r\n  @Input() borderColor = '#1890FF';\r\n  @Input()\r\n  get borderWidth() {\r\n    return this._borderWidth;\r\n  }\r\n  set borderWidth(value: any) {\r\n    this._borderWidth = coerceNumberProperty(value);\r\n  }\r\n  private _borderWidth = 2;\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height;\r\n\r\n  @Input()\r\n  get fit() {\r\n    return this._fit;\r\n  }\r\n  set fit(value: any) {\r\n    this._fit = coerceBooleanProperty(value);\r\n  }\r\n  private _fit = true;\r\n\r\n  @Input()\r\n  get line() {\r\n    return this._line;\r\n  }\r\n  set line(value: any) {\r\n    this._line = coerceBooleanProperty(value);\r\n  }\r\n  private _line = false;\r\n\r\n  @Input()\r\n  get animate() {\r\n    return this._animate;\r\n  }\r\n  set animate(value: any) {\r\n    this._animate = coerceBooleanProperty(value);\r\n  }\r\n  private _animate = true;\r\n\r\n  @Input() xAxis: any;\r\n  @Input() yAxis: any;\r\n  @Input() padding: number[] = [8, 8, 8, 8];\r\n  @Input() data: Array<{ x: number; y: number; [key: string]: any }>;\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  chart: any;\r\n\r\n  constructor(private cd: ChangeDetectorRef) {\r\n    this.cd.detach();\r\n  }\r\n\r\n  install() {\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: this.fit,\r\n      height: +this.height,\r\n      animate: this.animate,\r\n      padding: this.padding,\r\n      legend: null,\r\n    });\r\n\r\n    if (!this.xAxis && !this.yAxis) {\r\n      chart.axis(false);\r\n    }\r\n\r\n    if (this.xAxis) {\r\n      chart.axis('x', this.xAxis);\r\n    } else {\r\n      chart.axis('x', false);\r\n    }\r\n\r\n    if (this.yAxis) {\r\n      chart.axis('y', this.yAxis);\r\n    } else {\r\n      chart.axis('y', false);\r\n    }\r\n\r\n    const dataConfig = {\r\n      x: {\r\n        type: 'cat',\r\n        range: [0, 1],\r\n        xAxis: this.xAxis,\r\n      },\r\n      y: {\r\n        min: 0,\r\n        yAxis: this.yAxis,\r\n      },\r\n    };\r\n\r\n    chart.tooltip({\r\n      showTitle: false,\r\n      hideMarkders: false,\r\n      'g2-tooltip': { padding: 4 },\r\n      'g2-tooltip-list-item': { margin: `0px 4px` },\r\n    });\r\n\r\n    const view = chart.view();\r\n    view.source(this.data, dataConfig);\r\n\r\n    view\r\n      .area()\r\n      .position('x*y')\r\n      .color(this.color)\r\n      .tooltip('x*y', (x, y) => {\r\n        return {\r\n          name: x,\r\n          value: y,\r\n        };\r\n      })\r\n      .shape('smooth')\r\n      .style({ fillOpacity: 1 });\r\n\r\n    if (this.line) {\r\n      const view2 = chart.view();\r\n      view2.source(this.data, dataConfig);\r\n      view2\r\n        .line()\r\n        .position('x*y')\r\n        .color(this.borderColor)\r\n        .size(this.borderWidth)\r\n        .shape('smooth');\r\n      view2.tooltip(false);\r\n    }\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    });\r\n    this.chart = chart;\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.install();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { G2MiniAreaComponent } from './mini-area.component';\r\n\r\nconst COMPONENTS = [G2MiniAreaComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2MiniAreaModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2MiniAreaModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-mini-bar',\r\n  template: `<div #container></div>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class G2MiniBarComponent implements OnDestroy, OnChanges {\r\n  // region: fields\r\n\r\n  @Input() color = '#1890FF';\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height = 0;\r\n\r\n  @Input()\r\n  get borderWidth() {\r\n    return this._borderWidth;\r\n  }\r\n  set borderWidth(value: any) {\r\n    this._borderWidth = coerceNumberProperty(value);\r\n  }\r\n  private _borderWidth = 5;\r\n\r\n  @Input() padding: number[] = [8, 8, 8, 8];\r\n\r\n  @Input() data: Array<{ x: number; y: number; [key: string]: any }>;\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  chart: any;\r\n\r\n  constructor(private cd: ChangeDetectorRef) {\r\n    this.cd.detach();\r\n  }\r\n\r\n  install() {\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: +this.height,\r\n      padding: this.padding,\r\n      legend: null,\r\n    });\r\n\r\n    chart.axis(false);\r\n\r\n    chart.source(this.data, {\r\n      x: {\r\n        type: 'cat',\r\n      },\r\n      y: {\r\n        min: 0,\r\n      },\r\n    });\r\n\r\n    chart.tooltip({\r\n      showTitle: false,\r\n      hideMarkders: false,\r\n      crosshairs: false,\r\n      'g2-tooltip': { padding: 4 },\r\n      'g2-tooltip-list-item': { margin: `0px 4px` },\r\n    });\r\n    chart\r\n      .interval()\r\n      .position('x*y')\r\n      .size(this.borderWidth)\r\n      .color(this.color)\r\n      .tooltip('x*y', (x, y) => {\r\n        return {\r\n          name: x,\r\n          value: y,\r\n        };\r\n      });\r\n\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    });\r\n\r\n    this.chart = chart;\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.install();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { G2MiniBarComponent } from './mini-bar.component';\r\n\r\nconst COMPONENTS = [G2MiniBarComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2MiniBarModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2MiniBarModule, providers: [] };\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-mini-progress',\r\n  template: `\r\n  <nz-tooltip [nzTitle]=\"'目标值: ' + target + '%'\">\r\n    <div nz-tooltip class=\"target\" [ngStyle]=\"{'left.%': target}\">\r\n      <span [ngStyle]=\"{'background-color': color}\"></span>\r\n      <span [ngStyle]=\"{'background-color': color}\"></span>\r\n    </div>\r\n  </nz-tooltip>\r\n  <div class=\"progress-wrap\">\r\n    <div class=\"progress\" [ngStyle]=\"{'background-color': color, 'width.%': percent, 'height.px':strokeWidth}\"></div>\r\n  </div>\r\n  `,\r\n  host: { '[class.ad-g2-progress]': 'true' },\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2ProgressComponent {\r\n  // region: fields\r\n\r\n  @Input() color = '#1890FF';\r\n\r\n  @Input()\r\n  get target() {\r\n    return this._target;\r\n  }\r\n  set target(value: any) {\r\n    this._target = Math.min(Math.max(coerceNumberProperty(value), 0), 100);\r\n  }\r\n  private _target: number;\r\n\r\n  @Input()\r\n  get strokeWidth() {\r\n    return this._strokeWidth;\r\n  }\r\n  set strokeWidth(value: any) {\r\n    this._strokeWidth = coerceNumberProperty(value);\r\n  }\r\n  private _strokeWidth: number;\r\n\r\n  @Input()\r\n  get percent() {\r\n    return this._percent;\r\n  }\r\n  set percent(value: any) {\r\n    this._percent = Math.min(Math.max(coerceNumberProperty(value), 0), 100);\r\n  }\r\n  private _percent: number;\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { G2ProgressComponent } from './mini-progress.component';\r\n\r\nconst COMPONENTS = [G2ProgressComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2MiniProgressModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2MiniProgressModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  OnInit,\r\n  HostListener,\r\n  ViewEncapsulation,\r\n  Output,\r\n  EventEmitter,\r\n  ContentChild,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport {\r\n  coerceNumberProperty,\r\n  coerceBooleanProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-pie',\r\n  template: `\r\n  <div class=\"chart\">\r\n    <div #container></div>\r\n    <div *ngIf=\"subTitle || total\" class=\"total\">\r\n      <h4 *ngIf=\"subTitle\" class=\"pie-sub-title\" [innerHTML]=\"subTitle\"></h4>\r\n      <div *ngIf=\"total\" class=\"pie-stat\" [innerHTML]=\"total\"></div>\r\n    </div>\r\n  </div>\r\n  <ul *ngIf=\"hasLegend && legendData?.length\" class=\"legend\">\r\n    <li *ngFor=\"let item of legendData; let index = index\" (click)=\"handleLegendClick(index)\">\r\n      <span class=\"dot\" [ngStyle]=\"{'background-color': !item.checked ? '#aaa' : item.color}\"></span>\r\n      <span class=\"legend-title\">{{item.x}}</span>\r\n      <nz-divider nzType=\"vertical\"></nz-divider>\r\n      <span class=\"percent\">{{item.percent}}%</span>\r\n      <span class=\"value\" [innerHTML]=\"valueFormat ? valueFormat(item.y) : item.y\"></span>\r\n    </li>\r\n  </ul>`,\r\n  host: { '[class.ad-pie]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2PieComponent implements OnDestroy, OnChanges, OnInit {\r\n  // region: fields\r\n\r\n  @Input()\r\n  get animate() {\r\n    return this._animate;\r\n  }\r\n  set animate(value: any) {\r\n    this._animate = coerceBooleanProperty(value);\r\n  }\r\n  private _animate = true;\r\n\r\n  @Input() color = 'rgba(24, 144, 255, 0.85)';\r\n  @Input() subTitle: string;\r\n  @Input() total: string;\r\n\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height = 0;\r\n\r\n  @HostBinding('class.has-legend')\r\n  @Input()\r\n  get hasLegend() {\r\n    return this._hasLegend;\r\n  }\r\n  set hasLegend(value: any) {\r\n    this._hasLegend = coerceBooleanProperty(value);\r\n  }\r\n  private _hasLegend = false;\r\n\r\n  @HostBinding('class.legend-block')\r\n  @Input()\r\n  get legendBlock() {\r\n    return this._legendBlock;\r\n  }\r\n  set legendBlock(value: any) {\r\n    this._legendBlock = coerceBooleanProperty(value);\r\n  }\r\n  private _legendBlock = false;\r\n\r\n  @Input() inner = 0.75;\r\n  @Input() padding: number[] = [12, 0, 12, 0];\r\n\r\n  @Input()\r\n  get percent() {\r\n    return this._percent;\r\n  }\r\n  set percent(value: any) {\r\n    this._percent = coerceNumberProperty(value);\r\n  }\r\n  private _percent: number;\r\n\r\n  @Input()\r\n  get tooltip() {\r\n    return this._tooltip;\r\n  }\r\n  set tooltip(value: any) {\r\n    this._tooltip = coerceBooleanProperty(value);\r\n  }\r\n  private _tooltip = true;\r\n\r\n  @Input()\r\n  get lineWidth() {\r\n    return this._lineWidth;\r\n  }\r\n  set lineWidth(value: any) {\r\n    this._lineWidth = coerceNumberProperty(value);\r\n  }\r\n  private _lineWidth = 0;\r\n\r\n  @Input()\r\n  get select() {\r\n    return this._select;\r\n  }\r\n  set select(value: any) {\r\n    this._select = coerceBooleanProperty(value);\r\n  }\r\n  private _select = true;\r\n\r\n  @Input() data: Array<{ x: number | string; y: number; [key: string]: any }>;\r\n  @Input() valueFormat: Function;\r\n  @Input() colors: any[];\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  chart: any;\r\n  initFlag = false;\r\n  legendData: any[] = [];\r\n\r\n  constructor(private el: ElementRef, private cd: ChangeDetectorRef) {}\r\n\r\n  install() {\r\n    let formatColor;\r\n    if (typeof this.percent !== 'undefined') {\r\n      this.select = false;\r\n      this.tooltip = false;\r\n      formatColor = value =>\r\n        value === '占比' ? this.color || 'rgba(24, 144, 255, 0.85)' : '#F0F2F5';\r\n\r\n      /* eslint no-param-reassign: */\r\n      this.data = [\r\n        {\r\n          x: '占比',\r\n          y: +this.percent,\r\n        },\r\n        {\r\n          x: '反比',\r\n          y: 100 - +this.percent,\r\n        },\r\n      ];\r\n    }\r\n\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: this.height,\r\n      padding: this.padding,\r\n      animate: this.animate,\r\n    });\r\n\r\n    if (!this.tooltip) {\r\n      chart.tooltip(false);\r\n    } else {\r\n      chart.tooltip({\r\n        showTitle: false,\r\n        itemTpl:\r\n          '<li><span style=\"background-color:{color};\" class=\"g2-tooltip-marker\"></span>{name}: {value} %</li>',\r\n      });\r\n    }\r\n\r\n    chart.axis(false);\r\n    chart.legend(false);\r\n\r\n    const dv = new DataSet.DataView();\r\n    dv.source(this.data).transform({\r\n      type: 'percent',\r\n      field: 'y',\r\n      dimension: 'x',\r\n      as: 'percent',\r\n    });\r\n    chart.source(dv, {\r\n      x: {\r\n        type: 'cat',\r\n        range: [0, 1],\r\n      },\r\n      y: {\r\n        min: 0,\r\n      },\r\n    });\r\n\r\n    chart.coord('theta', { innerRadius: this.inner });\r\n\r\n    chart\r\n      .intervalStack()\r\n      .position('y')\r\n      .style({ lineWidth: this.lineWidth, stroke: '#fff' })\r\n      .tooltip('x*percent', (item, percent) => {\r\n        return {\r\n          name: item,\r\n          value: percent,\r\n        };\r\n      })\r\n      .color('x', this.percent ? formatColor : this.colors)\r\n      .select(this.select);\r\n\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    });\r\n\r\n    this.chart = chart;\r\n    if (this.hasLegend) {\r\n      this.legendData = chart\r\n        .getAllGeoms()[0]\r\n        ._attrs.dataArray.map((item: any) => {\r\n          const origin = item[0]._origin;\r\n          origin.color = item[0].color;\r\n          origin.checked = true;\r\n          origin.percent = (origin.percent * 100).toFixed(2);\r\n          return origin;\r\n        });\r\n      this.cd.detectChanges();\r\n    }\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  handleLegendClick(i: number) {\r\n    this.legendData[i].checked = !this.legendData[i].checked;\r\n\r\n    if (this.chart) {\r\n      this.chart.filter('x', (val: any, item: any) => item.checked);\r\n      this.chart.repaint();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    setTimeout(() => this.install(), 100);\r\n    this.installResizeEvent();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (this.initFlag) this.install();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstallResizeEvent();\r\n    this.uninstall();\r\n  }\r\n\r\n  // region: resize\r\n\r\n  private scroll$: Subscription = null;\r\n  private installResizeEvent() {\r\n    if (!this.hasLegend) return;\r\n\r\n    this.scroll$ = <any>FromEventObservable.create(window, 'resize')\r\n      .pipe(debounceTime(200))\r\n      .subscribe(() => this.resize());\r\n  }\r\n\r\n  private uninstallResizeEvent() {\r\n    if (this.scroll$) this.scroll$.unsubscribe();\r\n  }\r\n\r\n  resize() {\r\n    if (this.el.nativeElement.clientWidth <= 380) {\r\n      if (!this.legendBlock) {\r\n        this.legendBlock = true;\r\n      }\r\n    } else if (this.legendBlock) {\r\n      this.legendBlock = false;\r\n    }\r\n    if (!this.chart) this.install();\r\n  }\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { G2PieComponent } from './pie.component';\r\n\r\nconst COMPONENTS = [G2PieComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2PieModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2PieModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  OnInit,\r\n  HostListener,\r\n  Output,\r\n  EventEmitter,\r\n  ContentChild,\r\n  SimpleChange,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport {\r\n  coerceNumberProperty,\r\n  coerceBooleanProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-radar',\r\n  template: `\r\n  <h4 *ngIf=\"_title; else _titleTpl\">{{ _title }}</h4>\r\n  <div #container></div>\r\n  <div nz-row class=\"legend\" *ngIf=\"hasLegend\">\r\n    <div nz-col [nzSpan]=\"24 / legendData.length\" *ngFor=\"let i of legendData; let idx = index\" (click)=\"handleLegendClick(idx)\">\r\n      <div class=\"legend-item\">\r\n        <p>\r\n          <i class=\"dot\" [ngStyle]=\"{'background-color': !i.checked ? '#aaa' : i.color}\"></i>\r\n          <span>{{i.name}}</span>\r\n        </p>\r\n        <h6>{{i.value}}</h6>\r\n      </div>\r\n    </div>\r\n  </div>`,\r\n  host: { '[class.ad-radar]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2RadarComponent implements OnDestroy, OnChanges, OnInit {\r\n  // region: fields\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height = 0;\r\n\r\n  @Input() padding: number[] = [44, 30, 16, 30];\r\n\r\n  @Input()\r\n  get hasLegend() {\r\n    return this._hasLegend;\r\n  }\r\n  set hasLegend(value: any) {\r\n    this._hasLegend = coerceBooleanProperty(value);\r\n  }\r\n  private _hasLegend = true;\r\n\r\n  @Input()\r\n  get tickCount() {\r\n    return this._tickCount;\r\n  }\r\n  set tickCount(value: any) {\r\n    this._tickCount = coerceNumberProperty(value);\r\n  }\r\n  private _tickCount = 4;\r\n\r\n  @Input()\r\n  data: Array<{\r\n    name: string;\r\n    label: string;\r\n    value: number;\r\n    [key: string]: any;\r\n  }> = [];\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  chart: any;\r\n  initFlag = false;\r\n  legendData: any[] = [];\r\n\r\n  constructor(private el: ElementRef, private cd: ChangeDetectorRef) {}\r\n\r\n  handleLegendClick(i: number) {\r\n    this.legendData[i].checked = !this.legendData[i].checked;\r\n\r\n    if (this.chart) {\r\n      // const filterItem = this.legendData.filter(l => l.checked).map(l => l.name);\r\n      this.chart.filter(\r\n        'name',\r\n        (val: any) => this.legendData.find(w => w.name === val).checked,\r\n      );\r\n      this.chart.repaint();\r\n    }\r\n  }\r\n\r\n  install() {\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    const colors = [\r\n      '#1890FF',\r\n      '#FACC14',\r\n      '#2FC25B',\r\n      '#8543E0',\r\n      '#F04864',\r\n      '#13C2C2',\r\n      '#fa8c16',\r\n      '#a0d911',\r\n    ];\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: +this.height - (this.hasLegend ? 80 : 22),\r\n      padding: this.padding,\r\n    });\r\n    chart.source(this.data, {\r\n      value: {\r\n        min: 0,\r\n        tickCount: this.tickCount,\r\n      },\r\n    });\r\n\r\n    chart.coord('polar');\r\n    chart.legend(false);\r\n\r\n    chart.axis('label', {\r\n      line: null,\r\n      labelOffset: 8,\r\n      labels: {\r\n        label: {\r\n          fill: 'rgba(0, 0, 0, .65)',\r\n        },\r\n      },\r\n      grid: {\r\n        line: {\r\n          stroke: '#e9e9e9',\r\n          lineWidth: 1,\r\n          lineDash: [0, 0],\r\n        },\r\n      },\r\n    });\r\n\r\n    chart.axis('value', {\r\n      grid: {\r\n        type: 'polygon',\r\n        line: {\r\n          stroke: '#e9e9e9',\r\n          lineWidth: 1,\r\n          lineDash: [0, 0],\r\n        },\r\n      },\r\n      labels: {\r\n        label: {\r\n          fill: 'rgba(0, 0, 0, .65)',\r\n        },\r\n      },\r\n    });\r\n\r\n    chart\r\n      .line()\r\n      .position('label*value')\r\n      .color('name', colors);\r\n    chart\r\n      .point()\r\n      .position('label*value')\r\n      .color('name', colors)\r\n      .shape('circle')\r\n      .size(3);\r\n\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    });\r\n\r\n    this.chart = chart;\r\n\r\n    if (this.hasLegend) {\r\n      this.legendData = chart\r\n        .getAllGeoms()[0]\r\n        ._attrs.dataArray.map((item: any) => {\r\n          const origin = item[0]._origin;\r\n          const result = {\r\n            name: origin.name,\r\n            color: item[0].color,\r\n            checked: true,\r\n            value: item.reduce((p, n) => p + n._origin.value, 0),\r\n          };\r\n\r\n          return result;\r\n        });\r\n      this.cd.detectChanges();\r\n    }\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    this.install();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (this.initFlag) this.install();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { G2RadarComponent } from './radar.component';\r\n\r\nconst COMPONENTS = [G2RadarComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2RadarModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2RadarModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  OnInit,\r\n  HostListener,\r\n  ViewEncapsulation,\r\n  SimpleChange,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport {\r\n  coerceNumberProperty,\r\n  coerceBooleanProperty,\r\n} from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-tag-cloud',\r\n  template: `<div #container [ngStyle]=\"{'height.px': height}\"></div>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class G2TagCloudComponent implements OnDestroy, OnChanges, OnInit {\r\n  // region: fields\r\n\r\n  @Input() color = 'rgba(24, 144, 255, 0.85)';\r\n\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n    this.cd.detectChanges();\r\n  }\r\n  private _height = 0;\r\n\r\n  @Input() padding = 0;\r\n  @Input() data: { name: string; value: number; [key: string]: any }[];\r\n\r\n  @Input()\r\n  get autoLabel() {\r\n    return this._autoLabel;\r\n  }\r\n  set autoLabel(value: any) {\r\n    this._autoLabel = coerceBooleanProperty(value);\r\n  }\r\n  private _autoLabel = true;\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  chart: any;\r\n  initFlag = false;\r\n\r\n  constructor(private el: ElementRef, private cd: ChangeDetectorRef) {}\r\n\r\n  private initTagCloud() {\r\n    // 给point注册一个词云的shape\r\n    G2.Shape.registerShape('point', 'cloud', {\r\n      drawShape(cfg, container) {\r\n        const attrs = Object.assign(\r\n          {},\r\n          {\r\n            fillOpacity: cfg.opacity,\r\n            fontSize: cfg.origin._origin.size,\r\n            rotate: cfg.origin._origin.rotate,\r\n            text: cfg.origin._origin.text,\r\n            textAlign: 'center',\r\n            fontFamily: cfg.origin._origin.font,\r\n            fill: cfg.color,\r\n            textBaseline: 'Alphabetic',\r\n          },\r\n          cfg.style,\r\n        );\r\n        return container.addShape('text', {\r\n          attrs: Object.assign(attrs, {\r\n            x: cfg.x,\r\n            y: cfg.y,\r\n          }),\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  renderChart() {\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    this.node.nativeElement.innerHTML = '';\r\n    const dv = new DataSet.View().source(this.data);\r\n    const range = dv.range('value');\r\n    const min = range[0];\r\n    const max = range[1];\r\n    const height = +this.height;\r\n    const width = +this.el.nativeElement.offsetWidth;\r\n\r\n    dv.transform({\r\n      type: 'tag-cloud',\r\n      fields: ['name', 'value'],\r\n      size: [width, height],\r\n      padding: this.padding,\r\n      timeInterval: 5000, // max execute time\r\n      rotate() {\r\n        let random = ~~(Math.random() * 4) % 4;\r\n        if (random === 2) {\r\n          random = 0;\r\n        }\r\n        return random * 90; // 0, 90, 270\r\n      },\r\n      fontSize(d) {\r\n        if (d.value) {\r\n          return (d.value - min) / (max - min) * (80 - 24) + 24;\r\n        }\r\n        return 0;\r\n      },\r\n    });\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      width: width,\r\n      height: height,\r\n      padding: this.padding,\r\n      forceFit: true,\r\n    });\r\n    chart.source(dv, {\r\n      x: { nice: false },\r\n      y: { nice: false },\r\n    });\r\n    chart.legend(false);\r\n    chart.axis(false);\r\n    chart.tooltip({\r\n      showTitle: false,\r\n    });\r\n    chart.coord().reflect();\r\n    chart\r\n      .point()\r\n      .position('x*y')\r\n      .color('text')\r\n      .shape('cloud')\r\n      .tooltip('value*category');\r\n\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    });\r\n\r\n    this.chart = chart;\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    this.initTagCloud();\r\n    this.renderChart();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (this.initFlag) this.renderChart();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { G2TagCloudComponent } from './tag-cloud.component';\r\n\r\nconst COMPONENTS = [G2TagCloudComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2TagCloudModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2TagCloudModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  OnInit,\r\n  TemplateRef,\r\n  SimpleChange,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-timeline',\r\n  template: `\r\n  <ng-container *ngIf=\"_title; else _titleTpl\"><h4>{{_title}}</h4></ng-container>\r\n  <div #container></div>\r\n  <div #slider></div>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2TimelineComponent implements OnDestroy, OnChanges, OnInit {\r\n  // region: fields\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  @Input() data: Array<{ x: Date; y1: number; y2: number; [key: string]: any }>;\r\n  @Input() titleMap: { y1: string; y2: string };\r\n  @Input()\r\n  colorMap: { y1: string; y2: string } = { y1: '#1890FF', y2: '#2FC25B' };\r\n\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height = 400;\r\n\r\n  @Input() padding: number[] = [60, 20, 40, 40];\r\n\r\n  @Input()\r\n  get borderWidth() {\r\n    return this._borderWidth;\r\n  }\r\n  set borderWidth(value: any) {\r\n    this._borderWidth = coerceNumberProperty(value);\r\n  }\r\n  private _borderWidth = 2;\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n  @ViewChild('slider') sliderNode: ElementRef;\r\n\r\n  chart: any;\r\n  initFlag = false;\r\n  slider: any;\r\n\r\n  constructor(private cd: ChangeDetectorRef) {\r\n    cd.detach();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    this.install();\r\n  }\r\n\r\n  install() {\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    // clean\r\n    this.sliderNode.nativeElement.innerHTML = '';\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    const MAX = 8;\r\n    const begin = this.data.length > MAX ? (this.data.length - MAX) / 2 : 0;\r\n\r\n    const ds = new DataSet({\r\n      state: {\r\n        start: this.data[begin - 1].x,\r\n        end: this.data[begin - 1 + MAX].x,\r\n      },\r\n    });\r\n    const dv = ds.createView().source(this.data);\r\n    dv.source(this.data).transform({\r\n      type: 'filter',\r\n      callback(obj) {\r\n        const time = new Date(obj.x).getTime(); // !注意：时间格式，建议转换为时间戳进行比较\r\n        return time >= ds.state.start && time <= ds.state.end;\r\n      },\r\n    });\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: +this.height,\r\n      padding: this.padding,\r\n    });\r\n    chart.axis('x', { title: false });\r\n    chart.axis('y1', {\r\n      title: false,\r\n    });\r\n    chart.axis('y2', false);\r\n\r\n    let max;\r\n    if (this.data[0] && this.data[0].y1 && this.data[0].y2) {\r\n      max = Math.max(\r\n        this.data.sort((a, b) => b.y1 - a.y1)[0].y1,\r\n        this.data.sort((a, b) => b.y2 - a.y2)[0].y2,\r\n      );\r\n    }\r\n    chart.source(dv, {\r\n      x: {\r\n        type: 'timeCat',\r\n        tickCount: MAX,\r\n        mask: 'HH:mm',\r\n        range: [0, 1],\r\n      },\r\n      y1: {\r\n        alias: this.titleMap.y1,\r\n        max,\r\n        min: 0,\r\n      },\r\n      y2: {\r\n        alias: this.titleMap.y2,\r\n        max,\r\n        min: 0,\r\n      },\r\n    });\r\n\r\n    chart.legend({\r\n      position: 'top',\r\n      custom: true,\r\n      clickable: false,\r\n      items: [\r\n        { value: this.titleMap.y1, fill: this.colorMap.y1 },\r\n        { value: this.titleMap.y2, fill: this.colorMap.y2 },\r\n      ],\r\n    });\r\n\r\n    chart\r\n      .line()\r\n      .position('x*y1')\r\n      .color(this.colorMap.y1)\r\n      .size(this.borderWidth);\r\n    chart\r\n      .line()\r\n      .position('x*y2')\r\n      .color(this.colorMap.y2)\r\n      .size(this.borderWidth);\r\n    chart.render();\r\n    setTimeout(() => {\r\n      chart.forceFit();\r\n      chart.repaint();\r\n    }, 60);\r\n\r\n    const sliderPadding = Object.assign([], this.padding);\r\n    sliderPadding[0] = 0;\r\n    const slider = new Slider({\r\n      container: this.sliderNode.nativeElement,\r\n      height: 26,\r\n      padding: sliderPadding,\r\n      scales: {\r\n        x: {\r\n          type: 'time',\r\n          tickCount: 16,\r\n          mask: 'HH:MM',\r\n        },\r\n      },\r\n      backgroundChart: {\r\n        type: 'line',\r\n      },\r\n      start: ds.state.start,\r\n      end: ds.state.end,\r\n      xAxis: 'x',\r\n      yAxis: 'y1',\r\n      data: this.data,\r\n      onChange({ startValue, endValue }) {\r\n        ds.setState('start', startValue);\r\n        ds.setState('end', endValue);\r\n      },\r\n    });\r\n    slider.render();\r\n    setTimeout(() => {\r\n      slider.forceFit();\r\n      slider.repaint();\r\n    }, 60);\r\n\r\n    this.chart = chart;\r\n    this.slider = slider;\r\n  }\r\n\r\n  uninstall() {\r\n    if (this.chart) this.chart.destroy();\r\n    if (this.slider) this.slider.destroy();\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (this.initFlag) this.install();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { G2TimelineComponent } from './timeline.component';\r\n\r\nconst COMPONENTS = [G2TimelineComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2TimelineModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2TimelineModule, providers: [] };\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  OnInit,\r\n  HostListener,\r\n  ViewEncapsulation,\r\n  Renderer2,\r\n  SimpleChange,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\r\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n  selector: 'g2-water-wave',\r\n  template: `\r\n  <div [ngStyle]=\"{'height.px': height, 'width.px': height, 'overflow': 'hidden'}\">\r\n    <canvas #container class=\"canvas-wrap\" width=\"{{height*2}}\" height=\"{{height*2}}\"></canvas>\r\n  </div>\r\n  <div class=\"text\" [ngStyle]=\"{'width.px': height}\">\r\n    <ng-container *ngIf=\"_title; else _titleTpl\"><span>{{_title}}</span></ng-container>\r\n    <h4>{{percent}}%</h4>\r\n  </div>`,\r\n  host: { '[class.ad-water-wave]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2WaterWaveComponent implements OnDestroy, OnChanges, OnInit {\r\n  // region: fields\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  @Input() color = '#1890FF';\r\n\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = coerceNumberProperty(value);\r\n  }\r\n  private _height = 160;\r\n\r\n  @Input()\r\n  get percent() {\r\n    return this._percent;\r\n  }\r\n  set percent(value: any) {\r\n    this._percent = coerceNumberProperty(value);\r\n  }\r\n  private _percent: number;\r\n\r\n  // endregion\r\n\r\n  @ViewChild('container') node: ElementRef;\r\n\r\n  initFlag = false;\r\n  timer: any;\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    private cd: ChangeDetectorRef,\r\n  ) {}\r\n\r\n  renderChart() {\r\n    const data = this.percent / 100;\r\n    if (!data) return;\r\n\r\n    this.node.nativeElement.innerHTML = '';\r\n    const self = this;\r\n\r\n    const canvas = this.node.nativeElement as HTMLCanvasElement;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    const canvasWidth = canvas.width;\r\n    const canvasHeight = canvas.height;\r\n    const radius = canvasWidth / 2;\r\n    const lineWidth = 2;\r\n    const cR = radius - lineWidth;\r\n\r\n    ctx.beginPath();\r\n    ctx.lineWidth = lineWidth * 2;\r\n\r\n    const axisLength = canvasWidth - lineWidth;\r\n    const unit = axisLength / 8;\r\n    const range = 0.2; // 振幅\r\n    let currRange = range;\r\n    const xOffset = lineWidth;\r\n    let sp = 0; // 周期偏移量\r\n    let currData = 0;\r\n    const waveupsp = 0.005; // 水波上涨速度\r\n\r\n    let arcStack = [];\r\n    const bR = radius - lineWidth;\r\n    const circleOffset = -(Math.PI / 2);\r\n    let circleLock = true;\r\n\r\n    for (\r\n      let i = circleOffset;\r\n      i < circleOffset + 2 * Math.PI;\r\n      i += 1 / (8 * Math.PI)\r\n    ) {\r\n      arcStack.push([radius + bR * Math.cos(i), radius + bR * Math.sin(i)]);\r\n    }\r\n\r\n    const cStartPoint = arcStack.shift();\r\n    ctx.strokeStyle = this.color;\r\n    ctx.moveTo(cStartPoint[0], cStartPoint[1]);\r\n\r\n    function drawSin() {\r\n      ctx.beginPath();\r\n      ctx.save();\r\n\r\n      const sinStack = [];\r\n      for (let i = xOffset; i <= xOffset + axisLength; i += 20 / axisLength) {\r\n        const x = sp + (xOffset + i) / unit;\r\n        const y = Math.sin(x) * currRange;\r\n        const dx = i;\r\n        const dy = 2 * cR * (1 - currData) + (radius - cR) - unit * y;\r\n\r\n        ctx.lineTo(dx, dy);\r\n        sinStack.push([dx, dy]);\r\n      }\r\n\r\n      const startPoint = sinStack.shift();\r\n\r\n      ctx.lineTo(xOffset + axisLength, canvasHeight);\r\n      ctx.lineTo(xOffset, canvasHeight);\r\n      ctx.lineTo(startPoint[0], startPoint[1]);\r\n\r\n      const gradient = ctx.createLinearGradient(0, 0, 0, canvasHeight);\r\n      gradient.addColorStop(0, '#ffffff');\r\n      gradient.addColorStop(1, '#1890FF');\r\n      ctx.fillStyle = gradient;\r\n      ctx.fill();\r\n      ctx.restore();\r\n    }\r\n\r\n    function render() {\r\n      ctx.clearRect(0, 0, canvasWidth, canvasHeight);\r\n      if (circleLock) {\r\n        if (arcStack.length) {\r\n          const temp = arcStack.shift();\r\n          ctx.lineTo(temp[0], temp[1]);\r\n          ctx.stroke();\r\n        } else {\r\n          circleLock = false;\r\n          ctx.lineTo(cStartPoint[0], cStartPoint[1]);\r\n          ctx.stroke();\r\n          arcStack = null;\r\n\r\n          ctx.globalCompositeOperation = 'destination-over';\r\n          ctx.beginPath();\r\n          ctx.lineWidth = lineWidth;\r\n          ctx.arc(radius, radius, bR, 0, 2 * Math.PI, true);\r\n\r\n          ctx.beginPath();\r\n          ctx.save();\r\n          ctx.arc(radius, radius, radius - 3 * lineWidth, 0, 2 * Math.PI, true);\r\n\r\n          ctx.restore();\r\n          ctx.clip();\r\n          ctx.fillStyle = '#1890FF';\r\n        }\r\n      } else {\r\n        if (data >= 0.85) {\r\n          if (currRange > range / 4) {\r\n            const t = range * 0.01;\r\n            currRange -= t;\r\n          }\r\n        } else if (data <= 0.1) {\r\n          if (currRange < range * 1.5) {\r\n            const t = range * 0.01;\r\n            currRange += t;\r\n          }\r\n        } else {\r\n          if (currRange <= range) {\r\n            const t = range * 0.01;\r\n            currRange += t;\r\n          }\r\n          if (currRange >= range) {\r\n            const t = range * 0.01;\r\n            currRange -= t;\r\n          }\r\n        }\r\n        if (data - currData > 0) {\r\n          currData += waveupsp;\r\n        }\r\n        if (data - currData < 0) {\r\n          currData -= waveupsp;\r\n        }\r\n\r\n        sp += 0.07;\r\n        drawSin();\r\n      }\r\n      self.timer = requestAnimationFrame(render);\r\n    }\r\n\r\n    render();\r\n  }\r\n\r\n  uninstall() {}\r\n\r\n  private updateRadio(radio: number) {\r\n    this.renderer.setStyle(\r\n      this.el.nativeElement,\r\n      'transform',\r\n      `scale(${radio})`,\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFlag = true;\r\n    this.cd.detectChanges();\r\n    this.updateRadio(1);\r\n    this.installResizeEvent();\r\n    setTimeout(() => this.resize(), 130);\r\n  }\r\n\r\n  ngOnChanges(\r\n    changes: { [P in keyof this]?: SimpleChange } & SimpleChanges,\r\n  ): void {\r\n    if (this.initFlag) {\r\n      this.cd.detectChanges();\r\n      this.renderChart();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.timer) cancelAnimationFrame(this.timer);\r\n    this.uninstallResizeEvent();\r\n    this.uninstall();\r\n  }\r\n\r\n  // region: resize\r\n\r\n  private autoHideXLabels = false;\r\n  private scroll$: Subscription = null;\r\n  private installResizeEvent() {\r\n    if (this.scroll$) return;\r\n\r\n    this.scroll$ = <any>FromEventObservable.create(window, 'resize')\r\n      .pipe(debounceTime(500))\r\n      .subscribe(() => this.resize());\r\n  }\r\n\r\n  private uninstallResizeEvent() {\r\n    if (this.scroll$) this.scroll$.unsubscribe();\r\n  }\r\n\r\n  resize() {\r\n    const { offsetWidth } = this.el.nativeElement.parentNode;\r\n    this.updateRadio(offsetWidth < this.height ? offsetWidth / this.height : 1);\r\n    this.renderChart();\r\n  }\r\n\r\n  // endregion\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\nimport { G2WaterWaveComponent } from './water-wave.component';\r\n\r\nconst COMPONENTS = [G2WaterWaveComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class AdG2WaterWaveModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: AdG2WaterWaveModule, providers: [] };\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\n// region: all modules\r\nimport { AdErrorCollectModule } from './error-collect/error-collect.module';\r\nimport { AdFooterToolbarModule } from './footer-toolbar/footer-toolbar.module';\r\nimport { AdSidebarNavModule } from './sidebar-nav/sidebar-nav.module';\r\nimport { AdDownFileModule } from './down-file/down-file.module';\r\nimport { AdImageModule } from './image/image.module';\r\nimport { AdAvatarListModule } from './avatar-list/avatar-list.module';\r\nimport { AdDescListModule } from './desc-list/desc-list.module';\r\nimport { AdEllipsisModule } from './ellipsis/ellipsis.module';\r\nimport { AdGlobalFooterModule } from './global-footer/global-footer.module';\r\nimport { AdExceptionModule } from './exception/exception.module';\r\nimport { AdNoticeIconModule } from './notice-icon/notice-icon.module';\r\nimport { AdNumberInfoModule } from './number-info/number-info.module';\r\nimport { AdPageHeaderModule } from './page-header/page-header.module';\r\nimport { AdResultModule } from './result/result.module';\r\nimport { AdStandardFormRowModule } from './standard-form-row/standard-form-row.module';\r\nimport { AdTagSelectModule } from './tag-select/tag-select.module';\r\nimport { AdTrendModule } from './trend/trend.module';\r\nimport { AdCountDownModule } from './count-down/count-down.module';\r\nimport { AdSimpleTableModule } from './simple-table/simple-table.module';\r\nimport { AdReuseTabModule } from './reuse-tab/reuse-tab.module';\r\nimport { AdFullContentModule } from './full-content/full-content.module';\r\nimport { AdXlsxModule } from './xlsx/xlsx.module';\r\nimport { AdZipModule } from './zip/zip.module';\r\nimport { AdNumberToChineseModule } from './number-to-chinese/number-to-chinese.module';\r\nimport { AdLodopModule } from './lodop/lodop.module';\r\nimport { AdQuickMenuModule } from './quick-menu/quick-menu.module';\r\nimport { AdQRModule } from './qr/qr.module';\r\n// charts\r\nimport { AdG2BarModule } from './charts/bar/bar.module';\r\nimport { AdG2CardModule } from './charts/card/card.module';\r\nimport { AdG2ChartModule } from './charts/chart/chart.module';\r\nimport { AdG2GaugeModule } from './charts/gauge/gauge.module';\r\nimport { AdG2MiniAreaModule } from './charts/mini-area/mini-area.module';\r\nimport { AdG2MiniBarModule } from './charts/mini-bar/mini-bar.module';\r\nimport { AdG2MiniProgressModule } from './charts/mini-progress/mini-progress.module';\r\nimport { AdG2PieModule } from './charts/pie/pie.module';\r\nimport { AdG2RadarModule } from './charts/radar/radar.module';\r\nimport { AdG2TagCloudModule } from './charts/tag-cloud/tag-cloud.module';\r\nimport { AdG2TimelineModule } from './charts/timeline/timeline.module';\r\nimport { AdG2WaterWaveModule } from './charts/water-wave/water-wave.module';\r\n\r\nconst MODULES = [\r\n  AdErrorCollectModule,\r\n  AdFooterToolbarModule,\r\n  AdSidebarNavModule,\r\n  AdDownFileModule,\r\n  AdImageModule,\r\n  AdAvatarListModule,\r\n  AdDescListModule,\r\n  AdEllipsisModule,\r\n  AdGlobalFooterModule,\r\n  AdExceptionModule,\r\n  AdNoticeIconModule,\r\n  AdNumberInfoModule,\r\n  AdPageHeaderModule,\r\n  AdResultModule,\r\n  AdStandardFormRowModule,\r\n  AdTagSelectModule,\r\n  AdTrendModule,\r\n  AdCountDownModule,\r\n  AdSimpleTableModule,\r\n  AdReuseTabModule,\r\n  AdFullContentModule,\r\n  AdXlsxModule,\r\n  AdZipModule,\r\n  AdNumberToChineseModule,\r\n  AdLodopModule,\r\n  AdQuickMenuModule,\r\n  AdQRModule,\r\n  // charts\r\n  AdG2BarModule,\r\n  AdG2CardModule,\r\n  AdG2ChartModule,\r\n  AdG2GaugeModule,\r\n  AdG2MiniAreaModule,\r\n  AdG2MiniBarModule,\r\n  AdG2MiniProgressModule,\r\n  AdG2PieModule,\r\n  AdG2RadarModule,\r\n  AdG2TagCloudModule,\r\n  AdG2TimelineModule,\r\n  AdG2WaterWaveModule,\r\n];\r\n\r\n// endregion\r\n\r\n@NgModule({\r\n  imports: [\r\n    AdErrorCollectModule.forRoot(),\r\n    AdFooterToolbarModule.forRoot(),\r\n    AdSidebarNavModule.forRoot(),\r\n    AdDownFileModule.forRoot(),\r\n    AdImageModule.forRoot(),\r\n    AdAvatarListModule.forRoot(),\r\n    AdDescListModule.forRoot(),\r\n    AdEllipsisModule.forRoot(),\r\n    AdExceptionModule.forRoot(),\r\n    AdExceptionModule.forRoot(),\r\n    AdNoticeIconModule.forRoot(),\r\n    AdNumberInfoModule.forRoot(),\r\n    AdPageHeaderModule.forRoot(),\r\n    AdResultModule.forRoot(),\r\n    AdStandardFormRowModule.forRoot(),\r\n    AdTagSelectModule.forRoot(),\r\n    AdTrendModule.forRoot(),\r\n    AdCountDownModule.forRoot(),\r\n    AdSimpleTableModule.forRoot(),\r\n    AdReuseTabModule.forRoot(),\r\n    AdFullContentModule.forRoot(),\r\n    AdXlsxModule.forRoot(),\r\n    AdZipModule.forRoot(),\r\n    AdNumberToChineseModule.forRoot(),\r\n    AdLodopModule.forRoot(),\r\n    AdQuickMenuModule.forRoot(),\r\n    AdQRModule.forRoot(),\r\n    // charts\r\n    AdG2BarModule.forRoot(),\r\n    AdG2CardModule.forRoot(),\r\n    AdG2ChartModule.forRoot(),\r\n    AdG2GaugeModule.forRoot(),\r\n    AdG2MiniAreaModule.forRoot(),\r\n    AdG2MiniBarModule.forRoot(),\r\n    AdG2MiniProgressModule.forRoot(),\r\n    AdG2PieModule.forRoot(),\r\n    AdG2RadarModule.forRoot(),\r\n    AdG2TagCloudModule.forRoot(),\r\n    AdG2TimelineModule.forRoot(),\r\n    AdG2WaterWaveModule.forRoot(),\r\n  ],\r\n  exports: MODULES,\r\n})\r\nexport class DelonABCRootModule {}\r\n\r\n@NgModule({ exports: MODULES })\r\nexport class DelonABCModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: DelonABCRootModule };\r\n  }\r\n}\r\n","import { RouteReuseStrategy, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { ReuseTabService } from './reuse-tab.service';\r\n\r\nexport class ReuseTabStrategy implements RouteReuseStrategy {\r\n  constructor(private srv: ReuseTabService) {}\r\n\r\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\r\n    return this.srv.shouldDetach(route);\r\n  }\r\n  store(route: ActivatedRouteSnapshot, handle: {}): void {\r\n    this.srv.store(route, handle);\r\n  }\r\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\r\n    return this.srv.shouldAttach(route);\r\n  }\r\n  retrieve(route: ActivatedRouteSnapshot): {} {\r\n    return this.srv.retrieve(route);\r\n  }\r\n  shouldReuseRoute(\r\n    future: ActivatedRouteSnapshot,\r\n    curr: ActivatedRouteSnapshot,\r\n  ): boolean {\r\n    return this.srv.shouldReuseRoute(future, curr);\r\n  }\r\n}\r\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","Injectable","cog","el","renderer","cd","doc","this","ErrorCollectComponent","_freq","value","coerceNumberProperty","_offsetTop","formEl","querySelectorAll","count","errEls","_hiden","markForCheck","els","findParent","scrollIntoView","documentElement","scrollTop","offsetTop","uninstall","$time","setInterval","_this","update","freq","clearInterval","selector","retEl","querySelector","parentElement","nativeElement","Error","classList","add","install","Component","template","changeDetection","ChangeDetectionStrategy","OnPush","preserveWhitespaces","AdErrorCollectConfig","ElementRef","Renderer2","ChangeDetectorRef","Inject","DOCUMENT","Input","HostBinding","HostListener","COMPONENTS","AdErrorCollectModule","ngModule","providers","NgModule","imports","CommonModule","declarations","exports","CLS","FooterToolbarComponent","_errorCollect","coerceBooleanProperty","addClass","remove","ContentChild","AdFooterToolbarModule","SHOWCLS","FLOATINGCLS","menuSrv","settings","router","locationStrategy","render","EventEmitter","rootEl","SidebarNavComponent","bodyEl","openedByUrl","url","genFloatingContainer","change$","change","subscribe","res","list","detectChanges","installUnderPad","e","stopPropagation","preventDefault","linkNode","nodeName","getAttribute","startsWith","slice","baseHerf","getBaseHref","navigateByUrl","onSelect","getPathByUrl","pop","hideAll","floatingEl","removeEventListener","floatingAreaClickHandle","bind","parentNode","removeChild","clearFloatingContainer","createElement","addEventListener","appendChild","item","id","node","nextElementSibling","cloneNode","allNode","rect","getBoundingClientRect","Math","max","top","left","right","style","layout","collapsed","subNode","genSubNode","calPos","select","emit","visit","pItem","_open","__parent","unsubscribe","route$","autoCloseUnderPad","events","pipe","filter","NavigationEnd","underPad","window","innerWidth","setLayout","MenuService","SettingsService","Router","LocationStrategy","Output","AdSidebarNavModule","RouterModule","NgZorroAntdModule","http","DownFileDirective","disabled","request","httpMethod","httpUrl","params","httpData","responseType","observe","status","body","size","error","fileName","headers","get","saveAs","decodeURI","success","err","Directive","HttpClient","DIRECTIVES","AdDownFileModule","DEF","deepCopy","ImageDirective","updateError","inited","changes","newSrc","src","includes","arr","split","toString","join","isHttp","isHttps","substr","setAttribute","AdImageConfig","AdImageModule","DelonUtilModule","AvatarListComponent","_size","_avatarSize","host","[class.ad-avatar-list]","ContentChildren","AvatarListItemComponent","ZORROMODULES","AdAvatarListModule","DescListItemComponent","TemplateRef","_term","_termTpl","ViewChild","DescListComponent","_title","_titleTpl","_gutter","_col","_classMap","forEach","cls","removeClass","push","responsive","1","xs","2","sm","3","md","4","col","_xs","_sm","_md","setClass","setResponsive","[class.ad-desc-list]","AdDescListConfig","AdDescListModule","EllipsisComponent","_lines","[class.ad-ellipsis]","AdEllipsisModule","[class.ad-global-footer]","GlobalFooterComponent","AdGlobalFooterModule","ExceptionComponent","403","img","title","desc","404","500","_img","_desc","[class.ad-exception]","AdExceptionModule","NoticeIconComponent","_count","_loading","_popoverVisible","result","popoverVisibleChange","clear","[class.ad-notice-icon]","NoticeIconTabComponent","data","AdNoticeIconModule","NumberInfoComponent","_subTitle","_subTitleTpl","_total","_totalTpl","_subTotal","_subTotalTpl","_isSubTotal","_gap","theme","v","[class.ad-number-info]","AdNumberInfoModule","route","i18nSrv","PageHeaderComponent","_autoBreadcrumb","breadcrumb","autoBreadcrumb","menus","paths","hideInBreadcrumb","text","i18n","fanyi","link","home","splice","home_i18n","home_link","isEmpty","conTpl","removeAttribute","genBreadcrumb","checkContent","firstChange","[class.content__title]","[class.ad-page-header]","AdPageHeaderConfig","Optional","ALAIN_I18N_TOKEN","AdPageHeaderModule","ResultComponent","_type","_icon","_description","_descriptionTpl","_extra","_extraTpl","[class.ad-result]","AdResultModule","StandardFormRowComponent","_block","_last","_grid","block","grid","last","[class.ad-standard-form-row]","AdStandardFormRowModule","TagSelectComponent","_expandable","expand","[class.ad-tag-select]","AdTagSelectModule","TrendComponent","_colorful","[class.ad-trend]","[class.grey]","AdTrendModule","CountDownComponent","config","stopTime","addSeconds","Date","valueOf","format","begin","time","notify","end","AdCountDownModule","CountdownModule","DA_XLSX_CONFIG","InjectionToken","lazy","XlsxService","modules","load","concat","wb","ret","SheetNames","name","sheet","Sheets","XLSX","utils","sheet_to_json","header","fileOrUrl","Promise","resolver","reject","init","then","reader","FileReader","onload","read","target","type","readAsArrayBuffer","Uint8Array","options","book_new","Array","isArray","sheets","index","ws","aoa_to_sheet","book_append_sheet","keys","callback","wbout","write","bookType","opts","Blob","filename","LazyService","xlsxSrv","SimpleTableExport","val","deepGet","ynTruth","ynYes","ynNo","opt","sheetname","colData","_c","w","exported","buttons","cc","dc","_d","String","fromCharCode","j","_stGet","genSheet","export","defConfig","exportSrv","acl","modal","currenty","date","yn","number","pi","ps","total","SimpleTableComponent","_reqReName","_resReName","cur","_ps","_pi","_showPagination","_loadingDelay","_bordered","_showSizeChanger","_showQuickJumper","range","replace","_isPageIndexReset","_toTopInChange","_toTopOffset","_multiSort","reqReName","_a","extraParams","getReqSortMap","getReqFilterMap","reqMehtod","_url","reqBody","reqHeaders","map","resReName","retTotal","_change","_inited","_genAjax","_genData","_toTop","forceRefresh","_isAjax","loading","getAjaxData","_subscribeData","reqError","sorterFn","getSorterFn","recursiveSort","_columns","filters","c","values","checked","onFilter","record","some","isPageIndexReset","maxPageIndex","ceil","_isPagination","showPagination","toTopInChange","scroll","scrollTo","toTopOffset","default","transform","numberDigits","dateFormat","click","urlOrData","of","data$","tap","preDataChange","_data","_refCheck","_sortOrder","multiSort","_sortMap","key","column","sortReName","mapData","_sortIndex","_sortColumn","childrenColumnName","sort","sorter","a","b","sortChange","filtered","f","obj","filterReName","filterKey","findIndex","filterChange","handleFilter","_checkAll","_allChecked","_checkNotify","validData","checkedList","allUnChecked","every","_indeterminate","row","checkboxChange","radioChange","idx","list_1","_i","if","children","btnCoerceIf","btn","paramName","modalParamsName","component","modalOptions","btnCallback","reload","fixed","width","getDataObs","updateColumns","processData","pagePlacement","columns","checkboxCount","radioCount","sortMap","newColumns","copyColumens_1","can","indexKey","selections","className","currency","enabled","sortKey","filterMultiple","filterConfirmText","filterClearText","filterIcon","_b","popTitle","fixedCoerce","[class.ad-st]","CNCurrencyPipe","DatePipe","YNPipe","DecimalPipe","AdSimpleTableConfig","ACLService","ModalHelper","templateRef","table","SimpleTableRowDirective","find","AdSimpleTableModule","schemas","NO_ERRORS_SCHEMA","FormsModule","injector","menuService","ReuseTabMatchMode","Menu","BehaviorSubject","ReuseTabService","_max","min","_cached","_mode","_debug","_excludes","_cachedChange","asObservable","curUrl","getUrl","ActivatedRoute","snapshot","_titleCached","di","next","active","includeNonCloseable","closable","destroy","_handle","removeUrlBuffer","start","position","menu","mode","URL","getMenu","_closableCached","firstChild","getTruthRoute","segments","parent","reverse","reuse","r","test","componentRef","args","debug","console","warn","method","comp","instance","routeConfig","loadChildren","hasInValidRoute","_snapshot","shift","getTitle","getClosable","runHook","future","curr","path","indexOf","Injector","ReuseTabContextMenuComponent","_i18n","close","closeOther","closeRight","event","ctrlKey","button","overlay","Subject","ReuseTabContextService","ref","detach","dispose","context","fakeElement","bottom","clientY","height","clientX","positionStrategy","connectedTo","originX","originY","overlayX","overlayY","withFallbackPosition","create","panelClass","scrollStrategy","scrollStrategies","attach","ComponentPortal","sub$","Subscription","onDestroy","Overlay","srv","evt","combineLatest","genList","i18n$","ReuseTabComponent","_allowClose","_fixed","_showCurrent","isClosed","beforeClosePos","ls","items","genTit","allowClose","showCurrent","url_1","pos","snapshotTrue","to","refStatus","visibility","setStyle","_close","bodyCls","excludes","show","open","ReuseTabContextComponent","ReuseTabContextDirective","NOEXPORTS","AdReuseTabModule","OverlayModule","entryComponents","FullContentService","share","fsCls","hideTitleCls","random","substring","FullContentComponent","_fullscreen","_hideTitle","_padding","installResizeEvent","srv$","toggle","ActivationStart","ActivationEnd","debounceTime","document","updateFsCls","setTimeout","updateHeight","fullscreen","hideTitle","fullscreenChange","_height","padding","uninstallResizeEvent","scroll$","FromEventObservable","[class.ad-full-content]","FullContentToggleDirective","AdFullContentModule","XlsxDirective","AdXlsxModule","provide","useValue","DA_ZIP_CONFIG","ZipService","zip","resolve","JSZip","loadAsync","readAsBinaryString","zipFile","check","file","generateAsync","AdZipModule","rmb","minusSymbol","validThrow","integer","decimal","symbol","unit","num","radice","dec","toFixed","integerRes","integerCount","cnDesc","cnZero","isEmpptyUnit","descMark","cnNum","decimalRes","decimalCount","NumberToChinesePipe","numberToChinese","Pipe","PIPES","AdNumberToChineseModule","defCog","scriptSrv","LodopService","_cog","companyName","checkMaxCount","_events","_lodop","pending","onResolve","_init","ok","lodop","checkStatus","webskt","readyState","SET_LICENSES","license","licenseA","licenseB","GET_PRINTER_COUNT","GET_PRINTER_NAME","code","contextObj","parser","line","exec","trim","fn","Function","match","apply","tid","PRINT_DESIGN","On_Return","taskID","printBuffer","attachCode","PRINT","printDo","AdLodopConfig","AdLodopModule","QuickMenuComponent","ctrlStyle","background-color","bgColor","border-color","borderColor","initFlag","[class.ad-quick-menu]","AdQuickMenuModule","AdQRConfig","qr","QRious","QRService","set","background","backgroundAlpha","foreground","foregroundAlpha","level","dataURL","toDataURL","QRComponent","refresh","mime","[class.ad-qr]","AdQRModule","G2BarComponent","_autoLabel","innerHTML","autoHideXLabels","chart","G2","Chart","container","forceFit","legend","axis","tickLine","source","x","y","tooltip","showTitle","interval","color","repaint","resize","autoLabel","clientWidth","AdG2BarModule","G2CardComponent","_avatar","_avatarTpl","_action","_actionTpl","_orgHeight","_footer","_footerTpl","[class.ad-g2-card]","AdG2CardModule","G2ChartComponent","_resizeTime","renderChart","resizeTime","resize$","AdG2ChartModule","G2GaugeComponent","_percent","percent","guide","createData","arc","zIndex","stroke","lineWidth","changeData","Shape","registerShape","drawShape","cfg","group","point","points","parsePoint","center","addShape","attrs","x1","y1","x2","y2","lineCap","origin","_origin","textAlign","fontSize","fill","coord","startAngle","PI","endAngle","scale","nice","tickCount","label","offset","formatter","generatePoints","shape","draw","AdG2GaugeModule","G2MiniAreaComponent","_borderWidth","_fit","_line","_animate","fit","animate","xAxis","yAxis","dataConfig","hideMarkders","g2-tooltip","g2-tooltip-list-item","margin","view","area","fillOpacity","view2","borderWidth","AdG2MiniAreaModule","G2MiniBarComponent","crosshairs","AdG2MiniBarModule","G2ProgressComponent","_target","_strokeWidth","[class.ad-g2-progress]","AdG2MiniProgressModule","G2PieComponent","_hasLegend","_legendBlock","_tooltip","_lineWidth","_select","formatColor","itemTpl","dv","DataSet","DataView","field","dimension","as","innerRadius","inner","intervalStack","colors","hasLegend","legendData","getAllGeoms","_attrs","dataArray","legendBlock","[class.ad-pie]","AdG2PieModule","G2RadarComponent","_tickCount","labelOffset","labels","lineDash","reduce","[class.ad-radar]","AdG2RadarModule","G2TagCloudComponent","opacity","rotate","fontFamily","font","textBaseline","View","offsetWidth","fields","timeInterval","d","reflect","initTagCloud","AdG2TagCloudModule","G2TimelineComponent","sliderNode","ds","state","createView","getTime","mask","alias","titleMap","custom","clickable","colorMap","sliderPadding","slider","Slider","scales","backgroundChart","onChange","startValue","endValue","setState","AdG2TimelineModule","G2WaterWaveComponent","self","canvas","ctx","getContext","canvasWidth","canvasHeight","radius","cR","beginPath","axisLength","currRange","xOffset","sp","currData","waveupsp","arcStack","bR","circleOffset","circleLock","cos","sin","cStartPoint","strokeStyle","moveTo","clearRect","temp","lineTo","globalCompositeOperation","save","restore","clip","fillStyle","sinStack","dx","dy","startPoint","gradient","createLinearGradient","addColorStop","drawSin","timer","requestAnimationFrame","radio","updateRadio","cancelAnimationFrame","[class.ad-water-wave]","AdG2WaterWaveModule","MODULES","forRoot","DelonABCModule","DelonABCRootModule","ReuseTabStrategy","shouldDetach","handle","store","shouldAttach","retrieve","shouldReuseRoute"],"mappings":"k2DA0BA,IAAWA,EAAWC,OAAOC,QAAU,SAAkBC,GACrD,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,IAE9E,OAAON,uCCxBO,mBAIK,+BATtBU,iCCuDC,WACEC,EACQC,EACAC,EACAC,EACkBC,GAHlBC,QAAAJ,EACAI,cAAAH,EACAG,QAAAF,EACkBE,SAAAD,aA9BZ,gBAUA,oBASK,iBAEiB,aAE9B,EASNjB,OAAOC,OAAOiB,KAAML,gCA5BlBM,mCACF,OAAOD,KAAKE,WAEd,SAASC,GACPH,KAAKE,MAAQE,uBAAqBD,0DAKhCF,wCACF,OAAOD,KAAKK,gBAEd,SAAcF,GACZH,KAAKK,WAAaD,uBAAqBD,0DAkB7BF,qCACV,OAAOD,KAAKM,OAAOC,iBAAiB,+CAG9BN,8BACN,IAAMO,EAAQR,KAAKS,OAAOpB,OACtBmB,IAAUR,KAAKQ,QACnBR,KAAKQ,MAAQA,EACbR,KAAKU,OAAmB,IAAVF,EACdR,KAAKF,GAAGa,iBAIVV,8BACE,GAAmB,IAAfD,KAAKQ,MAAa,OAAO,EAE7B,IAAMI,EAAMZ,KAAKS,QACET,KAAKa,WAAWD,EAAI,GAAI,sBAAwBA,EAAI,IAC5DE,gBAAe,GAE1Bd,KAAKD,IAAIgB,gBAAgBC,WAAahB,KAAKiB,WAGrChB,0CACND,KAAKkB,YACLlB,KAAKmB,MAAQC,YAAY,WAAM,OAAAC,EAAKC,UAAUtB,KAAKuB,MACnDvB,KAAKsB,UAGCrB,iCACNuB,cAAcxB,KAAKmB,QAGblB,gCAAWL,EAAS6B,GAE1B,IADA,IAAIC,EAAQ,KACL9B,GAAI,CACT,GAAIA,EAAG+B,cAAcF,GAAW,CAC9BC,EAAQ9B,EACR,MAEFA,EAAKA,EAAGgC,cAEV,OAAOF,GAGTzB,qBAAA,WAEE,GADAD,KAAKM,OAASN,KAAKa,WAAWb,KAAKJ,GAAGiC,cAAe,QACjC,OAAhB7B,KAAKM,OAAiB,MAAM,IAAIwB,MAAM,iBACzC9B,KAAKJ,iBAAiCmC,UAAUC,IAC/C,gBACA,QACA,aACA,SAEFhC,KAAKiC,WAGPhC,wBAAA,WACED,KAAKkB,iCAtGRgB,kBAAU,CACTT,SAAU,iCACVU,SAAU,iGAGVC,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,+CAZdC,SAVPC,oBACAC,mBAIAC,oDAkDGC,eAAOC,+CA3BTC,2BASAA,wBASAC,oBAAY,gCA0BZC,qBAAa,iBCzEVC,EAAa,CAAChD,qCAQXiD,UAAP,WACE,MAAO,CACLC,SAAUD,EACVE,UAAW,CAACZ,yBATjBa,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,UAClBQ,QAAaR,mBCETS,EAAM,iCAyBV,WACU9D,EACAC,EACkBE,GAFlBC,QAAAJ,EACAI,cAAAH,EACkBG,SAAAD,sBAPJ,+BANpB4D,2CACF,OAAO3D,KAAK4D,mBAEd,SAAiBzD,GACfH,KAAK4D,cAAgBC,wBAAsB1D,oCAY7CwD,qBAAA,WACG3D,KAAKJ,iBAAiCmC,UAAUC,IAAI0B,GACrD1D,KAAKH,SAASiE,SAAS9D,KAAKJ,GAAGiC,cAAe6B,GAC9C1D,KAAKD,IAAI4B,cAAc,QAAQI,UAAUC,IAAI,OAAO0B,IAGtDC,wBAAA,WACE3D,KAAKD,IAAI4B,cAAc,QAAQI,UAAUgC,OAAO,OAAOL,wBApC1DxB,kBAAU,CACTT,SAAU,iBACVU,SAAU,mOAOVI,qBAAqB,+CAfdE,oBAAYC,4CAgChBE,eAAOC,uDAdTC,uBASAkB,qBAAa,iBC9BVf,EAAa,CAACU,qCAQXM,UAAP,WACE,MAAO,CAAEd,SAAUc,EAAuBb,UAAW,yBAPxDC,iBAAS,CACRC,QAAS,CAACC,eAAcL,GACxBM,aAAkBP,UAClBQ,QAAaR,mBCYTiB,EAAU,oBACVC,EAAc,4BAoBlB,WACUC,EACDC,EACCC,EACAC,EACAC,EACA1E,EACkBC,EAC1BH,GAPQI,aAAAoE,EACDpE,cAAAqE,EACCrE,YAAAsE,EACAtE,sBAAAuE,EACAvE,YAAAwE,EACAxE,QAAAF,EACkBE,SAAAD,YAdd,2BAGe,cAEV,IAAI0E,eAYrBzE,KAAK0E,OAAS9E,EAAkC,qBAGlD+E,qBAAA,WAAA,WACE3E,KAAK4E,OAAS5E,KAAKD,IAAI4B,cAAc,QACrC3B,KAAKoE,QAAQS,YAAY7E,KAAKsE,OAAOQ,KACrC9E,KAAK+E,uBACL/E,KAAKgF,QAAehF,KAAKoE,QAAQa,OAAOC,UAAU,SAAAC,GAChD9D,EAAK+D,KAAOD,EACZ9D,EAAKvB,GAAGuF,kBAEVrF,KAAKsF,mBAGCX,6CAAwBY,GAC9BA,EAAEC,kBACFD,EAAEE,iBACF,IAAMC,EAAWH,EAAmB,OACpC,GAA0B,MAAtBG,EAASC,SACX,OAAO,EAET,IAAIb,EAAcY,EAASE,aAAa,QACpCd,GAAOA,EAAIe,WAAW,OACxBf,EAAMA,EAAIgB,MAAM,IAGlB,IAAMC,EAAW/F,KAAKuE,iBAAiByB,cAOvC,OANID,IACFjB,EAAMA,EAAIgB,MAAMC,EAAS1G,SAE3BW,KAAKsE,OAAO2B,cAAcnB,GAC1B9E,KAAKkG,SAASlG,KAAKoE,QAAQ+B,aAAarB,GAAKsB,OAC7CpG,KAAKqG,WACE,GAGT1B,mCAAA,WACO3E,KAAKsG,aACVtG,KAAKsG,WAAWC,oBACd,QACAvG,KAAKwG,wBAAwBC,KAAKzG,OAGhCA,KAAKsG,WAAW9G,eAAe,UACjCQ,KAAKsG,WAAWvC,SACP/D,KAAKsG,WAAWI,YACzB1G,KAAKsG,WAAWI,WAAWC,YAAY3G,KAAKsG,cAIhD3B,iCAAA,WACE3E,KAAK4G,yBACL5G,KAAKsG,WAAatG,KAAKwE,OAAOqC,cAAc,OAC5C7G,KAAKsG,WAAWvE,UAAUC,IAAImC,EAAc,cAC5CnE,KAAKsG,WAAWQ,iBACd,QACA9G,KAAKwG,wBAAwBC,KAAKzG,OAClC,GAEFA,KAAK4E,OAAOmC,YAAY/G,KAAKsG,aAGvB3B,gCAAWe,EAA2BsB,GAC5C,IAAMC,EAAK,gBAAgBD,OACrBE,EAAOxB,EAASyB,mBAAmBC,WACvC,GAYF,OAVAF,EAAKD,GAAKA,EACVC,EAAKnF,UAAUC,IAAImC,GACnB+C,EAAKJ,iBACH,aACA,WACEI,EAAKnF,UAAUgC,OAAOG,KAExB,GAEFlE,KAAKsG,WAAWS,YAAYG,GACrBA,GAGDvC,+BAEN,IADA,IAAM0C,EAAUrH,KAAKsG,WAAW/F,iBAAiB,IAAM4D,GAC9CjF,EAAI,EAAGA,EAAImI,EAAQhI,OAAQH,IAClCmI,EAAQnI,GAAG6C,UAAUgC,OAAOG,IAKxBS,4BAAOe,EAA2BwB,GACxC,IAAMI,EAAO5B,EAAS6B,wBAEhBvG,EAAYwG,KAAKC,IACrBzH,KAAKD,IAAIgB,gBAAgBC,UACzBhB,KAAK4E,OAAO5D,WAER0G,EAAMJ,EAAKI,IAAM1G,EACrB2G,EAAOL,EAAKM,MAAQ,EACtBV,EAAKW,MAAMH,IAASA,OACpBR,EAAKW,MAAMF,KAAUA,QAGvBhD,wBAAA,SAAYY,EAAeyB,GACzB,IAAuC,IAAnChH,KAAKqE,SAASyD,OAAOC,UAAzB,CAGAxC,EAAEE,iBACF,IAAMC,EAAWH,EAAmB,OACpCvF,KAAK+E,uBACL,IAAMiD,EAAUhI,KAAKiI,aAAwCjB,GAC7DhH,KAAKqG,UACL2B,EAAQjG,UAAUC,IAAIkC,GACtBlE,KAAKkI,SAAoCF,KAG3CrD,qBAAA,SAASqC,GACPhH,KAAKmI,OAAOC,KAAKpB,IAGnBrC,uBAAA,SAAWqC,GACThH,KAAKoE,QAAQiE,MAAM,SAACnJ,EAAGI,GACjBJ,IAAM8H,IAAM9H,SAAU,KAG5B,IADA,IAAIoJ,EAAQtB,WACLsB,GACLA,EAAMC,OAAQ,EACdD,EAAQA,EAAME,SAEhBxB,EAAKuB,OAASvB,EAAKuB,MACnBvI,KAAKF,GAAGa,gBAIVgE,+BACE3E,KAAKqG,WAGP1B,wBAAA,WACE3E,KAAKgF,QAAQyD,cACTzI,KAAK0I,QAAQ1I,KAAK0I,OAAOD,cAC7BzI,KAAK4G,0BAMCjC,kDACD3E,KAAK2I,oBACV3I,KAAK0I,OAAc1I,KAAKsE,OAAOsE,OAC5BC,KAAKC,SAAO,SAAAvD,GAAK,OAAAA,aAAawD,mBAC9B7D,UAAU,SAAAjG,GAAK,OAAAoC,EAAK2H,aACvBhJ,KAAKgJ,aAGCrE,gCACFsE,OAAOC,WAAa,MAAQlJ,KAAKqE,SAASyD,OAAOC,WACnD/H,KAAKqE,SAAS8E,UAAU,aAAa,wBAvL1CjH,kBAAU,CACTT,SAAU,cACVU,SAAU,4vGACVC,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,+CAXd6G,qBAAaC,yBALbC,gBACUC,0BAZjB7G,mBAMAC,oDA0CGC,eAAOC,qBAjDVJ,2DAsCCK,wBAEA0G,0BA+IAxG,qBAAa,iBAAkB,CAAC,4DC5K1ByG,UAAP,WACE,MAAO,CAAEtG,SAAUsG,EAAoBrG,UAAW,yBAPrDC,iBAAS,CACRC,QAAS,CAACC,eAAcmG,eAAcC,qBACtCnG,aAAc,CAACmB,GACflB,QAAS,CAACkB,yBCuBV,WAAoB/E,EAAwBgK,GAAxB5J,QAAAJ,EAAwBI,UAAA4J,kBAVD,mBAMJ,IAAInF,0BAEN,IAAIA,sBAKzCoF,yCACE7J,KAAKJ,GAAGiC,cAAciI,UAAW,EACjC9J,KAAK4J,KACFG,QAAQ/J,KAAKgK,WAAYhK,KAAKiK,QAAS,CACtCC,OAAQlK,KAAKmK,UAAY,GACzBC,aAAc,OACdC,QAAS,aAEVnF,UACC,SAACC,GACC,GAAmB,MAAfA,EAAImF,QAAkBnF,EAAIoF,KAAKC,MAAQ,EACzCnJ,EAAKoJ,MAAMrC,KAAKjD,OADlB,CAIA,IAAMuF,EACJrJ,EAAKqJ,UACLvF,EAAIwF,QAAQC,IAAI,aAChBzF,EAAIwF,QAAQC,IAAI,cAClBC,SAAO1F,EAAIoF,KAAMO,UAAUJ,IAC3BrJ,EAAK0J,QAAQ3C,KAAKjD,GAClB9D,EAAKzB,GAAGiC,cAAciI,UAAW,IAEnC,SAAAkB,GACE3J,EAAKoJ,MAAMrC,KAAK4C,GAChB3J,EAAKzB,GAAGiC,cAAciI,UAAW,yBA1C1CmB,kBAAU,CAAExJ,SAAU,2DAhBrBgB,oBAMqByI,kDAapBpI,cAAM,iCAENA,cAAM,gCAENA,cAAM,8BAENA,cAAM,8BAEN0G,wBAEAA,yBAIAxG,qBAAa,iBC9BVmI,EAAa,CAACtB,qCAQXuB,UAAP,WACE,MAAO,CAAEjI,SAAUiI,EAAkBhI,UAAW,yBAPnDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkB2H,UAClB1H,QAAa0H,uDCHG,cAKC,mDAVlBzL,iCC2BC,WACUE,EACA4E,EACR6G,GAFQrL,QAAAJ,EACAI,YAAAwE,YARM,cAEC,qCAEA,EAOf1F,OAAOC,OAAOiB,KAAMsL,WAASD,WAG/BE,qBAAA,WACEvL,KAAKsB,SACLtB,KAAKwL,cACLxL,KAAKyL,QAAS,GAGhBF,wBAAA,SACEG,GAEI1L,KAAKyL,SACHC,EAAQjB,MAAOzK,KAAKwL,cACnBxL,KAAKsB,WAINiK,8BACN,IAAII,EAAS3L,KAAK4L,IAGlB,GAAID,EAAOE,SAAS,YAAa,CAC/B,IAAMC,EAAMH,EAAOI,MAAM,KACvBvB,EAAOsB,EAAIA,EAAIzM,OAAS,GAC1ByM,EAAIA,EAAIzM,OAAS,GACN,MAATmL,IAAiBA,IAASxK,KAAKwK,KAAOxK,KAAKwK,KAAKwB,WAAaxB,EAC/DmB,EAASG,EAAIG,KAAK,KAKpB,IAAMC,EAASP,EAAO9F,WAAW,SAC/BsG,EAAUR,EAAO9F,WAAW,WAC1BqG,GAAUC,KAASR,EAASA,EAAOS,OAAOF,EAAS,EAAI,IAI3DlM,KAAKwE,OAAO6H,aAAarM,KAAKJ,GAAGiC,cAAe,MAAO8J,IAGjDJ,mCACNvL,KAAKwE,OAAO6H,aACVrM,KAAKJ,GAAGiC,cACR,UACA,aAAa7B,KAAKyK,iCA5DvBQ,kBAAU,CAAExJ,SAAU,sDAfrBgB,oBACAC,mBAMO4J,kCAUNxJ,cAAM,sBAENA,uBAEAA,gBClBGqI,EAAa,CAACI,qCAQXgB,UAAP,WACE,MAAO,CAAEpJ,SAAUoJ,EAAenJ,UAAW,CAACkJ,yBAPjDjJ,iBAAS,CACRC,QAAS,CAACC,eAAciJ,mBACxBhJ,aAAkB2H,UAClB1H,QAAa0H,yECVdjJ,kBAAU,CACTT,SAAU,uCACVU,SAAU,oCAGTW,sBACAA,sBACAA,sBACAA,qDCSO,oBAEM,gCAGV2J,iCAAKtM,GAEP,OADAH,KAAK0M,MAAkB,YAAVvM,EAAsB,GAAKA,EAChCA,GACN,IAAK,QACL,IAAK,QACL,IAAK,UACHH,KAAK2M,YAAcxM,EACnB,MACF,QACEH,KAAK2M,YAAc,8DA9B1BzK,kBAAU,CACTT,SAAU,cACVU,SAAU,iaAUVyK,KAAM,CAAEC,yBAA0B,QAClCtK,qBAAqB,oCAOpBO,wBAeAgK,wBAAgBC,WChCb9J,EAAa,CAACwJ,EAAqBM,GAMnCC,EAAe,CAACrD,uDAUbsD,UAAP,WACE,MAAO,CAAE9J,SAAU8J,EAAoB7J,UAAW,yBAPrDC,iBAAS,CACRC,SAAUC,uBAAiByJ,GAC3BxJ,aAAkBP,UAClBQ,QAAaR,wDCFL,gCAGJiK,iCAAK/M,GACHA,aAAiBgN,eACnBnN,KAAKoN,MAAQ,KACbpN,KAAKqN,SAAWlN,GACXH,KAAKoN,MAAQjN,uDAtBvB+B,kBAAU,CACTT,SAAU,iBACVU,SAAU,6QAQVI,qBAAqB,oCAOpBO,qBAUAwK,kBAAU,qDCtB0B,yBAKnB,8BAVnB5N,iCCwGC,WACEC,EACQC,EACAC,GADAG,QAAAJ,EACAI,cAAAH,cAxED,gBAoBS,eAE2B,sBAEvC,YACA,YACA,YASS,iBAEO,GAqCpBf,OAAOC,OAAOiB,KAAML,gCAvElB4N,kCAAMpN,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,yDAOnBoN,qCACF,OAAOvN,KAAK0N,aAEd,SAAWvN,GACTH,KAAK0N,QAAUtN,uBAAqBD,0DAWlCoN,kCACF,OAAOvN,KAAK2N,UAEd,SAAQxN,GACNH,KAAK2N,KAAOvN,uBAAqBD,oCAKnCoN,qBAAA,WAAA,WACEvN,KAAK4N,UAAUC,QAAQ,SAAAC,GACrB,OAAAzM,EAAKxB,SAASkO,YAAY1M,EAAKzB,GAAGiC,cAAeiM,KAGnD9N,KAAK4N,UAAY,CAAC,YAAa5N,KAAK8H,QAChC9H,KAAKwK,MAAMxK,KAAK4N,UAAUI,KAAKhO,KAAKwK,MAExCxK,KAAK4N,UAAUC,QAAQ,SAAAC,GACrB,OAAAzM,EAAKxB,SAASiE,SAASzC,EAAKzB,GAAGiC,cAAeiM,MAIlDP,0BAAA,WACE,IAAMU,EAAa,CACjBC,EAAG,CAAEC,GAAI,IACTC,EAAG,CAAED,GAAI,GAAIE,GAAI,IACjBC,EAAG,CAAEH,GAAI,GAAIE,GAAI,GAAIE,GAAI,GACzBC,EAAG,CAAEL,GAAI,GAAIE,GAAI,GAAIE,GAAI,IACd,EAAXvO,KAAKyO,IAAU,EAAIzO,KAAKyO,KAE1BzO,KAAK0O,IAAMT,EAAWE,GACtBnO,KAAK2O,IAAMV,EAAWI,GACtBrO,KAAK4O,IAAMX,EAAWM,IAgBxBhB,qBAAA,WACEvN,KAAK6O,YAGPtB,wBAAA,SACE7B,GAEA1L,KAAK6O,WACDnD,EAAQ+C,KAAKzO,KAAK8O,qCAvGzB5M,kBAAU,CACTT,SAAU,YACVU,SAAU,wWAUVyK,KAAM,CAAEmC,uBAAwB,QAChCxM,qBAAqB,+CAfdyM,SAbPvM,oBACAC,8CAkCCI,sBAQAA,wBAGAA,wBASAA,qBAMAA,wBAoCAgK,wBAAgBI,WC9FbjK,EAAa,CAACsK,EAAmBL,GAMjCF,GAAe,CAACrD,wDAUbsF,UAAP,WACE,MAAO,CAAE9L,SAAU8L,EAAkB7L,UAAW,CAAC4L,yBAPpD3L,iBAAS,CACRC,SAAUC,uBAAiByJ,IAC3BxJ,aAAkBP,UAClBQ,QAAaR,0DCGI,+BANbiM,oCACF,OAAOlP,KAAKmP,YAEd,SAAUhP,GACRH,KAAKmP,OAAS/O,uBAAqBD,wDAbtC+B,kBAAU,CACTT,SAAU,WACVU,SAAU,4BACVyK,KAAM,CAAEwC,sBAAuB,2CAI9BtM,eACAC,oBAAY,oCCXTE,GAAa,CAACiM,uCAQXG,UAAP,WACE,MAAO,CAAElM,SAAUkM,EAAkBjM,UAAW,yBAPnDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,2ECRdf,kBAAU,CACTT,SAAU,gBACVU,SAAU,0OAMVyK,KAAM,CAAE0C,2BAA4B,QACpC/M,qBAAqB,qCAGpBO,gBCRGG,GAAa,CAACsM,uCAQXC,UAAP,WACE,MAAO,CAAErM,SAAUqM,EAAsBpM,UAAW,yBAPvDC,iBAAS,CACRC,QAAS,CAACC,eAAcmG,gBACxBlG,aAAkBP,WAClBQ,QAAaR,yDCcN,eACE,cACD,gCAGJwM,iCAAKtP,GACP,IAAM6G,EAAO,CACX0I,IAAK,CACHC,IACE,sEACFC,MAAO,MACPC,KAAM,eAERC,IAAK,CACHH,IACE,sEACFC,MAAO,MACPC,KAAM,gBAERE,IAAK,CACHJ,IACE,sEACFC,MAAO,MACPC,KAAM,cAER1P,GAEG6G,IAELhH,KAAKgQ,KAAOhJ,EAAK2I,IACjB3P,KAAKwN,OAASxG,EAAK4I,MACnB5P,KAAKiQ,MAAQjJ,EAAK6I,6DAIhBJ,gCAAItP,GACNH,KAAKgQ,KAAO7P,yDAGVsP,kCAAMtP,GACRH,KAAKwN,OAASrN,yDAGZsP,iCAAKtP,GACPH,KAAKiQ,MAAQ9P,uDAnEhB+B,kBAAU,CACTT,SAAU,YACVU,SAAU,qlBAiBVyK,KAAM,CAAEsD,uBAAwB,QAChC3N,qBAAqB,oCAOpBO,qBA8BAA,uBAIAA,sBAIAA,yBAKAkB,qBAAa,mBClEVf,GAAa,CAACwM,IAMdzC,GAAe,CAACrD,wDAUbwG,UAAP,WACE,MAAO,CAAEhN,SAAUgN,EAAmB/M,UAAW,yBAPpDC,iBAAS,CACRC,SAAUC,eAAcmG,uBAAiBsD,IACzCxJ,aAAkBP,WAClBQ,QAAaR,yDCiCiB,kBAoBX,cAEA,IAAIwB,0BACL,IAAIA,qCAUI,4BAEO,IAAIA,4CA/BjC2L,oCACF,OAAOpQ,KAAKqQ,YAEd,SAAUlQ,GACRH,KAAKqQ,OAASjQ,uBAAqBD,0DAMjCiQ,sCACF,OAAOpQ,KAAKsQ,cAEd,SAAYnQ,GACVH,KAAKsQ,SAAWzM,wBAAsB1D,0DASpCiQ,6CACF,OAAOpQ,KAAKuQ,qBAEd,SAAmBpQ,GACjBH,KAAKuQ,gBAAkB1M,wBAAsB1D,oCAM/CiQ,4BAAA,SAAgBI,GACdxQ,KAAKyQ,qBAAqBrI,KAAKoI,IAGjCJ,qBAAA,SAASlR,GACPc,KAAKmI,OAAOC,KAAKlJ,IAGnBkR,oBAAA,SAAQR,GACN5P,KAAK0Q,MAAMtI,KAAKwH,wBA/EnB1N,kBAAU,CACTT,SAAU,cACVU,SAAU,84BA2BVyK,KAAM,CAAE+D,yBAA0B,QAClCpO,qBAAqB,oCAGpBO,uBAGAA,yBAUAA,wBASA0G,wBACAA,iCAGA1G,sCASA0G,wDClDkB,IAAI/E,0BACL,IAAIA,sBAEtBmM,oBAAA,SAAQ5J,GACNhH,KAAKmI,OAAOC,KAAK,CACfwH,MAAO5P,KAAK6Q,KAAKjB,MACjB5I,UAIJ4J,oBAAA,WACE5Q,KAAK0Q,MAAMtI,KAAKpI,KAAK6Q,KAAKjB,4BA7C7B1N,kBAAU,CACTT,SAAU,kBACVU,SAAU,6rCA4BVI,qBAAqB,oCAGpBO,wBACA0G,wBACAA,iBChCGvG,GAAa,CAACmN,IAMdpD,GAAe,CAACrD,wDAUbmH,UAAP,WACE,MAAO,CAAE3N,SAAU2N,EAAoB1N,UAAW,yBAPrDC,iBAAS,CACRC,SAAUC,uBAAiByJ,IAC3BxJ,aAAkBP,WAAY2N,KAC9BnN,QAAaR,kCCiFb,WACUrD,EACAC,EACAC,GAFAE,QAAAJ,EACAI,cAAAH,EACAG,QAAAF,cArED,kBAWG,eAWH,qBAWK,iBACF,cAoBmB,kBAUhB,iBAQO,gCApElBiR,kCAAM5Q,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,yDAOnB4Q,qCAAS5Q,GACPA,aAAiBgN,eACnBnN,KAAKgR,UAAY,KACjBhR,KAAKiR,aAAe9Q,GACfH,KAAKgR,UAAY7Q,yDAOtB4Q,kCAAM5Q,GACJA,aAAiBgN,eACnBnN,KAAKkR,OAAS,KACdlR,KAAKmR,UAAYhR,GACZH,KAAKkR,OAAS,GAAK/Q,yDAQxB4Q,qCAAS5Q,GACPA,aAAiBgN,eACnBnN,KAAKoR,UAAY,KACjBpR,KAAKqR,aAAelR,GACfH,KAAKoR,UAAYjR,EAExBH,KAAKsR,cAAgBnR,yDAcnB4Q,kCACF,OAAO/Q,KAAKuR,UAEd,SAAQpR,GACNH,KAAKuR,KAAOnR,uBAAqBD,oCAWnC4Q,qBAAA,WAAA,WACE/Q,KAAK4N,UAAUC,QAAQ,SAAAC,GACrB,OAAAzM,EAAKxB,SAASkO,YAAY1M,EAAKzB,GAAGiC,cAAeiM,KAGnD9N,KAAK4N,UAAY,CAAC,eACd5N,KAAKwR,OAAOxR,KAAK4N,UAAUI,KAAKhO,KAAKwR,OAEzCxR,KAAK4N,UAAUC,QAAQ,SAAA4D,GACrB,OAAApQ,EAAKxB,SAASiE,SAASzC,EAAKzB,GAAGiC,cAAe4P,KAGhDzR,KAAKF,GAAGuF,iBAGV0L,wBAAA,SACErF,GAEA1L,KAAK6O,gCA7GR3M,kBAAU,CACTT,SAAU,cACVU,SAAU,+sBAWVyK,KAAM,CAAE8E,yBAA0B,QAClCnP,qBAAqB,EACrBH,gBAAiBC,0BAAwBC,oDAzBzCG,oBACAC,mBAIAC,sDA0BCG,0BAWAA,uBAWAA,0BAYAA,wBAWAA,wBAGAA,uBAGAA,qBAGAA,gBCtFGG,GAAa,CAAC8N,uCAQXY,UAAP,WACE,MAAO,CAAExO,SAAUwO,EAAoBvO,UAAW,yBAPrDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,yDCHG,oBAIK,yBAQM,6BAjB5BvD,kCC8FC,WACEC,EACQE,EACA+R,EACYxN,EAGZyN,GALA7R,cAAAH,EACAG,WAAA4R,EACY5R,aAAAoE,EAGZpE,aAAA6R,wBAzBgB,aAEX,GAyBb/S,OAAOC,OAAOiB,KAAML,gCAjClBmS,6CACF,OAAO9R,KAAK+R,qBAEd,SAAmB5R,GACjBH,KAAK+R,gBAAkBlO,wBAAsB1D,oCAgC/C2R,0BAAA,WAAA,WACE,IAAI9R,KAAKgS,YAAehS,KAAKiS,gBAAmBjS,KAAKoE,QAArD,CACA,IAAM8N,EAAQlS,KAAKoE,QAAQ+B,aAAanG,KAAK4R,MAAM9M,KACnD,KAAIoN,EAAM7S,QAAU,GAApB,CACA,IAAM8S,EAAe,GACrBD,EAAMrE,QAAQ,SAAA7G,GACZ,QAAqC,IAA1BA,EAAKoL,mBAAoCpL,EAAKoL,iBAAzD,CAEA,IAAIxC,EAAQ5I,EAAKqL,KACbrL,EAAKsL,MAAQjR,EAAKwQ,UAASjC,EAAQvO,EAAKwQ,QAAQU,MAAMvL,EAAKsL,OAC/DH,EAAMnE,KAAK,CAAE4B,QAAO4C,KAAMxL,EAAKwL,MAAQ,CAACxL,EAAKwL,WAG3CxS,KAAKyS,MACPN,EAAMO,OAAO,EAAG,EAAG,CACjB9C,MACG5P,KAAK2S,WACJ3S,KAAK6R,SACL7R,KAAK6R,QAAQU,MAAMvS,KAAK2S,YAC1B3S,KAAKyS,KACPD,KAAM,CAACxS,KAAK4S,aAGhB5S,KAAKmS,MAAQA,KAGfL,yBAAA,WACMe,UAAQ7S,KAAK8S,OAAOjR,eACtB7B,KAAKH,SAASwM,aAAarM,KAAK8S,OAAOjR,cAAe,SAAU,IAEhE7B,KAAKH,SAASkT,gBAAgB/S,KAAK8S,OAAOjR,cAAe,WAI7DiQ,qBAAA,WACE9R,KAAKgT,iBAGPlB,4BAAA,WACE9R,KAAKiT,gBAGPnB,wBAAA,SACEpG,GAEIA,EAAQuG,iBAAmBvG,EAAQuG,eAAeiB,aACpDlT,KAAKgT,qCAnIV9Q,kBAAU,CACTT,SAAU,cACVU,SAAU,omCAwBVyK,KAAM,CACJuG,yBAA0B,OAC1BC,yBAA0B,QAE5B7Q,qBAAqB,+CAhCd8Q,UAPP3Q,mBAEuB4G,gBAEhBF,gCAkFJkK,6CACAA,kBACA1Q,eAAO2Q,yDA9CTjG,kBAAU,yBAIVxK,sBAEAA,2BAEAA,2BAEAA,gCAKAA,4BAWAkB,qBAAa,4BAEbA,qBAAa,wBAEbA,qBAAa,2BAEbA,qBAAa,0BAEbA,qBAAa,sBAEbA,qBAAa,eCpFVf,GAAa,CAAC6O,IAMd9E,GAAe,CAACrD,wDAUb6J,UAAP,WACE,MAAO,CAAErQ,SAAUqQ,EAAoBpQ,UAAW,CAACiQ,0BAPtDhQ,iBAAS,CACRC,SAAUC,eAAcmG,eAAc8C,0BAAoBQ,IAC1DxJ,aAAkBP,WAClBQ,QAAaR,0DCFL,cACA,eAiBC,qBAUM,eAUN,gCAnCLwQ,iCAAKtT,GAEP,OADAH,KAAK0T,MAAQvT,GAEX,IAAK,UACHH,KAAK2T,MAAQ,eACb,MACF,IAAK,QACH3T,KAAK2T,MAAQ,eACb,MACF,QACE3T,KAAK2T,MAAQxT,0DAQfsT,kCAAMtT,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,yDAMnBsT,wCAAYtT,GACVA,aAAiBgN,eACnBnN,KAAK4T,aAAe,KACpB5T,KAAK6T,gBAAkB1T,GAClBH,KAAK4T,aAAezT,yDAMzBsT,kCAAMtT,GACJA,aAAiBgN,eACnBnN,KAAK8T,OAAS,KACd9T,KAAK+T,UAAY5T,GACZH,KAAK8T,OAAS3T,uDA9DxB+B,kBAAU,CACTT,SAAU,SACVU,SAAU,6hBASVyK,KAAM,CAAEoH,oBAAqB,QAC7BzR,qBAAqB,oCAOpBO,uBAkBAA,6BAUAA,uBAUAA,gBCtDGG,GAAa,CAACwQ,uCAQXQ,UAAP,WACE,MAAO,CAAE9Q,SAAU8Q,EAAgB7Q,UAAW,yBAPjDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,kCC2Cb,WAAoBrD,EAAwBC,GAAxBG,QAAAJ,EAAwBI,cAAAH,iBAEtB,gCA9BlBqU,oCACF,OAAOlU,KAAKmU,YAEd,SAAUhU,GACRH,KAAKmU,OAAStQ,wBAAsB1D,0DAMlC+T,mCACF,OAAOlU,KAAKoU,WAEd,SAASjU,GACPH,KAAKoU,MAAQvQ,wBAAsB1D,0DAMjC+T,mCACF,OAAOlU,KAAKqU,WAEd,SAASlU,GACPH,KAAKqU,MAAQxQ,wBAAsB1D,oCAOrC+T,qBAAA,WAAA,WACElU,KAAK4N,UAAUC,QAAQ,SAAAC,GACrB,OAAAzM,EAAKxB,SAASkO,YAAY1M,EAAKzB,GAAGiC,cAAeiM,KAGnD9N,KAAK4N,UAAY,CAAC,qBACd5N,KAAKsU,OAAOtU,KAAK4N,UAAUI,KAAK,SAChChO,KAAKuU,MAAMvU,KAAK4N,UAAUI,KAAK,QAC/BhO,KAAKwU,MAAMxU,KAAK4N,UAAUI,KAAK,QAEnChO,KAAK4N,UAAUC,QAAQ,SAAA4D,GACrB,OAAApQ,EAAKxB,SAASiE,SAASzC,EAAKzB,GAAGiC,cAAe4P,MAIlDyC,wBAAA,SACExI,GAEA1L,KAAK6O,gCA/DR3M,kBAAU,CACTT,SAAU,oBACVU,SAAU,gIAIVyK,KAAM,CAAE6H,+BAAgC,QACxClS,qBAAqB,+CAfrBE,oBAGAC,8CAeCI,uBAGAA,sBAUAA,sBAUAA,gBCvCGG,GAAa,CAACiR,uCAQXQ,UAAP,WACE,MAAO,CAAEvR,SAAUuR,EAAyBtR,UAAW,yBAP1DC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,iECiBS,eAEkB,cAEE,IAAIwB,4CAV1CkQ,yCACF,OAAO3U,KAAK4U,iBAEd,SAAezU,GACbH,KAAK4U,YAAc/Q,wBAAsB1D,oCAQ3CwU,oBAAA,WACE3U,KAAK6U,QAAU7U,KAAK6U,OACpB7U,KAAKiF,OAAOmD,KAAKpI,KAAK6U,6BA1BzB3S,kBAAU,CACTT,SAAU,aACVU,SAAU,sMAGVyK,KAAM,CAAEkI,wBAAyB,QACjCvS,qBAAqB,0CAIpBQ,oBAAY,2BACZD,wBASAC,oBAAY,kCAEZyG,iBC1BGvG,GAAa,CAAC0R,uCAQXI,UAAP,WACE,MAAO,CAAE5R,SAAU4R,EAAmB3R,UAAW,yBAPpDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,+DCiBO,+BANhB+R,uCACF,OAAOhV,KAAKiV,eAEd,SAAa9U,GACXH,KAAKiV,UAAYpR,wBAAsB1D,wDAtB1C+B,kBAAU,CACTT,SAAU,QACVU,SAAU,iIAIVyK,KAAM,CACJsI,mBAAoB,OACpBC,eAAgB,aAElB5S,qBAAqB,oCAIpBO,0BAGAA,gBCfGG,GAAa,CAAC+R,uCAQXI,UAAP,WACE,MAAO,CAAEjS,SAAUiS,EAAehS,UAAW,yBAPhDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,0DCqBK,IAAIwB,2BACH,IAAIA,wBACP,IAAIA,4CAZhB4Q,mCAAOlV,GACTH,KAAKsV,OAAS,CACZnT,SAAU,iBACVoT,SACmB,iBAAVpV,EACHqV,EAAW,IAAIC,KAAQtV,GAAOuV,UAC9BC,EAAOxV,EAAO,uCAQxBkV,mBAAA,WACErV,KAAK4V,MAAMxN,QAGbiN,oBAAA,SAAQQ,GACN7V,KAAK8V,OAAO1N,KAAKyN,IAGnBR,sBAAA,WACErV,KAAK+V,IAAI3N,4BAxCZlG,kBAAU,CACTT,SAAU,aACVU,SAAU,iKAMVI,qBAAqB,sCAGpBO,wBAKAA,uBAWA0G,yBACAA,sBACAA,iBC3BGvG,GAAa,CAACoS,uCAQXW,UAAP,WACE,MAAO,CAAE7S,SAAU6S,EAAmB5S,UAAW,yBAPpDC,iBAAS,CACRC,QAAS,CAACC,eAAc0S,mBACxBzS,aAAkBP,WAClBQ,QAAaR,oECgBgB,CAAC,GAAI,GAAI,GAAI,GAAI,mBAQf,2CAjChCvD,oBCAYwW,GAAiB,IAAIC,iBAA2B,gCCa3D,WACkCb,EACxB1L,EACAwM,GAFwBpW,YAAAsV,EACxBtV,UAAA4J,EACA5J,UAAAoW,SAGFC,4BACN,IAAMf,EAASxW,OAAOC,OACpB,CACE+F,IAAK,kDACLwR,QAAS,IAEXtW,KAAKsV,QAGP,OAAOtV,KAAKoW,KAAKG,KAAK,CAACjB,EAAOxQ,KAAK0R,OAAOlB,EAAOgB,WAG3CD,0BAAKI,GACX,IAAMC,EAAW,GAKjB,OAJAD,EAAGE,WAAW9I,QAAQ,SAAA+I,GACpB,IAAMC,EAAaJ,EAAGK,OAAOF,GAC7BF,EAAIE,GAAQG,KAAKC,MAAMC,cAAcJ,EAAO,CAAEK,OAAQ,MAEjDR,GAITL,mBAAA,SAAOc,GAAP,WACE,OAAO,IAAIC,QAAoC,SAACC,EAAUC,GACxDjW,EAAKkW,OAAOC,KAAK,WAEf,GAAyB,iBAAdL,EAAX,CAeA,IAAMM,EAAqB,IAAIC,WAC/BD,EAAOE,OAAS,SAACpS,GACf,IAAMkR,EAAUM,KAAKa,KAAKrS,EAAEsS,OAAOrH,OAAQ,CAAEsH,KAAM,WACnDT,EAAShW,EAAKuW,KAAKnB,KAErBgB,EAAOM,kBAAkBZ,QAnBvB9V,EAAKuI,KACFG,QAAQ,MAAOoN,EAAW,CAAE/M,aAAc,gBAC1ClF,UACC,SAACC,GACC,IAAMsR,EAAKM,KAAKa,KAAK,IAAII,WAAW7S,GAAM,CAAE2S,KAAM,UAClDT,EAAShW,EAAKuW,KAAKnB,KAErB,SAACzL,GACCsM,EAAOtM,UAiBrBqL,mBAAA,SAAO4B,GACL,OAAOjY,KAAKuX,OAAOC,KAAK,WACtB,IAAMf,EAAUM,KAAKC,MAAMkB,WACvBC,MAAMC,QAAQH,EAAQI,QACJJ,SAAgBpK,QAClC,SAAC1N,EAAwBmY,GACvB,IAAMC,EAAUxB,KAAKC,MAAMwB,aAAarY,EAAM0Q,MAC9CkG,KAAKC,MAAMyB,kBACThC,EACA8B,EACApY,EAAMyW,MAAQ,SAAQ0B,EAAQ,OAKpC7B,EAAGE,WAAa7X,OAAO4Z,KAAKT,EAAQI,QACpC5B,EAAGK,OAASmB,EAAQI,QAGlBJ,EAAQU,UAAUV,EAAQU,SAASlC,GAEvC,IAAMmC,EAAqB7B,KAAK8B,MAC9BpC,EACA3X,OAAOC,OACL,CACE+Z,SAAU,OACVhB,KAAM,SAERG,EAAQc,OAGZlO,SACE,IAAImO,KAAK,CAACJ,GAAQ,CAAEd,KAAM,6BAC1BG,EAAQgB,UAAY,sCA7F3BvZ,iFAGIkD,eAAOsT,aAfHhL,oBAEAgO,oCCIP,WAAgCC,GAAAnZ,aAAAmZ,SAExBC,4BAAOpS,EAAWyH,GACxB,IAAMiI,EAAW,CAAE1X,EAAG,IAAKyS,EAAG,IAE9B,GAAIhD,EAAIkH,OACNe,EAAIjF,EAAIhD,EAAIkH,OAAO3O,EAAMyH,OACpB,CACL,IAAM4K,EAAMC,UAAQtS,EAAMyH,EAAqB,MAAE,IACjD,QAAmB,IAAR4K,EACT3C,EAAIjF,EAAI,QAGR,OADAiF,EAAIjF,EAAI4H,EACA5K,EAAIqJ,MACV,IAAK,WACHpB,EAAI1X,EAAI,IACR,MACF,IAAK,OACH0X,EAAI1X,EAAI,IACR,MACF,IAAK,KACH0X,EAAIjF,EAAIiF,IAAQjI,EAAI8K,QAAU9K,EAAI+K,OAAS,IAAM/K,EAAIgL,MAAQ,KAMrE,OAAO/C,GAGD0C,8BAASM,GAYf,IAXA,IAAMrB,EAAmC,GACnCxB,EAASwB,EAAOqB,EAAIC,WAAa,UAAY,GAC7CC,EAAUF,EAAIG,GAAG/Q,OACrB,SAAAgR,GACE,OAAe,IAAfA,EAAEC,UACFD,EAAExB,SACAwB,EAAEE,SAAgC,IAArBF,EAAEE,QAAQ3a,UAEvB4a,EAAKL,EAAQva,OACjB6a,EAAKR,EAAIS,GAAG9a,OAELH,EAAI,EAAGA,EAAI+a,EAAI/a,IACtB2X,EAASuD,OAAOC,aAAa,GAAKnb,QAAS,CACzCF,EAAG,IACHyS,EAAGmI,EAAQ1a,GAAG0Q,OAMlB,IAAS1Q,EAAI,EAAGA,EAAIgb,EAAIhb,IACtB,IAAK,IAAIob,EAAI,EAAGA,EAAIL,EAAIK,IACtBzD,EAAM,GAAGuD,OAAOC,aAAa,GAAKC,IAAKpb,EAAI,IAAOc,KAAKua,OACrDb,EAAIS,GAAGjb,GACP0a,EAAQU,IAQd,OAFAzD,EAAM,QAAU,MAAMuD,OAAOC,aAAa,GAAKJ,EAAK,IAAKC,EAAK,GAEvD7B,GAGTe,mBAAA,SAAOM,GACL,IAAK1Z,KAAKmZ,QACR,MAAM,IAAIrX,MAAM,sDAClB,IAAMuW,EAASrY,KAAKwa,SAASd,GAC7B,OAAO1Z,KAAKmZ,QAAQsB,OAAO,CACzBpC,SACAY,SAAUS,EAAIT,SACdN,SAAUe,EAAIf,gCA3EnBjZ,wDAHQ2W,qBAKM/C,mCCuTb,WACUoH,EACA9Q,EACAhK,EACAC,EACA8a,EACYC,EAGZ/I,EACAgJ,EACAC,EACAC,EACAC,EACAC,EACkBlb,GAdlBC,eAAA0a,EACA1a,UAAA4J,EACA5J,QAAAJ,EACAI,cAAAH,EACAG,eAAA2a,EACY3a,SAAA4a,EAGZ5a,aAAA6R,EACA7R,WAAA6a,EACA7a,cAAA8a,EACA9a,UAAA+a,EACA/a,QAAAgb,EACAhb,YAAAib,EACkBjb,SAAAD,gBAzQV,aACS,iBAEjB,sBACM,iBACM,qBACR,uBACG,gBACe,kBAYH,sBAgBO,CAAEmb,GAAI,KAAMC,GAAI,oBAEZ,IAAI1W,+BAwBR,CAAE2W,MAAO,CAAC,SAAUhW,KAAM,CAAC,sBAEvB,YAS1B,YASA,cASG,iBAkBE,qBASK,kBASJ,YAE4B,iCAWrB,yBAWA,iBAEP,2BA2BQ,qBAE2B,6BAS9B,oBASF,qBAWF,cAgBqB,IAAIX,mCAKI,IAAIA,gCAKT,IAAIA,+BAIP,IAAIA,iCAGE,IAAIA,6BA0PjB,oBACF,KApO/B3F,OAAOC,OAAOiB,KAAMsL,WAASoP,iCA7O3BW,6BAGJ,WACE,OAAOrb,KAAKsb,yBAJAnb,GACZH,KAAKsb,WAAaxc,OAAOC,OAAOiB,KAAKsb,WAAYnb,0DAa/Ckb,6BAeJ,WACE,OAAOrb,KAAKub,yBAhBAC,GACZ,IAAI9E,EAAqB,GACrB8E,GACEA,EAAIpW,KACNsR,EAAItR,KAAO+S,MAAMC,QAAQoD,EAAIpW,MAAQoW,EAAIpW,KAAOoW,EAAIpW,KAAK2G,MAAM,KAC5D2K,EAAItR,KAAO,CAAC,QAEboW,EAAIJ,MACN1E,EAAI0E,MAAQjD,MAAMC,QAAQoD,EAAIJ,OAASI,EAAIJ,MAAQI,EAAIJ,MAAMrP,MAAM,KAChE2K,EAAI0E,MAAQ,CAAC,UAElB1E,EAAM,CAAE0E,MAAO,CAAC,SAAUhW,KAAM,CAAC,SAEnCpF,KAAKub,WAAa7E,yDAUhB2E,iCACF,OAAOrb,KAAKyb,SAEd,SAAOtb,GACLH,KAAKyb,IAAMrb,uBAAqBD,0DAK9Bkb,iCACF,OAAOrb,KAAK0b,SAEd,SAAOvb,GACLH,KAAK0b,IAAMtb,uBAAqBD,0DAK9Bkb,oCACF,OAAOrb,KAAKkR,YAEd,SAAU/Q,GACRH,KAAKkR,OAAS9Q,uBAAqBD,0DAKjCkb,6CACF,OAAOrb,KAAK2b,qBAEd,SAAmBxb,GACjBH,KAAK2b,gBAAkB9X,wBAAsB1D,0DAK3Ckb,sCACF,OAAOrb,KAAKsQ,cAEd,SAAYnQ,GACVH,KAAKsQ,SAAWzM,wBAAsB1D,0DAKpCkb,2CACF,OAAOrb,KAAK4b,mBAEd,SAAiBzb,GACfH,KAAK4b,cAAgBxb,uBAAqBD,0DAKxCkb,uCACF,OAAOrb,KAAK6b,eAEd,SAAa1b,GACXH,KAAK6b,UAAYhY,wBAAsB1D,0DASrCkb,8CACF,OAAOrb,KAAK8b,sBAEd,SAAoB3b,GAClBH,KAAK8b,iBAAmBjY,wBAAsB1D,0DAO5Ckb,8CACF,OAAOrb,KAAK+b,sBAEd,SAAoB5b,GAClBH,KAAK+b,iBAAmBlY,wBAAsB1D,0DAM5Ckb,sCAAUlb,GACS,iBAAVA,GAAsBA,EAAMd,OACrCW,KAAKmR,UAAYhR,EACR0D,wBAAsB1D,GAC/BH,KAAKmR,UAAY,gBAEjBnR,KAAKmR,UAAY,oCAGrBkK,wBAAA,SAAYD,EAAeY,GACzB,OAAOhc,KAAKmR,UACRnR,KAAKmR,UACF8K,QAAQ,YAAab,GACrBa,QAAQ,eAAgBD,EAAM,IAC9BC,QAAQ,eAAgBD,EAAM,IACjC,0BAIFX,+CACF,OAAOrb,KAAKkc,uBAEd,SAAqB/b,GACnBH,KAAKkc,kBAAoBrY,wBAAsB1D,0DAO7Ckb,4CACF,OAAOrb,KAAKmc,oBAEd,SAAkBhc,GAChBH,KAAKmc,eAAiBtY,wBAAsB1D,0DAK1Ckb,0CACF,OAAOrb,KAAKoc,kBAEd,SAAgBjc,GACdH,KAAKoc,aAAehc,uBAAqBD,0DAOvCkb,wCACF,OAAOrb,KAAKqc,gBAEd,SAAclc,GACZH,KAAKqc,WAAaxY,wBAAsB1D,oCA+DlCkb,iCAAYvW,gBACZoF,EAAcpL,OAAOC,eAEtBiB,KAAKsc,UAAUpB,IAAKlb,KAAKkb,GAC1BqB,EAACvc,KAAKsc,UAAUnB,IAAKnb,KAAKmb,MAE5Bnb,KAAKwc,YACLxc,KAAKyc,gBACLzc,KAAK0c,mBAEP,OAAO1c,KAAK4J,KACTG,QAAQ/J,KAAK2c,WAAa,MAAO7X,GAAO9E,KAAK4c,KAAM,CAClD1S,SACAK,KAAMvK,KAAK6c,QACXlS,QAAS3K,KAAK8c,aAEfjU,KACCkU,MAAI,SAAC5X,GAEH,IAAMuR,EAAM4C,UAAQnU,EAAK9D,EAAK2b,UAA0B,KAAE,IAC1D,GAAW,MAAPtG,IAAgByB,MAAMC,QAAQ1B,GAAM,MAAO,GAE/C,IAAMuG,EACJ5b,EAAK2b,UAAU5B,OACf9B,UAAQnU,EAAK9D,EAAK2b,UAA2B,MAAE,MAEjD,OADA3b,EAAK+Z,MAAoB,MAAZ6B,EAAmB5b,EAAK+Z,OAAS,GAAK6B,QAY3D5B,iBAAA,SAAKH,EAAQsB,gBAARtB,MACS,IAARA,IAAWlb,KAAKkb,GAAKA,GACzBlb,KAAKwc,YAAcA,GAAe,KAClCxc,KAAKkd,QAAQ,OAOf7B,mBAAA,SAAOmB,GACLxc,KAAKuW,MAAM,EAAGiG,IAQhBnB,kBAAA,SAAMmB,GACJxc,KAAKuW,KAAK,EAAGiG,IAGfnB,oBAAA,SAAQvD,GACD9X,KAAKmd,UACVnd,KAAKod,WACLpd,KAAKqd,WACLrd,KAAKsd,SACLtd,KAAKiF,OAAOmD,KAAK,CACf0P,KAAMA,EACNoD,GAAIlb,KAAKkb,GACTC,GAAInb,KAAKmb,GACTC,MAAOpb,KAAKob,UAIhBC,qBAAA,SAASkC,GAAT,wBAASA,MACFvd,KAAKwd,WACVxd,KAAKyd,SAAU,KACXF,IAAuBvd,KAAKkb,GAAK,GACrClb,KAAK0d,cAAcxY,UACjB,SAACC,GAAa,OAAA9D,EAAKsc,eAAexY,IAClC,SAAA6F,GACE3J,EAAKoc,SAAU,EACfpc,EAAKuc,SAASxV,KAAK4C,OAKzBqQ,qBAAA,SAASkC,GACP,gBADOA,OACHvd,KAAKwd,QAAT,CACA,IAAI3M,EAAc7Q,KAAS,MAAI,GAE/B6Q,EAAOA,EAAK/K,MAAM,GAClB,IAAM+X,EAAW7d,KAAK8d,cAetB,GAdID,IACFhN,EAAO7Q,KAAK+d,cAAclN,EAAMgN,IAIlC7d,KAAKge,SAASlV,OAAO,SAAAgR,GAAK,OAAAA,EAAEmE,SAAWnE,EAAEmE,QAAQ5e,SAAQwO,QAAQ,SAAAqQ,GAC/D,IAAMC,EAASD,EAAED,QAAQnV,OAAO,SAAAgR,GAAK,OAAAA,EAAEsE,UACvC,GAAsB,IAAlBD,EAAO9e,OAAX,CACA,IAAMgf,EAAWH,EAAEpV,OACnB+H,EAAOA,EAAK/H,OAAO,SAAAwV,GACjB,OAAOH,EAAOI,KAAK,SAAA9M,GAAK,OAAA4M,EAAS5M,EAAG6M,UAIpCf,EACF,GAAIvd,KAAKwe,iBACPxe,KAAKkb,GAAK,MACL,CACL,IAAMuD,EAAejX,KAAKkX,KAAK7N,EAAKxR,OAASW,KAAKmb,IAClDnb,KAAKkb,GAAMlb,KAAKkb,GAEZlb,KAAKkb,GAAKuD,EACRA,EACAze,KAAKkb,GAHP,EAMRlb,KAAKob,MAAQvK,EAAKxR,OAClBW,KAAK2e,mBAC4B,IAAxB3e,KAAK4e,eACE,EAAV5e,KAAKmb,IAAUnb,KAAKob,MAAQpb,KAAKmb,GACjCnb,KAAK4e,eACX5e,KAAK2d,eACH3d,KAAK2e,cACD9N,EAAK/K,OAAO9F,KAAKkb,GAAK,GAAKlb,KAAKmb,GAAInb,KAAKkb,GAAKlb,KAAKmb,IACnDtK,KAIRwK,mBAAA,WACOrb,KAAK6e,gBACN7e,KAAK8e,OACN9e,KAAKJ,iBACH+B,cAAc,mBACdod,SAAS,EAAG,IAGb/e,KAAKJ,GAAGiC,cAAcf,gBACxBd,KAAKJ,GAAGiC,cAAcf,iBAGxBd,KAAKD,IAAIgB,gBAAgBC,WAAahB,KAAKgf,eAG7C3D,iBAAA,SAAKrU,EAAWyH,GACd,GAAIA,EAAIkH,OAAQ,OAAOlH,EAAIkH,OAAO3O,EAAMyH,GAExC,IAAMtO,EAAQmZ,UAAQtS,EAAMyH,EAAqB,MAAEA,EAAIwQ,SACvD,QAAqB,IAAV9e,EAAuB,OAAOsO,EAAIwQ,QAE7C,IAAIvI,EAAMvW,EACV,OAAQsO,EAAIqJ,MACV,IAAK,MACHpB,EAAM,aAAavW,mBACnB,MACF,IAAK,SACHuW,EAAM1W,KAAKib,OAAOiE,UAAU/e,EAAOsO,EAAI0Q,cACvC,MACF,IAAK,WACHzI,EAAM1W,KAAK8a,SAASoE,UAAU/e,GAC9B,MACF,IAAK,OACHuW,EAAM1W,KAAK+a,KAAKmE,UAAU/e,EAAOsO,EAAI2Q,YACrC,MACF,IAAK,KACH1I,EAAM1W,KAAKgb,GAAGkE,UAAU/e,IAAUsO,EAAI8K,QAAS9K,EAAI+K,MAAO/K,EAAIgL,MAGlE,OAAO/C,GAAOjI,EAAIwQ,SAGpB5D,mBAAA,SAAO9V,EAAUyB,EAAWyH,GAI1B,OAHAlJ,EAAEE,iBACFF,EAAEC,kBACEiJ,EAAI4Q,OAAO5Q,EAAI4Q,MAAMrY,EAAMhH,OACxB,GAGDqb,gCAAWiE,GACjB,OAAOA,GAAanH,MAAMC,QAAQpY,KAAK6Q,MACnC0O,KAAG,GAAyBvf,WAC3BA,WAGCqb,8CACN,IAAKrb,KAAK6Q,KAGR,OAFA7Q,KAAKwd,SAAU,OACfxd,KAAK6Q,KAAO,IAId7Q,KAAKwd,SAAU,EACU,iBAAdxd,KAAK6Q,MACd7Q,KAAK4c,KAAO5c,KAAmB,KAC/BA,KAAKwd,SAAU,EACfxd,KAAKod,UAAS,IACLjF,MAAMC,QAAQpY,KAAK6Q,MAC5B7Q,KAAKqd,UAAS,GAETrd,KAAKwf,QACRxf,KAAKwf,MAAaxf,KAAK6Q,KACpBhI,KAAK4W,MAAI,WAAM,OAACpe,EAAKoc,SAAU,KAC/BvY,UAAU,SAAAC,GACT9D,EAAKwP,KAAO1L,EACZ9D,EAAKgc,UAAS,OAMhBhC,oCAAelW,GACjBnF,KAAK0f,gBAAeva,EAAMnF,KAAK0f,cAAcva,IACjDnF,KAAKyd,SAAU,EACfzd,KAAK2f,MAAQxa,EACbnF,KAAK4f,aAYCvE,gDACA3E,EAAiC,GACvC,IAAK1W,KAAK6f,WAAY,OAAOnJ,EAE7B,GAAI1W,KAAK8f,UACPhhB,OAAO4Z,KAAK1Y,KAAK+f,UAAUlS,QAAQ,SAAAmS,GACjC,IAAMhZ,EAAO3F,EAAK0e,SAASC,GACvBhZ,EAAKyK,IACPiF,EAAI1P,EAAKgZ,MACNhZ,EAAKiZ,OAAOC,YAAc7e,EAAK6e,YAAc,IAAIlZ,EAAKyK,IAAMzK,EAAKyK,SAGnE,CACL,IAAM0O,EAAUngB,KAAK+f,SAAS/f,KAAKogB,YACnC1J,EAAIyJ,EAAQH,MACThgB,KAAKqgB,YAAYH,YAAclgB,KAAKkgB,YAAc,IAAIC,EAAQ1O,IAC/D0O,EAAQ1O,EAEZ,OAAOiF,GAGD2E,mCACNxK,EACAgN,cAEMyC,EAAqB,WAC3B,OAAOzP,EAAK0P,KAAK1C,GAAUd,IACzB,SAAC/V,GACC,OAAAA,EAAKsZ,QAEItZ,UACFsZ,GAAqBjf,EAAK0c,cACzB/W,EAAKsZ,GACLzC,OAGJ7W,WAIFqU,8CAEN,GACGrb,KAAK6f,YACL7f,KAAKqgB,aAC6B,mBAA5BrgB,KAAKqgB,YAAYG,OAK1B,OAAO,SAACC,EAAQC,GACd,IAAMlQ,EAAUnP,qBAAuCof,EAAGC,GAC1D,OAAe,IAAXlQ,EACyB,YAApBnP,EAAKwe,YAA4BrP,EAASA,EAE5C,IAIX6K,iBAAA,SAAK/C,EAAenY,GAApB,WACMH,KAAKogB,aAAe9H,GAAStY,KAAK6f,aAAe1f,IACrDH,KAAKqgB,YAAcrgB,KAAKge,SAAS1F,GACjCtY,KAAK6f,WAAa1f,EAClBH,KAAKogB,WAAa9H,EACdtY,KAAK8f,UACP9f,KAAK+f,SAASzH,GAAO7G,EAAItR,EAEzBrB,OAAO4Z,KAAK1Y,KAAK+f,UAAUlS,QACzB,SAAAmS,GAAO,OAAC3e,EAAK0e,SAASC,GAAKvO,GAAKuO,IAAQ1H,EAAQnY,EAAQ,OAG5DH,KAAKod,UAAS,GACdpd,KAAKqd,UAAS,GACdrd,KAAK2gB,WAAWvY,KAAK,CACnBjI,QACA4c,IAAK/c,KAAKyc,gBACVwD,OAAQjgB,KAAKqgB,gBAQThF,uCACN,IAAI3E,EAAiC,GAUrC,OATA1W,KAAKge,SAASlV,OAAO,SAAAgR,GAAK,OAAe,IAAfA,EAAE8G,WAAmB/S,QAAQ,SAAAY,GACrD,IAAM0P,EAAS1P,EAAIwP,QAAQnV,OAAO,SAAA+X,GAAK,OAAc,IAAdA,EAAEzC,UACrC0C,EAAc,GACdrS,EAAIsS,aAAcD,EAAMrS,EAAIsS,aAAatS,EAAIwP,QAASxP,GAExDqS,EAAIrS,EAAIuS,WAAavS,YAAgB0P,EAAOpB,IAAI,SAAA7d,GAAK,OAAAA,EAAEiB,QAAO8L,KAAK,KAErEyK,EAAM5X,OAAOC,OAAO2X,EAAKoK,KAEpBpK,GAGD2E,kCAAa5M,GACnBA,EAAImS,UAAsD,IAA3CnS,EAAIwP,QAAQgD,UAAU,SAAAnH,GAAK,OAAAA,EAAEsE,UAC5Cpe,KAAKod,UAAS,GACdpd,KAAKqd,UAAS,GACdrd,KAAKkhB,aAAa9Y,KAAKqG,IAGzB4M,0BAAA,SAAc5M,GACZzO,KAAKmhB,aAAa1S,IAGpB4M,wBAAA,SAAY5M,GACVA,EAAIwP,QAAQpQ,QAAQ,SAAA3O,GAAK,OAACA,EAAEkf,SAAU,IACtCpe,KAAKmhB,aAAa1S,IAGpB4M,wBAAA,SACE5M,EACAzH,EACAoX,GAEA3P,EAAIwP,QAAQpQ,QAAQ,SAAA3O,GAAK,OAACA,EAAEkf,SAAU,IACtCpX,EAAKoX,QAAUA,GAQjB/C,uBAAA,WACE,OAAOrb,KAAKohB,WAAU,IAGxB/F,sBAAA,SAAU+C,GAGR,OAFAA,OAA6B,IAAZA,EAA0Bpe,KAAKqhB,YAAcjD,EAC9Dpe,KAAK2f,MAAM7W,OAAO,SAAAgR,GAAK,OAACA,EAAEhQ,WAAU+D,QAAQ,SAAA3O,GAAK,OAACA,EAAEkf,QAAUA,IACvDpe,KAAK4f,YAAY0B,gBAG1BjG,4BAAA,SAAgBnc,EAAoBiB,GAElC,OADAjB,EAAEkf,QAAUje,EACLH,KAAK4f,YAAY0B,gBAG1BjG,sBAAA,WACE,IAAMkG,EAAYvhB,KAAK2f,MAAM7W,OAAO,SAAAgR,GAAK,OAACA,EAAEhQ,WACtC0X,EAAcD,EAAUzY,OAAO,SAAAgR,GAAK,OAAc,IAAdA,EAAEsE,UAC5Cpe,KAAKqhB,YACkB,EAArBG,EAAYniB,QAAcmiB,EAAYniB,SAAWkiB,EAAUliB,OAC7D,IAAMoiB,EAAeF,EAAUG,MAAM,SAAAvhB,GAAS,OAACA,EAAMie,UAErD,OADApe,KAAK2hB,gBAAkB3hB,KAAKqhB,cAAgBI,EACrCzhB,MAGTqb,0BAAA,SAAcuG,GAEZ,OADIA,EAAIzZ,QAAQyZ,EAAIzZ,OAAOnI,KAAK2f,OACzB3f,KAAK4f,YAAY0B,gBAG1BjG,yBAAA,WAIE,OAHArb,KAAK6hB,eAAezZ,KAClBpI,KAAK2f,MAAM7W,OAAO,SAAAgR,GAAK,OAACA,EAAEhQ,WAA0B,IAAdgQ,EAAEsE,WAEnCpe,MAQTqb,uBAAA,WAGE,OAFArb,KAAK2f,MAAM7W,OAAO,SAAAgR,GAAK,OAAAA,EAAEsE,UAASvQ,QAAQ,SAAA7G,GAAQ,OAACA,EAAKoX,SAAU,IAClEpe,KAAK8hB,YAAY1Z,KAAK,MACfpI,MAGTqb,sBAAA,SAAU0G,EAAa3D,EAAkBpX,GACvC,IAAsB,IAAlBA,EAAK8C,SAIT,OAHA9J,KAAK2f,MAAM7W,OAAO,SAAAgR,GAAK,OAACA,EAAEhQ,WAAU+D,QAAQ,SAAA3O,GAAK,OAACA,EAAEkf,SAAU,IAC9DpX,EAAKoX,QAAUA,EACfpe,KAAK8hB,YAAY1Z,KAAKpB,GACfhH,MAOTqb,wBAAA,SAAYjW,GACV,IAAmB,QAAA4c,IAAAC,WAAAA,KAAd,IAAMjb,OACJA,EAAKkb,KAAIlb,EAAKkb,GAAK,WAAM,OAAA,IACzBlb,EAAKmb,WAAUnb,EAAKmb,SAAW,IACT,EAAvBnb,EAAKmb,SAAS9iB,QAAYW,KAAKoiB,YAAYpb,EAAKmb,YAIxD9G,qBAAA,SAASiD,EAAa+D,GAAtB,WACE,GAAiB,UAAbA,EAAIvK,MAAiC,WAAbuK,EAAIvK,KAAmB,CACjD,IAAMgJ,EAAM,GAYZ,OAXAA,EAAIuB,EAAIC,WAAatiB,KAAK0a,UAAU6H,iBAAmB,UAAYjE,OAClEte,KAAK6a,MAAmB,UAAbwH,EAAIvK,KAAmB,OAAS,UAC1CuK,EAAIG,UACJ1jB,OAAOC,OAAO+hB,EAAKuB,EAAInY,QAAUmY,EAAInY,OAAOoU,IAC5C+D,EAAI7X,KACJ6X,EAAII,cAEH5Z,KAAKC,SAAO,SAAAgR,GAAK,YAAa,IAANA,KACxB5U,UAAU,SAAAC,GACLkd,EAAIhD,OAAOhe,EAAKqhB,YAAYpE,EAAQ+D,EAAKld,KAInDnF,KAAK0iB,YAAYpE,EAAQ+D,IAGnBhH,iCAAYiD,EAAa+D,EAAwBxH,GACvD,GAAKwH,EAAIhD,MACT,GAAyB,iBAAdgD,EAAIhD,MACb,OAAQgD,EAAIhD,OACV,IAAK,OACHrf,KAAKuW,OACL,MACF,IAAK,SACHvW,KAAK2iB,cAITN,EAAIhD,MAAMf,EAAQzD,EAAO7a,OAI7Bqb,oBAAA,SAAQiD,EAAa+D,GACnB,OAAIA,EAAI1M,OAAe0M,EAAI1M,OAAO2I,EAAQ+D,GACnCA,EAAIhQ,MAObgJ,wBAAA,SAAYjW,GACVA,EAAKyI,QAAQ,SAAC7G,EAAM+a,GACd/a,EAAK4b,OAAS5b,EAAK6b,QACF,SAAf7b,EAAK4b,MACP5b,QAAqB,IAAR+a,EAAY,MAAQ3c,EAAK2c,EAAM,GAAGc,MACvB,UAAf7b,EAAK4b,QACd5b,SAAc+a,IAAQ3c,EAAK/F,OAAS,EAAI,MAAQ+F,EAAK2c,EAAM,GAAGc,WAetExH,mBAAA,SAAOiE,EAA4B5F,GAAnC,aACK4F,GAAatf,KAAKwd,SACpB8B,GAAkC,iBAAdA,EACjBtf,KAAK0d,eACL1d,KAAK8iB,WAAWxD,IAClBpa,UAAU,SAACC,GACX,OAAA9D,EAAKsZ,UAAUF,OACb3b,OAAOC,OAAO,GAAI2a,GAChBS,GAAIhV,EACJ0U,GAAIxY,EAAK2c,eAQjB3C,qBAAA,WACErb,KAAKmd,SAAU,EACfnd,KAAK+iB,gBACL/iB,KAAKgjB,eAGC3H,2CACNrb,KAAK4N,UAAUC,QAAQ,SAAAC,GACrB,OAAAzM,EAAKxB,SAASkO,YAAY1M,EAAKzB,GAAGiC,cAAeiM,KAGnD9N,KAAK4N,UAAY,GACb5N,KAAKijB,eACPjjB,KAAK4N,UAAUI,KAAK,WAAahO,KAAKijB,eAExCjjB,KAAK4N,UAAUC,QAAQ,SAAAC,GACrB,OAAAzM,EAAKxB,SAASiE,SAASzC,EAAKzB,GAAGiC,cAAeiM,MAI1CuN,gDAEN,GADArb,KAAKge,SAAW,IACXhe,KAAKkjB,SAAmC,IAAxBljB,KAAKkjB,QAAQ7jB,OAChC,MAAM,IAAIyC,MAAM,wCAOlB,IANA,IAAIqhB,EAAgB,EAChBC,EAAa,EACXC,EAAkB,GACpBtB,EAAM,EACJuB,EAAkC,OAErBC,EADEjY,WAAStL,KAAKkjB,SAChBjB,WAAAA,KAAd,IAAMjb,OACT,IAAIhH,KAAK4a,MAAO5T,EAAK4T,KAAQ5a,KAAK4a,IAAI4I,IAAIxc,EAAK4T,KAA/C,CACI5T,EAAKsR,QACFH,MAAMC,QAAQpR,EAAKsR,SAAQtR,EAAKsR,MAAQtR,EAAKsR,MAAMvM,MAAM,MAE9D/E,EAAKyc,SAAWzc,EAAKsR,MAAMrM,KAAK,MAG7BjF,EAAK0c,aAAY1c,EAAK0c,WAAa,IACtB,aAAd1c,EAAK8Q,SACLqL,EACGnc,EAAK6b,QACR7b,EAAK6b,OAAoC,EAAzB7b,EAAK0c,WAAWrkB,OAAa,GAAK,WAEpC,UAAd2H,EAAK8Q,SACLsL,EACFpc,EAAK0c,WAAa,GACb1c,EAAK6b,QAAO7b,EAAK6b,MAAQ,SAE3B7b,EAAK2c,YACR3c,EAAK2c,UAAY,CAGf1I,OAAQ,aACR2I,SAAU,aACV7I,KAAM,eACN/T,EAAK8Q,OAES,OAAd9Q,EAAK8Q,WAAyC,IAAjB9Q,EAAKuS,UACpCvS,EAAKuS,SAAU,GAGbvS,EAAKwZ,QACP6C,EAAQtB,GAAO,CACb8B,SAAS,EACTpS,EAAGzK,EAAKuZ,KACRP,IAAKhZ,EAAK8c,SAAW9c,EAAKyc,SAC1BxD,OAAQjZ,GAENA,EAAKuZ,OAASvgB,KAAKqgB,cACrBrgB,KAAKqgB,YAAcrZ,EACnBhH,KAAK6f,WAAa7Y,EAAKuZ,KACvBvgB,KAAKogB,WAAa2B,IAGpBsB,EAAQtB,GAAO,CACb8B,SAAS,GAIR7c,EAAK8B,QAAW9B,EAAKiX,UAASjX,EAAKiX,QAAU,SACf,IAAxBjX,EAAK+c,iBACd/c,EAAK+c,gBAAiB,GACnB/c,EAAKgd,oBAAmBhd,EAAKgd,kBAAoB,MACjDhd,EAAKid,kBAAiBjd,EAAKid,gBAAkB,MAC7Cjd,EAAKkd,aAAYld,EAAKkd,WAAa,0BACxCld,EAAK4Z,UAAuD,IAA5C5Z,EAAKiX,QAAQgD,UAAU,SAAAnH,GAAK,OAAAA,EAAEsE,UAE1Cpe,KAAK4a,MACP5T,EAAK0c,WAAa1c,EAAK0c,WAAW5a,OAChC,SAAAgR,GAAK,OAACA,EAAEc,KAAOvZ,EAAKuZ,IAAI4I,IAAI1J,EAAEc,OAEhC5T,EAAKiX,QAAUjX,EAAKiX,QAAQnV,OAAO,SAAAgR,GAAK,OAACA,EAAEc,KAAOvZ,EAAKuZ,IAAI4I,IAAI1J,EAAEc,QAInE,IAAMZ,EAA+B,GACrC,GAAIhT,EAAKgT,QAAS,CAChB,IAAkB,QAAAmK,EAAAnd,EAAKgT,QAALuC,WAAAA,KAAb,IAAM8F,OACLriB,KAAK4a,KAAOyH,EAAIzH,MAAQ5a,KAAK4a,IAAI4I,IAAInB,EAAIzH,OAE5B,QAAbyH,EAAIvK,WAAqC,IAAZuK,EAAIjc,MACnCic,EAAIjc,KAAM,IAEI,IAAZic,EAAIjc,MACNic,EAAI3O,MAAQ,OACgB,IAAjB2O,EAAI+B,WACb/B,EAAI+B,SAAW,WAEf/B,EAAIF,UAAkC,EAAtBE,EAAIF,SAAS9iB,SAC/BgjB,EAAI3O,MAAQ,GAET2O,EAAI3O,QAAO2O,EAAI3O,MAAQ,GAGxB2O,EAAI/P,MAAQtS,KAAK6R,UAASwQ,EAAIhQ,KAAOrS,KAAK6R,QAAQU,MAAM8P,EAAI/P,OAEhE0H,EAAQhM,KAAKqU,IAEf,GAAuB,IAAnBrI,EAAQ3a,OAAc,SAC1BW,KAAKoiB,YAAYpI,GAEnBhT,EAAKgT,QAAUA,EAEXhT,EAAKsL,MAAQtS,KAAK6R,UAAS7K,EAAK4I,MAAQ5P,KAAK6R,QAAQU,MAAMvL,EAAKsL,SAClEyP,EACFuB,EAAWtV,KAAKhH,IAIlB,GAFAhH,KAAKqkB,YAAYf,GACjBtjB,KAAKge,SAAWsF,EACI,EAAhBH,EAAmB,MAAM,IAAIrhB,MAAM,iCACvC,GAAiB,EAAbshB,EAAgB,MAAM,IAAIthB,MAAM,8BACpC9B,KAAK+f,SAAWsD,GAGlBhI,wBAAA,SACE3P,GAEIA,EAAQwX,SAAWljB,KAAKmd,SAASnd,KAAK+iB,gBACtCrX,EAAQmF,MAAQ7Q,KAAKmd,SAASnd,KAAKgjB,cAEvChjB,KAAK6O,YAGPwM,wBAAA,WACMrb,KAAKwf,QACPxf,KAAKwf,MAAM/W,cACXzI,KAAKwf,MAAQ,2BAt6BlBtd,kBAAU,CACTT,SAAU,eACVU,SAAU,msKACVyK,KAAM,CAAE0X,gBAAiB,QACzBlhB,UAAW,CAACgW,GAAmBmL,iBAAgBC,WAAUC,SAAQC,eACjEniB,qBAAqB,+CATdoiB,UAjCAzZ,oBAVPzI,oBADAC,mBA8CO0W,UAjCAwL,+BA6SJtR,6CACAA,kBACA1Q,eAAO2Q,6BAlSVsR,qBAHAN,wBACAC,kBACAC,gBAfOC,8CAyTJ9hB,eAAOC,+CA5PTC,6BAKAA,2BAEAA,yBAEAA,4BAEAA,2BAKAA,0BASA0G,4BAKA1G,yBAqBAA,oBAEAA,oBASAA,uBASAA,gCASAA,yBASAA,8BASAA,0BASAA,sBASAA,wBAEAA,iCAEAA,iCASAA,iCAEAA,2BAUAA,kCAmBAA,+BASAA,+BAEAA,6BASAA,4BASAA,2BAEAA,+BASAA,wBAEAkB,qBAAa,wBAEbA,qBAAa,wBAEbA,qBAAa,0BAEbA,qBAAa,4BAEblB,6BACAA,wBAEA0G,iCAKAA,8BAKAA,6BAKAA,+BAEAA,+BC3SD,WACSsb,EACCC,GADD/kB,iBAAA8kB,EACC9kB,WAAA+kB,SAGVC,qBAAA,WAAA,WACQvW,EAAMzO,KAAK+kB,MAAM/G,SAASiH,KAAK,SAAAnL,GAAK,OAAAA,EAAEtV,SAAWnD,EAAK4F,KAC5D,GAAKwH,EACL,OAAQzO,KAAK8X,MACX,IAAK,QACHrJ,gBAAoBzO,KAAK8kB,YACzB,MACF,QACErW,WAAezO,KAAK8kB,kCArB3B7Z,kBAAU,CACTxJ,SAAU,wDALe0L,qBAElBkO,kCAMNvY,cAAM,wBAENA,gBCDGG,GAAa,CAACoY,GAAsB2J,IAMpChY,GAAe,CAACrD,wDAWbub,UAAP,WACE,MAAO,CAAE/hB,SAAU+hB,EAAqB9hB,UAAW,CAACuhB,0BARvDthB,iBAAS,CACR8hB,QAAS,CAACC,oBACV9hB,SAAUC,eAAc8hB,cAAa7Y,0BAAoBQ,IACzDxJ,aAAkBP,WAClBQ,QAAaR,qICgUb,WACUqiB,EACYC,GADZvlB,cAAAslB,EACYtlB,iBAAAulB,YAxTP,gBACE,aACDC,GAAkBC,oBACJ,sBAC2B,IAAIC,kBAE3D,mBACkC,qBACkB,wBACA,UAMtD5mB,sBAAI6mB,uBAAJ,SAAQxlB,GACNH,KAAK4lB,KAAOpe,KAAKqe,IAAIre,KAAKC,IAAItH,EAAO,GAAI,KACzC,IAAK,IAAIjB,EAAIc,KAAK8lB,QAAQzmB,OAAQH,EAAIc,KAAK4lB,KAAM1mB,IAC/Cc,KAAK8lB,QAAQ1f,uCAIjBtH,sBAAI6mB,wBAGJ,WACE,OAAO3lB,KAAK+lB,WAJd,SAAS5lB,GACPH,KAAK+lB,MAAQ5lB,mCAMfrB,sBAAI6mB,yBAGJ,WACE,OAAO3lB,KAAKgmB,YAJd,SAAU7lB,GACRH,KAAKgmB,OAAS7lB,mCAMhBrB,sBAAI6mB,4BAIJ,WACE,OAAO3lB,KAAKimB,eALd,SAAa9H,GACNA,IACLne,KAAKimB,UAAY9H,oCAMnBrf,sBAAI6mB,yBAAJ,WACE,OAAO3lB,KAAK8lB,yCAGdhnB,sBAAI6mB,yBAAJ,WACE,OAAO3lB,KAAK8lB,QAAQzmB,wCAGtBP,sBAAI6mB,0BAAJ,WACE,OAAO3lB,KAAKkmB,cAAcC,gDAG5BrnB,sBAAI6mB,yBAAJ,SAAUxlB,GACR,IAAMimB,EAASpmB,KAAKqmB,OAAOrmB,KAAKslB,SAAS1a,IAAI0b,kBAAgBC,UACxC,iBAAVpmB,IAAoBA,EAAQ,CAAEkS,KAAMlS,IAC/CH,KAAKwmB,aAAaJ,GAAUjmB,EAC5BH,KAAKymB,GAAG,6BAA8BtmB,GACtCH,KAAKkmB,cAAcQ,KAAK,CACtBC,OAAQ,QACR/W,MAAOzP,EACPiF,KAAMpF,KAAK8lB,2CAIfH,kBAAA,SAAM7gB,GACJ,OAAO9E,KAAK8lB,QAAQ7E,UAAU,SAAAnH,GAAK,OAAAA,EAAEhV,MAAQA,KAG/C6gB,mBAAA,SAAO7gB,GACL,OAA4B,IAArB9E,KAAKsY,MAAMxT,IAGpB6gB,gBAAA,SAAI7gB,GACF,OAAOA,GAAM9E,KAAK8lB,QAAQb,KAAK,SAAAnL,GAAK,OAAAA,EAAEhV,MAAQA,KAAe,MAEvD6gB,4BAAO7gB,EAAsB8hB,GACnC,IAAM7E,EAAqB,iBAARjd,EAAmB9E,KAAKsY,MAAMxT,GAAOA,EAClDkC,GAAgB,IAAT+a,EAAa/hB,KAAK8lB,QAAQ/D,GAAO,KAC9C,SAAK/a,IAAU4f,IAAwB5f,EAAK6f,YAE5C7mB,KAAK8mB,QAAQ9f,EAAK+f,SAElB/mB,KAAK8lB,QAAQpT,OAAOqP,EAAK,UAClB/hB,KAAKwmB,aAAa1hB,IAClB,IAOT6gB,kBAAA,SAAM7gB,EAAa8hB,GAQjB,oBARiBA,MACjB5mB,KAAKgnB,gBAAkBliB,EAEvB9E,KAAK+D,OAAOe,EAAK8hB,GAEjB5mB,KAAKkmB,cAAcQ,KAAK,CAAEC,OAAQ,QAAS7hB,MAAKM,KAAMpF,KAAK8lB,UAE3D9lB,KAAKymB,GAAG,YAAa3hB,IACd,GAOT6gB,uBAAA,SAAW7gB,EAAa8hB,gBAAAA,MAEtB,IADA,IAAMK,EAAQjnB,KAAKsY,MAAMxT,GAChB5F,EAAIc,KAAKQ,MAAQ,EAAOymB,EAAJ/nB,EAAWA,IACtCc,KAAK+D,OAAO7E,EAAG0nB,GAQjB,OALA5mB,KAAKgnB,gBAAkB,KAEvBhnB,KAAKkmB,cAAcQ,KAAK,CAAEC,OAAQ,aAAc7hB,MAAKM,KAAMpF,KAAK8lB,UAEhE9lB,KAAKymB,GAAG,oBAAqB3hB,IACtB,GAOT6gB,kBAAA,SAAMiB,GAAN,wBAAMA,MACJ5mB,KAAK8lB,QAAQjY,QAAQ,SAAAiM,IACd8M,GAAuB9M,EAAE+M,UAAUxlB,EAAKylB,QAAQhN,EAAEiN,WAEzD/mB,KAAK8lB,QAAU9lB,KAAK8lB,QAAQhd,OAC1B,SAAAgR,GAAK,OAAC8M,IAAwB9M,EAAE+M,WAGlC7mB,KAAKgnB,gBAAkB,KAEvBhnB,KAAKkmB,cAAcQ,KAAK,CAAEC,OAAQ,QAASvhB,KAAMpF,KAAK8lB,UAEtD9lB,KAAKymB,GAAG,oBAmBVd,iBAAA,SAAK7gB,EAAaoiB,GAChB,IAAMD,EAAQjnB,KAAK8lB,QAAQ7E,UAAU,SAAAnH,GAAK,OAAAA,EAAEhV,MAAQA,IACpD,IAAe,IAAXmiB,EAAJ,CACA,IAAMpW,EAAO7Q,KAAK8lB,QAAQhgB,QAC1B+K,EAAK6B,OACHwU,EAAW,EAAIrW,EAAKxR,OAAS6nB,EAAWA,EACxC,EACArW,EAAK6B,OAAOuU,EAAO,GAAG,IAExBjnB,KAAK8lB,QAAUjV,EACf7Q,KAAKkmB,cAAcQ,KAAK,CACtBC,OAAQ,OACR7hB,MACAoiB,WACA9hB,KAAMpF,KAAK8lB,YAafH,qBAAA,SAAS7gB,EAAa8M,GACpB,GAAI5R,KAAKwmB,aAAa1hB,GAAM,OAAO9E,KAAKwmB,aAAa1hB,GAErD,GAAI8M,GAASA,EAAMf,OAASe,EAAMf,gBAAkBe,EAAMf,YACxD,OAAqBwB,KAAMT,EAAMf,WAAYyB,KAAMV,EAAMf,gBAE3D,IAAMsW,EAAOnnB,KAAKonB,OAAS5B,GAAkB6B,IAAMrnB,KAAKsnB,QAAQxiB,GAAO,KACvE,OAAOqiB,EAAO,CAAE9U,KAAM8U,EAAK9U,KAAMC,KAAM6U,EAAK7U,MAAS,CAAED,KAAMvN,IAM/D6gB,6BAAA,WACE3lB,KAAKwmB,aAAe,IAGtB1nB,sBAAI6mB,4BAAJ,SAAaxlB,GACX,IAAMimB,EAASpmB,KAAKqmB,OAAOrmB,KAAKslB,SAAS1a,IAAI0b,kBAAgBC,UAC7DvmB,KAAKunB,gBAAgBnB,GAAUjmB,EAC/BH,KAAKymB,GAAG,gCAAiCtmB,GACzCH,KAAKkmB,cAAcQ,KAAK,CACtBC,OAAQ,WACRE,SAAU1mB,EACViF,KAAMpF,KAAK8lB,2CAafH,wBAAA,SAAY7gB,EAAa8M,GACvB,QAAyC,IAA9B5R,KAAKunB,gBAAgBziB,GAC9B,OAAO9E,KAAKunB,gBAAgBziB,GAE9B,GAAI8M,GAASA,EAAMf,MAA4C,kBAA7Be,EAAMf,mBACtC,OAAOe,EAAMf,mBAEf,IAAMsW,EAAOnnB,KAAKonB,OAAS5B,GAAkB6B,IAAMrnB,KAAKsnB,QAAQxiB,GAAO,KACvE,OAAIqiB,GAAsC,kBAAvBA,iBACVA,iBAOXxB,gCAAA,WACE3lB,KAAKunB,gBAAkB,IAEzB5B,0BAAA,SAAc/T,GAEZ,IADA,IAAI8U,EAAO9U,EACJ8U,EAAKc,YAAYd,EAAOA,EAAKc,WACpC,OAAOd,GAKTf,mBAAA,SAAO/T,GAGL,IAFA,IAAI8U,EAAO1mB,KAAKynB,cAAc7V,GACxB8V,EAAW,GACVhB,GACLgB,EAAS1Z,KAAK0Y,EAAK5hB,IAAImH,KAAK,MAC5Bya,EAAOA,EAAKiB,OAQd,MALE,IACAD,EACG5e,OAAO,SAAA5J,GAAK,OAAAA,IACZ0oB,UACA3b,KAAK,MAMZ0Z,gBAAA,SAAI/T,GACF,IAAM9M,EAAM9E,KAAKqmB,OAAOzU,GACxB,GAAI9M,IAAQ9E,KAAKgnB,gBAAiB,OAAO,EAEzC,GAAIpV,EAAMf,MAAoC,kBAArBe,EAAMf,WAC7B,OAAOe,EAAMf,WAEf,GAAI7Q,KAAKonB,OAAS5B,GAAkB6B,IAAK,CACvC,IAAMF,EAAOnnB,KAAKsnB,QAAQxiB,GAC1B,IAAKqiB,EAAM,OAAO,EAClB,GAAInnB,KAAKonB,OAAS5B,GAAkBC,MAClC,IAAmB,IAAf0B,EAAKU,MAAiB,OAAO,OAEjC,IAAKV,EAAKU,QAAwB,IAAfV,EAAKU,MAAgB,OAAO,EAEjD,OAAO,EAET,OAAuD,IAAhD7nB,KAAKimB,UAAUhF,UAAU,SAAA6G,GAAK,OAAAA,EAAEC,KAAKjjB,MAK9C6gB,oBAAA,SAAQ9U,GACN7Q,KAAKkmB,cAAcQ,KAAK,CAAEC,OAAQ,UAAW9V,UAMvC8U,6BAAQoB,GACVA,GAAWA,EAAQiB,cAAgBjB,EAAQiB,aAAalB,SAC1DC,EAAQiB,aAAalB,WAGjBnB,8BAAG,aAAA1D,mBAAAA,IAAAgG,kBACJjoB,KAAKkoB,OAEVC,QAAQC,WAARD,QAAgBF,IAUVtC,6BAAQ7gB,GACd,IAAMoN,EAAQlS,KAAKulB,YAAcvlB,KAAKulB,YAAYpf,aAAarB,GAAO,GACtE,OAAKoN,GAA0B,IAAjBA,EAAM7S,OACb6S,EAAM9L,MAD4B,MAInCuf,6BAAQ0C,EAAgBvjB,EAAawjB,GACvCA,EAAKC,UAAYD,EAAKC,SAAS/oB,eAAe6oB,IAChDC,EAAKC,SAASF,MAGV1C,qCAAgB/T,GACtB,OACGA,EAAM4W,aACP5W,EAAM4W,YAAYC,cAClB7W,EAAM4W,YAAYrG,UAOtBwD,yBAAA,SAAa/T,GACX,OAAI5R,KAAK0oB,gBAAgB9W,KACzB5R,KAAKymB,GAAG,gBAAiBzmB,KAAKwjB,IAAI5R,GAAQ5R,KAAKqmB,OAAOzU,IAC/C5R,KAAKwjB,IAAI5R,KAMlB+T,kBAAA,SAAMgD,EAAmC5B,GACnC/mB,KAAKQ,OAASR,KAAK4lB,MAAM5lB,KAAK8lB,QAAQ8C,QAC1C,IAAM9jB,EAAM9E,KAAKqmB,OAAOsC,GAClB5G,EAAM/hB,KAAKsY,MAAMxT,GAEjBkC,EAAuB,CAC3B4I,MAAO5P,KAAK6oB,SAAS/jB,EAAK6jB,GAC1B9B,SAAU7mB,KAAK8oB,YAAYhkB,EAAK6jB,GAChC7jB,MACA6jB,YACA5B,YAEW,IAAThF,EACF/hB,KAAK8lB,QAAQ9X,KAAKhH,GAElBhH,KAAK8lB,QAAQ/D,GAAO/a,EAEtBhH,KAAKgnB,gBAAkB,KAEvBhnB,KAAKymB,GAAG,UAAmB,IAAT1E,EAAa,QAAU,aAAcjd,GAEnDiiB,GAAWA,EAAQiB,cACrBhoB,KAAK+oB,QAAQ,kBAAmBjkB,EAAKiiB,EAAQiB,cAG/ChoB,KAAKkmB,cAAcQ,KAAK,CAAEC,OAAQ,MAAO3f,OAAM5B,KAAMpF,KAAK8lB,WAM5DH,yBAAA,SAAa/T,GACX,GAAI5R,KAAK0oB,gBAAgB9W,GAAQ,OAAO,EACxC,IAAM9M,EAAM9E,KAAKqmB,OAAOzU,GAClBf,EAAO7Q,KAAK4K,IAAI9F,GAChB4R,KAAS7F,IAAQA,EAAKkW,SAE5B,OADA/mB,KAAKymB,GAAG,gBAAiB/P,EAAK5R,GACvB4R,GAMTiP,qBAAA,SAAS/T,GACP,GAAI5R,KAAK0oB,gBAAgB9W,GAAQ,OAAO,KACxC,IAAM9M,EAAM9E,KAAKqmB,OAAOzU,GAClBf,EAAO7Q,KAAK4K,IAAI9F,GAChB4R,EAAO7F,GAAQA,EAAKkW,SAAY,KAKtC,OAJA/mB,KAAKymB,GAAG,YAAa3hB,EAAK4R,GACtBA,GAAOA,EAAIsR,cACbhoB,KAAK+oB,QAAQ,eAAgBjkB,EAAK4R,EAAIsR,cAEjCtR,GAMTiP,6BAAA,SACEqD,EACAC,GAEA,IAAIvS,EAAMsS,EAAOR,cAAgBS,EAAKT,YACtC,IAAK9R,EAAK,OAAO,EAEjB,IAAMwS,EAASF,EAAOR,aAAeQ,EAAOR,YAAYU,MACtD,GACgB,EAAdA,EAAK7pB,SAAe6pB,EAAKC,QAAQ,OAGnCzS,EAFkB1W,KAAKqmB,OAAO2C,KACdhpB,KAAKqmB,OAAO4C,IAW9B,OARAjpB,KAAKymB,GAAG,yBACRzmB,KAAKymB,GACH,oBACA/P,EACG1W,KAAKqmB,OAAO4C,QAAUjpB,KAAKqmB,OAAO2C,GACrCA,EACAC,GAEKvS,GAGTiP,wBAAA,WACE3lB,KAAK8lB,QAAU,GACf9lB,KAAKkmB,cAAczd,mCAjbtB/I,wDA3BC0pB,kBAaOhgB,gCAwUJkK,2DCzSe,IAAI7O,4CAnBlB4kB,wBAWJ,WACE,OAAOrpB,KAAKspB,oBAZLnpB,GACPH,KAAKspB,MAAQxqB,OAAOC,OAClB,CACEwqB,MAAO,OACPC,WAAY,SACZC,WAAY,SACZ/Y,MAAO,MAETvQ,oCAaJrB,sBAAIuqB,uCAAJ,WACE,OAAOrpB,KAAK0pB,MAAMC,yCAGZN,4BAAOvR,EAAiB9Q,GAC9BhH,KAAKupB,MAAM7C,KAAK,CACd5O,OACA9Q,KAAMhH,KAAKgH,KACX4f,oBAAqB5mB,KAAK4mB,uBAI9ByC,qBAAA,WACMrpB,KAAK4mB,sBAAqB5mB,KAAKgH,KAAK6f,UAAW,IAGrDwC,kBAAA,SAAM9jB,EAAeuS,GACnBvS,EAAEE,iBACFF,EAAEC,mBACW,UAATsS,GAAqB9X,KAAKgH,KAAK6f,YACtB,eAAT/O,GAAyB9X,KAAKgH,KAAKwN,MACvCxU,KAAK8V,OAAOgC,EAAM9X,KAAKgH,QAKzBqiB,+BAAUK,GACW,UAAfA,EAAM5R,MAAqC,IAAjB4R,EAAME,QACpC5pB,KAAK8V,OAAO,KAAM,2BA/DrB5T,kBAAU,CACTT,SAAU,yBACVU,SAAU,iiBAOVI,qBAAqB,oCAIpBO,sBAgBAA,uBAEAA,uBAEA0G,4BA0BAxG,qBAAa,iBAAkB,CAAC,kBAChCA,qBAAa,uBAAwB,CAAC,iCChDvC,WAAoB6mB,GAAA7pB,aAAA6pB,YALe,IAAIC,qBACE,IAAIA,iBAM7CC,mBAAA,WACO/pB,KAAKgqB,MACVhqB,KAAKgqB,IAAIC,SACTjqB,KAAKgqB,IAAIE,UACTlqB,KAAKgqB,IAAM,OAGbD,iBAAA,SAAKI,GAAL,WACEnqB,KAAK+D,SACG,IAAA2lB,UAAO1iB,SACTojB,EAAc,CAClB7iB,sBAAuB,WAAkB,OACvC8iB,OAAQX,EAAMY,QACdC,OAAQ,EACR5iB,KAAM+hB,EAAMc,QACZ5iB,MAAO8hB,EAAMc,QACb9iB,IAAKgiB,EAAMY,QACXzH,MAAO,KAGL4H,EAAmBzqB,KAAK6pB,QAC3B3C,WACAwD,YACC,CAAE7oB,cAAeuoB,GACjB,CAAEO,QAAS,QAASC,QAAS,UAC7B,CAAEC,SAAU,QAASC,SAAU,QAEhCC,qBACC,CAAEJ,QAAS,QAASC,QAAS,OAC7B,CAAEC,SAAU,QAASC,SAAU,WAEhCC,qBACC,CAAEJ,QAAS,MAAOC,QAAS,OAC3B,CAAEC,SAAU,QAASC,SAAU,QAEhCC,qBACC,CAAEJ,QAAS,QAASC,QAAS,OAC7B,CAAEC,SAAU,MAAOC,SAAU,QAE9BC,qBACC,CAAEJ,QAAS,MAAOC,QAAS,UAC3B,CAAEC,SAAU,QAASC,SAAU,WAEhCC,qBACC,CAAEJ,QAAS,QAASC,QAAS,UAC7B,CAAEC,SAAU,MAAOC,SAAU,WAEjC9qB,KAAKgqB,IAAMhqB,KAAK6pB,QAAQmB,OAAO,CAC7BP,mBACAQ,WAAY,eACZC,eAAgBlrB,KAAK6pB,QAAQsB,iBAAiB5B,UAEhD,IAAMjB,EAAOtoB,KAAKgqB,IAAIoB,OACpB,IAAIC,kBAAgBhC,KAEhBd,EAAWD,EAAKC,SACtBA,EAASjW,KAAOtS,KAAKsS,KACrBiW,EAASvhB,UAAYA,GACrBuhB,EAASmB,MAAQA,EAEjB,IAAM4B,EAAO,IAAIC,eACjBD,EAAKtpB,IACHumB,EAASgB,MAAMrkB,UAAU,SAACC,GACxB9D,EAAKkoB,MAAM7C,KAAKvhB,GAChB9D,EAAK0C,YAGTukB,EAAKkD,UAAU,WAAM,OAAAF,EAAK7iB,qCA/E7B/I,wDAfC+rB,gCC+GA,WACSC,EACC5rB,EACAwE,EACAsN,EACAhS,EACA4E,EACkBzE,EAGlB8R,GAVV,WACS7R,SAAA0rB,EACC1rB,QAAAF,EACAE,YAAAsE,EACAtE,WAAA4R,EACA5R,QAAAJ,EACAI,YAAAwE,EACkBxE,SAAAD,EAGlBC,aAAA6R,YAxEU,YAEd,YAI6B2T,GAAkBC,kBAWpC,oBAoBK,eASL,qBASM,cAEqB,IAAIhhB,0BAEL,IAAIA,eAe7C,IAAMiE,EAAS1I,KAAKsE,OAAOsE,OAAOC,KAChCC,SAAO,SAAA6iB,GAAO,OAAAA,aAAe5iB,mBAE/B/I,KAAKsrB,KAAYM,gBAAc5rB,KAAK0rB,IAAIzmB,OAAQyD,GAAQxD,UACtD,SAACqX,OAACpX,OAAY,OAAA9D,EAAKwqB,QAAQ1mB,KAEzBnF,KAAK6R,UACP7R,KAAK8rB,MAAQ9rB,KAAK6R,QAAQ5M,OAAOC,UAAU,WAAM,OAAA7D,EAAKwqB,0CAtEtDE,oCACF,OAAO/rB,KAAKgmB,YAEd,SAAU7lB,GACRH,KAAKgmB,OAASniB,wBAAsB1D,0DAKlC4rB,kCACF,OAAO/rB,KAAK4lB,UAEd,SAAQzlB,GACNH,KAAK4lB,KAAOxlB,uBAAqBD,0DAO/B4rB,yCACF,OAAO/rB,KAAKgsB,iBAEd,SAAe7rB,GACbH,KAAKgsB,YAAcnoB,wBAAsB1D,0DAKvC4rB,oCACF,OAAO/rB,KAAKisB,YAEd,SAAU9rB,GACRH,KAAKisB,OAASpoB,wBAAsB1D,0DAKlC4rB,0CACF,OAAO/rB,KAAKksB,kBAEd,SAAgB/rB,GACdH,KAAKksB,aAAeroB,wBAAsB1D,oCA+BpC4rB,4BAAOnc,GACb,OAAOA,EAAM0C,MAAQtS,KAAK6R,QACtB7R,KAAK6R,QAAQU,MAAM3C,EAAM0C,MACzB1C,EAAMyC,MAGJ0Z,6BAAQjW,cACRqW,EAAWrW,GAA4B,UAAlBA,EAAO6Q,OAC5ByF,EAAiBD,EACnBnsB,KAAKoF,KAAK6b,UAAU,SAAAnH,GAAK,OAAAA,EAAEhV,MAAQgR,SAClC,EACCuW,EAAKrsB,KAAK0rB,IAAIY,MAAMvP,IAAI,SAAC/V,EAAsBsR,GACnD,OACExT,IAAKkC,EAAKlC,IACV8K,MAAOvO,EAAKkrB,OAAOvlB,EAAK4I,OACxBiX,SAAUxlB,EAAKmrB,YAAcxlB,EAAK6f,UAA6B,EAAjBxlB,EAAKqqB,IAAIlrB,MACvD8X,QACAqO,QAAQ,EACRnS,MAAM,KAGV,GAAIxU,KAAKysB,YAAa,CACpB,IAAMlG,EAAWvmB,KAAK4R,MAAM2U,SACtBmG,EAAM1sB,KAAK0rB,IAAIrF,OAAOE,GACtBxE,EAAMsK,EAAGpL,UAAU,SAAAnH,GAAK,OAAAA,EAAEhV,MAAQ4nB,IAGxC,IAAa,IAAT3K,GAAeoK,GAAYrW,QAAe4W,EAC5C1sB,KAAK2sB,IAAMR,EACAC,GAAPrK,EACE/hB,KAAK2sB,IAAM,EACX3sB,KAAK2sB,IACP5K,MACC,CACL,IAAM6K,EAAe5sB,KAAK0rB,IAAIjE,cAAclB,GAC5C8F,EAAGre,MACDlJ,MACA8K,MAAO5P,KAAKusB,OAAOvsB,KAAK0rB,IAAI7C,SAAS6D,EAAKE,IAC1C/F,SACE7mB,KAAKwsB,YACY,EAAjBxsB,KAAK0rB,IAAIlrB,OACTR,KAAK0rB,IAAI5C,YAAY4D,EAAKE,GAC5BtU,MAAO+T,EAAGhtB,OACVsnB,QAAQ,EACRnS,MAAM,IAERxU,KAAK2sB,IAAMN,EAAGhtB,OAAS,EAGrBgtB,EAAGhtB,QAAU,IAAGgtB,EAAG,GAAGxF,UAAW,IAGvC7mB,KAAKoF,KAAOinB,GAELhtB,QAAU8sB,GACfnsB,KAAK6sB,GAAG,KAAM7sB,KAAK2sB,KAGrB3sB,KAAK8sB,WAAU,GACf9sB,KAAK+sB,aACL/sB,KAAKF,GAAGuF,iBAGF0mB,kCACF/rB,KAAKysB,aACTzsB,KAAKwE,OAAOwoB,SACVhtB,KAAKJ,GAAGiC,cACR,UACqB,IAArB7B,KAAKoF,KAAK/F,OAAe,OAAS,UAMtC0sB,qBAAA,SAAS5mB,GACP,OAAQA,EAAI2S,MACV,IAAK,QACH9X,KAAKitB,OAAO,KAAM9nB,EAAI6B,KAAKsR,MAAOnT,EAAIyhB,qBACtC,MACF,IAAK,aACH5mB,KAAK0rB,IAAIjC,WAAWtkB,EAAI6B,KAAKlC,IAAKK,EAAIyhB,qBACtC5mB,KAAKupB,MAAMnhB,KAAK,MAChB,MACF,IAAK,QACL,IAAK,aACHpI,KAAK0rB,IAAIhb,MAAMvL,EAAIyhB,qBACnB5mB,KAAKupB,MAAMnhB,KAAK,QAKtB2jB,sBAAA,SAAU7R,GAAV,wBAAUA,MACJla,KAAKoF,KAAK/F,SACZW,KAAKoF,KAAKpF,KAAKoF,KAAK/F,OAAS,GAAGmV,MAAO,EACvCxU,KAAKoF,KAAKyI,QAAQ,SAAC3O,EAAG6iB,GAAQ,OAAC7iB,EAAEynB,OAAStlB,EAAKsrB,MAAQ5K,KAErD7H,GAAIla,KAAKF,GAAGuF,iBAGlB0mB,eAAA,SAAGxmB,EAAU+S,GAAb,WACM/S,IACFA,EAAEE,iBACFF,EAAEC,mBAEJ8S,EAAQ9Q,KAAKC,IAAI,EAAGD,KAAKqe,IAAIvN,EAAOtY,KAAKoF,KAAK/F,OAAS,IACvD,IAAM2H,EAAOhH,KAAKoF,KAAKkT,GACvBtY,KAAKsE,OAAO2B,cAAce,EAAKlC,KAAK0S,KAAK,SAAArS,GAClCA,IACL9D,EAAKsrB,IAAMrU,EACXjX,EAAK2F,KAAOA,EACZ3F,EAAKyrB,YACLzrB,EAAK4D,OAAOmD,KAAKpB,OAIrB+kB,mBAAA,SAAOxmB,EAAUwc,EAAa6E,GACxBrhB,IACFA,EAAEE,iBACFF,EAAEC,mBAEJ,IAAMwB,EAAOhH,KAAKoF,KAAK2c,GAIvB,OAHA/hB,KAAK0rB,IAAInC,MAAMviB,EAAKlC,IAAK8hB,GACzB5mB,KAAKupB,MAAMnhB,KAAKpB,GAChBhH,KAAKF,GAAGuF,iBACD,GAKT0mB,qBAAA,WACE/rB,KAAK6O,WAEL7O,KAAK6rB,WAGCE,gCACN,IAAMnsB,EAAKI,KAAKJ,GAAGiC,cACb0I,EAAOvK,KAAKD,IAAI4B,cAAc,QAE9BurB,EAAU,gBACZltB,KAAK4iB,OACP5iB,KAAKwE,OAAOV,SAASlE,EAHN,SAIfI,KAAKwE,OAAOV,SAASyG,EAAM2iB,KAE3BltB,KAAKwE,OAAOuJ,YAAYnO,EANT,SAOfI,KAAKwE,OAAOuJ,YAAYxD,EAAM2iB,KAIlCnB,wBAAA,SACErgB,GAEIA,EAAQjE,MAAKzH,KAAK0rB,IAAIjkB,IAAMzH,KAAKyH,KACjCiE,EAAQyhB,WAAUntB,KAAK0rB,IAAIyB,SAAWntB,KAAKmtB,UAC3CzhB,EAAQ0b,OAAMpnB,KAAK0rB,IAAItE,KAAOpnB,KAAKonB,MACvCpnB,KAAK0rB,IAAIxD,MAAQloB,KAAKkoB,MAEtBloB,KAAK6O,WACL7O,KAAKF,GAAGuF,iBAGV0mB,wBAAA,WACE/rB,KAAKsrB,KAAK7iB,cACNzI,KAAK8rB,OAAO9rB,KAAK8rB,MAAMrjB,mCAjQ9BvG,kBAAU,CACTT,SAAU,YACVU,SAAU,oeACVC,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,EACrBa,UAAW,CAAC2mB,iDAjBLpE,UAvBPhjB,2BAWO2G,gBAAuBgd,wBAL9B7jB,oBACAC,4CA2GGE,eAAOC,8CACPyQ,kBACA1Q,eAAO2Q,uDAjETzQ,sBAEAA,uBAEAA,qBASAA,0BASAA,4BAEAA,uBASAA,6BASAA,wBASA0G,wBAEAA,+BCnFD,WAAoBkiB,GAApB,WAAoB1rB,SAAA0rB,YATS,IAAIH,2BAOd,IAAI9mB,eAGrBzE,KAAKsrB,KAAKtpB,IAAI0pB,EAAI0B,KAAKloB,UAAU,SAAAilB,GAAW,OAAA9oB,EAAKqqB,IAAI2B,KAAKlD,MAC1DnqB,KAAKsrB,KAAKtpB,IAAI0pB,EAAInC,MAAMrkB,UAAU,SAAAC,GAAO,OAAA9D,EAAK4D,OAAOmD,KAAKjD,mCARxDmoB,iCAAKntB,GACPH,KAAK0rB,IAAIpZ,KAAOnS,mCAUlBmtB,wBAAA,WACEttB,KAAKsrB,KAAK7iB,mCArBbvG,kBAAU,CACTT,SAAU,oBACVU,SAAU,GACVI,qBAAqB,+CALdwnB,oCAUNjnB,wBAKA0G,+BCdD,WAAoBkiB,GAAA1rB,SAAA0rB,SAGpB6B,mCAAc7D,GACZ1pB,KAAK0rB,IAAI0B,KAAK1G,KAAK,CACjBgD,QACA1iB,KAAMhH,KAAKgH,OAEb0iB,EAAMjkB,iBACNikB,EAAMlkB,uCAfTyF,kBAAU,CACTxJ,SAAU,8DAJHsoB,oCAONjnB,cAAM,uCAINE,qBAAa,cAAe,CAAC,mBCH1BC,GAAa,CAAC8oB,IACdyB,GAAY,CAChBnE,GACAiE,GACAC,uCAaOE,UAAP,WACE,MAAO,CACLtqB,SAAUsqB,EACVrqB,UAAW,CACTuiB,0BAXPtiB,iBAAS,CACRC,QAAS,CAACC,eAAcmG,eAAcC,oBAAmB+jB,iBACzDlqB,aAAkBP,UAAeuqB,IACjCG,gBAAiB,CAACtE,IAClB5lB,QAAaR,4DCjB2B,IAAIyiB,kBAAqB,aAGjEkI,mBAAA,WACE5tB,KAAKkd,QAAQwJ,MAAK,IAGpB5nB,sBAAI8uB,0BAAJ,WACE,OAAO5tB,KAAKkd,QAAQrU,KAAKglB,gEAV5BnuB,oBCuBKoO,GAAM,uBACNggB,GAAQ,qBACRC,GAAe,mCAsDnB,WACUnuB,EACA0E,EACAxE,EACA4rB,EACkB3rB,GAJlBC,QAAAJ,EACAI,YAAAsE,EACAtE,QAAAF,EACAE,SAAA0rB,EACkB1rB,SAAAD,eAhDX,UAGJ,iBAAiByH,KAAKwmB,SAChChiB,SAAS,IACTiiB,UAAU,gBAE6B,mBAoBrB,gBASF,yBAGuB,IAAIxpB,4BAwFd,kCAnH5BypB,yCACF,OAAOluB,KAAKmuB,iBAEd,SAAehuB,GACbH,KAAKmuB,YAActqB,wBAAsB1D,0DAKvC+tB,wCACF,OAAOluB,KAAKouB,gBAEd,SAAcjuB,GACZH,KAAKouB,WAAavqB,wBAAsB1D,0DAKtC+tB,sCACF,OAAOluB,KAAKquB,cAEd,SAAYluB,GACVH,KAAKquB,SAAWjuB,uBAAqBD,oCAiBvC+tB,qBAAA,WAAA,WACEluB,KAAKyL,QAAS,EACdzL,KAAK4E,OAAS5E,KAAKD,IAAI4B,cAAc,QACrC3B,KAAK4E,OAAO7C,UAAUC,IAAI8L,IACzB9N,KAAKJ,iBAAiCqH,GAAKjH,KAAKiH,GACjDjH,KAAKsB,SACLtB,KAAKsuB,qBACLtuB,KAAKuuB,KAAYvuB,KAAK0rB,IAAIzmB,OAAOC,UAAU,SAAAC,GACrCA,GAAK9D,EAAKmtB,WAEhBxuB,KAAK0I,OAAc1I,KAAKsE,OAAOsE,OAC5BC,KACCC,SACE,SAACvD,GACC,OAAAA,aAAakpB,mBAAmBlpB,aAAampB,kBAEjDC,eAAa,MAEdzpB,UAAU,SAAAK,GACHqpB,SAASjtB,cAAc,IAAMN,EAAK4F,KACtC5F,EAAKuD,OAAO7C,UAAUC,IAAI8L,IAC1BzM,EAAKwtB,eAELxtB,EAAKuD,OAAO7C,UAAUgC,OAAO+J,GAAKggB,GAAOC,OAKjDG,4BAAA,WAAA,WACEY,WAAW,WAAM,OAAAztB,EAAK0tB,kBAGhBb,mCACFluB,KAAKgvB,YACPhvB,KAAK4E,OAAO7C,UAAUC,IAAI8rB,IACtB9tB,KAAKivB,WAAWjvB,KAAK4E,OAAO7C,UAAUC,IAAI+rB,MAE9C/tB,KAAK4E,OAAO7C,UAAUgC,OAAO+pB,IACzB9tB,KAAKivB,WAAWjvB,KAAK4E,OAAO7C,UAAUgC,OAAOgqB,MAI7CG,8BACNluB,KAAK6uB,cACL7uB,KAAKkvB,iBAAiB9mB,KAAKpI,KAAKgvB,aAG1Bd,oCACNluB,KAAKmvB,QACHnvB,KAAK4E,OAAO2C,wBAAwBgjB,OACnCvqB,KAAKJ,iBAAiC2H,wBAAwBG,IAC/D1H,KAAKovB,QACPpvB,KAAKF,GAAGuF,iBAGV6oB,mBAAA,WACEluB,KAAKgvB,YAAchvB,KAAKgvB,WACxBhvB,KAAKsB,SACLtB,KAAK+uB,gBAGPb,wBAAA,SACExiB,GAEI1L,KAAKyL,QAAQzL,KAAKsB,UAGxB4sB,wBAAA,WACEluB,KAAK4E,OAAO7C,UAAUgC,OAAO+J,GAAKggB,GAAOC,IACzC/tB,KAAKqvB,uBACLrvB,KAAKuuB,KAAK9lB,cACVzI,KAAK0I,OAAOD,eAMNylB,qDACNluB,KAAKsvB,QAAeC,sBAAoBvE,OAAO/hB,OAAQ,UACpDJ,KAAK8lB,eAAa,MAClBzpB,UAAU,WAAM,OAAA7D,EAAK0tB,kBAGlBb,4CACNluB,KAAKsvB,QAAQ7mB,mCAhJhBvG,kBAAU,CACTT,SAAU,eACVU,SAAU,4BACVyK,KAAM,CAAE4iB,0BAA2B,QACnCptB,gBAAiBC,0BAAwBC,oDAlCzCG,oBAwBO6G,gBAtBP3G,2BAqBOirB,mCAgEJhrB,eAAOC,kDAzCTE,oBAAY,uCAIZD,2BASAA,yBASAA,kCASA0G,+BCxED,WAAoBme,GAAA3nB,YAAA2nB,SAGpB8H,8BACEzvB,KAAK2nB,OAAO6G,8BARfvjB,kBAAU,CACTxJ,SAAU,6DAHHysB,sCAQNlrB,qBAAa,iBCFVC,GAAa,CAACirB,GAAsBuB,uCAQjCC,UAAP,WACE,MAAO,CACLvsB,SAAUusB,EACVtsB,UAAW,CAACwqB,0BATjBvqB,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,kCCJb,WAAoByoB,GAAA1rB,SAAA0rB,SAGpBiE,8BACE3vB,KAAK0rB,IAAIjR,OAAOza,KAAK6Q,2BARxB5F,kBAAU,CAAExJ,SAAU,sDAHd4U,oCAKNvT,cAAM,wBAINE,qBAAa,iBCHVC,GAAa,CAAC0sB,uCAQXC,UAAP,SAAeta,GACb,MAAO,CACLnS,SAAUysB,EACVxsB,UAAW,CAACiT,GAAa,CAAEwZ,QAAS3Z,GAAgB4Z,SAAUxa,0BATnEjS,iBAAS,CACRC,QAAS,CAACC,eAAciJ,mBACxBhJ,aAAkBP,WAClBQ,QAAaR,oBCVF8sB,GAAgB,IAAI5Z,iBAA0B,+BCczD,WACiCb,EACvB1L,EACAwM,GAFuBpW,YAAAsV,EACvBtV,UAAA4J,EACA5J,UAAAoW,SAGF4Z,4BACN,IAAM1a,EAASxW,OAAOC,OACpB,CACE+F,IAAK,6CACLkS,MAAO,IAEThX,KAAKsV,QAGP,OAAOtV,KAAKoW,KAAKG,KAAK,CAACjB,EAAOxQ,KAAK0R,OAAOlB,EAAO0B,SAG3CgZ,2BAAMC,GACZ,IAAKA,EAAK,MAAM,IAAInuB,MAAM,2CAI5BkuB,iBAAA,SAAK7Y,EAA0Bc,GAA/B,WACE,OAAO,IAAIb,QAAa,SAAC8Y,EAAS5Y,GAChCjW,EAAKkW,OAAOC,KAAK,WAEf,GAAyB,iBAAdL,EAAX,CAcA,IAAMM,EAAqB,IAAIC,WAC/BD,EAAOE,OAAS,SAACpS,GACf4qB,MAAMC,UAAU7qB,EAAEsS,OAAOrH,OAAQyH,GAAST,KAAK,SAAAd,GAAO,OAAAwZ,EAAQxZ,MAEhEe,EAAO4Y,2BAjBLhvB,EAAKuI,KACFG,QAAQ,MAAOoN,EAAW,CAAE/M,aAAc,gBAC1ClF,UACC,SAACC,GACCgrB,MAAMC,UAAUjrB,EAAK8S,GAAST,KAAK,SAAAd,GAAO,OAAAwZ,EAAQxZ,MAEpD,SAAC1L,GACCsM,EAAOtM,UAgBrBglB,mBAAA,WAAA,WACE,OAAO,IAAI5Y,QAAa,SAAA8Y,GACtB7uB,EAAKkW,OAAOC,KAAK,WACf,IAAM8Y,EAAe,IAAIH,MACzBD,EAAQI,QAWdN,oBAAA,SAAQC,EAAU/G,EAAcpkB,GAAhC,WAEE,OADA9E,KAAKuwB,MAAMN,GACJ,IAAI7Y,QAAc,SAAC8Y,EAAS5Y,GACjCjW,EAAKuI,KAAKG,QAAQ,MAAOjF,EAAK,CAAEsF,aAAc,gBAAiBlF,UAC7D,SAACC,GACC8qB,EAAIO,KAAKtH,EAAM/jB,GACf+qB,KAEF,SAACzlB,GACC6M,EAAO,CAAExS,MAAK2F,eAYtBulB,iBAAA,SAAKC,EAAUhY,GACbjY,KAAKuwB,MAAMN,GACX,IAAMvW,EAAM5a,OAAOC,OAAO,GAAIkZ,GAC9B,OAAO,IAAIb,QAAc,SAAC8Y,EAAS5Y,GACjC2Y,EACGQ,cAAc3xB,OAAOC,OAAO,CAAE+Y,KAAM,QAAU4B,EAAIzB,SAAUyB,EAAIpY,QAChEkW,KACC,SAAC3G,GACK6I,EAAIf,UAAUe,EAAIf,SAAS9H,GAC/BhG,SAAOgG,EAAM6I,EAAIT,UAAY,gBAC7BiX,KAEF,SAAAllB,GACEsM,EAAOtM,4BAtGlBtL,iFAGIkD,eAAOmtB,aAhBH7kB,oBAEAgO,yDCQAwX,UAAP,SAAepb,GACb,MAAO,CACLnS,SAAUutB,EACVttB,UAAW,CAAC4sB,GAAY,CAAEH,QAASE,GAAeD,SAAUxa,0BAPjEjS,iBAAS,CACRC,QAAS,CAACC,eAAciJ,4BCN1B,YACErM,EACAwwB,EACA1Y,GAUA,gBAXA0Y,MAGA1Y,EAAUnZ,OAAOC,OACf,CACE6xB,YAAa,IACbC,YAAY,GAEd5Y,GAEmB,iBAAV9X,IAAoBA,EAAQA,EAAM6L,aACxC,kBAAkB+b,KAAK5nB,IAAU8X,EAAQ4Y,WAC5C,MAAM,IAAI/uB,MAAS3B,6BACrB,IAAI2wB,EAA0BC,EAC7BD,GAADvU,mBAAUwU,OACV,IAAIC,EAAS,GACTF,EAAQjrB,WAAW,OACrBmrB,EAAS/Y,EAAQ2Y,YACjBE,EAAUA,EAAQ1kB,OAAO,IAEvB,UAAU2b,KAAK5nB,KAAQ4wB,EAAU,MACrCD,IAAYA,GAAS9kB,WACrB,IAAMilB,EAAO,CACXC,IAAKP,EACD,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClD,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACtDQ,OAAQR,EACJ,CACE,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEF,CACE,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,IACA,IACA,IACA,IACA,IACA,IACA,KAENS,IAAK,CAAC,IAAK,IAAK,IAAK,MAEnBT,IAAKxwB,IAAUA,GAAOkxB,QAAQ,GAAGrlB,YACrC,IAAIslB,EAAa,GACXC,EAAeT,EAAQzxB,OAC7B,GAAgB,MAAZyxB,GAAoC,IAAjBS,EACrBD,EAAa,SAGb,IADA,IAAIE,EAAS,GACJtyB,EAAI,EAAGA,EAAIqyB,EAAcryB,IAAK,CACrC,IAAMC,GAAK2xB,EAAQ5xB,GACjBob,EAAIiX,EAAeryB,EAAI,EAEvBuyB,EADa,EAAJvyB,GAAe,IAANC,GAA8B,MAAnB2xB,EAAQ5xB,EAAI,GACvB,IAAM,GACxBwyB,EACS,IAANvyB,GAAWmb,EAAI,GAAM,GAAmC,SAA7BwW,EAAQ1kB,OAAOlN,EAAI,EAAG,GACpDyyB,EAAWH,EACTI,EAAQX,EAAKC,IAAI/xB,GAErBqyB,EAASE,EAAe,GAAKT,EAAKE,OAAO7W,GAE/B,IAANpb,GAAqB,MAAV0yB,GAA4B,MAAXJ,IAAgBI,EAAQ,IAElD,EAAJzyB,GACU,MAAVyyB,IACoC,IAApC,CAAC,GAAI,IAAK,KAAKzI,QAAQqI,IACV,MAAbG,IACcC,EAAQ,KACxBN,GAAcG,EAASG,EAAQJ,EAKnC,MAAIK,EAAa,GACXC,EAAef,EAAUA,EAAQ/kB,WAAW3M,OAAS,EAC3D,GAAgB,OAAZ0xB,EACFc,EAAalB,EAAM,IAAM,QACpB,GAAgB,MAAZI,EACTc,EAAa,SAEb,IAAS3yB,EAAI,EAAGA,EAAI4yB,KACdnB,GAAOzxB,EAAI+xB,EAAKG,IAAI/xB,OAAS,GADDH,IAAK,CAMrC2yB,IAHEJ,EAAe,OADXtyB,EAAI4xB,EAAQ7xB,IACK,IAAM,KAC3B0yB,EAAQX,EAAKC,IAAI/xB,KACjBqyB,EAASb,EAAMM,EAAKG,IAAIlyB,GAAK,IASnC,OAJE8xB,GACCL,EACGW,GAA6B,MAAfO,EAAqB,KAAO,IAAIA,GAC9CP,GAA6B,KAAfO,EAAoB,GAAK,IAAIA,IChInD,uCAOEE,sBAAA,SACE5xB,EACAwwB,EACAC,GAEA,oBAHAD,mBACAC,OAEOoB,GAAgB7xB,EAAOwwB,EAAK,CAAEC,qCAPxCqB,aAAK,CAAErb,KAAM,eCDRsb,GAAQ,CAACH,uCAQNI,UAAP,WACE,MAAO,CAAEhvB,SAAUgvB,EAAyB/uB,UAAW,yBAP1DC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAc0uB,GACdzuB,QAASyuB,mECPVxyB,kCCkBC,WAAoB0yB,EAA+BC,GAA/BryB,YAAAoyB,EAA+BpyB,eAAAqyB,gBALjC,cACM,gBACc,IAAIvI,uBACG,IAAIA,2BAwKpB,GArK3B9pB,KAAKL,IAAMyyB,SAQbtzB,sBAAIwzB,uBAAJ,WACE,OAAOtyB,KAAKuyB,UAEd,SAAQpyB,GACNH,KAAKuyB,KAAOzzB,OAAOC,OACjB,CACE+F,IAAK,wCACL8R,KAAM,SACN4b,YAAa,GACbC,cAAe,KAEjBzyB,KAAKoyB,OACLjyB,oCAKJrB,sBAAIwzB,0BAAJ,WACE,OAAOtyB,KAAK0yB,QAAQvM,gDAGdmM,6BACN,IAAKtyB,KAAK2yB,OAAQ,MAAM,IAAI7wB,MAAM,sBAG5BwwB,0CACNtyB,KAAK4yB,SAAU,EAEf,IAAM9tB,EAAS9E,KAAKL,IAAImF,aAAY9E,KAAKL,IAAIiX,KACzC6b,EAAgBzyB,KAAKL,IAAI8yB,cACvBI,EAAY,SAACvoB,EAAQG,GACzBpJ,EAAKyxB,MAAMpM,KAAK,CACdqM,GAAe,OAAXzoB,EACJA,SACAG,QACAuoB,MAAO3xB,EAAKsxB,UAGVM,EAAc,WAElB,KADER,EACEpxB,EAAKsxB,OAAOO,QAA4C,IAAlC7xB,EAAKsxB,OAAOO,OAAOC,WAC3CN,EAAU,UACL,CACL,GAAIJ,EAAgB,EAElB,YADAI,EAAU,eAGZ/D,WAAW,WAAM,OAAAmE,KAAe,OAIpCjzB,KAAKqyB,UAAU9b,KAAKzR,GAAK0S,KAAK,SAACrS,GAC7B,GAAmB,IAAfA,EAAI9F,QAAkC,OAAlB8F,EAAI,GAAGmF,OAG7B,OAFAjJ,EAAKuxB,SAAU,OACfC,EAAU,oBAAqB1tB,EAAI,IAGrC9D,EAAKsxB,OACH1pB,OAAOzJ,eAAe6B,EAAK1B,IAAIiX,OAC9B3N,OAAO5H,EAAK1B,IAAIiX,MACC,OAAhBvV,EAAKsxB,QAITtxB,EAAKsxB,OAAOS,aACV/xB,EAAK1B,IAAI6yB,YACTnxB,EAAK1B,IAAI0zB,QACThyB,EAAK1B,IAAI2zB,SACTjyB,EAAK1B,IAAI4zB,UAEXN,KATEJ,EAAU,2BAA4B,CAAEjc,KAAMvV,EAAK1B,IAAIiX,UAc7D0b,kBAAA,WACEtyB,KAAK2yB,OAAS,KACd3yB,KAAK4yB,SAAU,EACf5yB,KAAK+J,WAIPjL,sBAAIwzB,yBAAJ,WACE,OAAItyB,KAAK2yB,OAAepT,MAAkBwT,IAAI,EAAMC,MAAOhzB,KAAK2yB,UAC5D3yB,KAAK4yB,SAET5yB,KAAK+J,UAFoB/J,KAAK8yB,MAAM3M,iDAQtCrnB,sBAAIwzB,2BAAJ,WACEtyB,KAAKuwB,QAGL,IAFA,IAAM7Z,EAAgB,GAChBlW,EAAQR,KAAK2yB,OAAOa,oBACjBlb,EAAQ,EAAGA,EAAQ9X,EAAO8X,IACjC5B,EAAI1I,KAAKhO,KAAK2yB,OAAOc,iBAAiBnb,IAExC,OAAO5B,mCAYT4b,uBAAA,SAAWoB,EAAcC,EAAqBC,GAA9C,WACE5zB,KAAKuwB,QACAqD,IAAQA,EAAS,gCACtBF,EAAK3nB,MAAM,MAAM8B,QAAQ,SAAAgmB,GACvB,IAAM1uB,EAAMyuB,EAAOE,KAAKD,EAAKE,QAC7B,GAAK5uB,EAAL,CACA,IAAM6uB,EAAK3yB,EAAKsxB,OAAOxtB,EAAI,IAC3B,GAAI6uB,EAAI,CACN,IAAIloB,SACJ,IAEEA,EADe,IAAImoB,SAAS,WAAW9uB,EAAI,UAE3C,MAAOoX,IAET,GAAIpE,MAAMC,QAAQtM,IAAQ6nB,EACxB,IAAK,IAAIz0B,EAAI,EAAGA,EAAI4M,EAAIzM,OAAQH,IACR,iBAAX4M,EAAI5M,KACb4M,EAAI5M,GAAK4M,EAAI5M,GAAG+c,QACd,aACA,SAACiY,EAAOlU,GAAQ,OAAA2T,EAAW3T,EAAI+T,SAAW,MAKlDC,EAAGG,MAAM9yB,EAAKsxB,OAAQ7mB,QAU5BwmB,mBAAA,WAAA,WACEtyB,KAAKuwB,QACL,IAAM6D,EAAMp0B,KAAK2yB,OAAO0B,eACxB,OAAO,IAAIjd,QAAQ,SAAA8Y,GACjB7uB,EAAKsxB,OAAO2B,UAAY,SAACC,EAAgBp0B,GACnCi0B,IAAQG,IACZlzB,EAAKsxB,OAAO2B,UAAY,KACxBpE,EAAQ,GAAK/vB,QAMXmyB,0CACAzhB,EAAO7Q,KAAKw0B,YAAY5L,QAC9B,GAAK/X,EAAL,CACA7Q,KAAKy0B,WAAW5jB,EAAK6iB,KAAM7iB,EAAK7J,KAAM6J,EAAK+iB,QAC3C,IAAMQ,EAAMp0B,KAAK2yB,OAAO+B,QACxB10B,KAAK2yB,OAAO2B,UAAY,SAACC,EAAgBp0B,GACnCi0B,IAAQG,IACZlzB,EAAKsxB,OAAO2B,UAAY,KACxBjzB,EAAKqxB,QAAQhM,KACX5nB,OAAOC,QAEHg0B,IAAc,IAAV5yB,EACJsK,OAAiB,IAAVtK,EAAiB,KAAOA,GAEjC0Q,IAGJxP,EAAKszB,cAWTrC,kBAAA,SAAMoB,EAAcC,EAA+BC,SACjD5zB,KAAKuwB,QACDoD,IACFpX,EAAAvc,KAAKw0B,aAAYxmB,cACXmK,MAAMC,QAAQub,GAAcA,EAAa,CAACA,IAAa5W,IAAI,SAAA/V,GAC7D,MAAO,CAAE0sB,OAAME,SAAQ5sB,WAI7BhH,KAAK20B,WAGPrC,wBAAA,WACEtyB,KAAK8yB,MAAMrqB,cACXzI,KAAK0yB,QAAQjqB,mCAzNhB/I,wDAHQk1B,UAHA1b,yDCKA2b,UAAP,WACE,MAAO,CACL1xB,SAAU0xB,EACVzxB,UAAW,CAACkvB,GAAcsC,0BAP/BvxB,iBAAS,CACRC,QAAS,CAACkJ,0CCsCV,WACU1M,EACAF,EACA4E,GAFAxE,QAAAF,EACAE,QAAAJ,EACAI,YAAAwE,YAfsB,6CAEjB,eAEE,iBAEE,wBAEI,kBAUR,iBAQwB,kBAkBpB,SAvBnBswB,8BACE90B,KAAKotB,MAAQptB,KAAKotB,KAClBptB,KAAKgtB,YAIC8H,gCACN90B,KAAK+0B,UAAY,CACfC,mBAAoBh1B,KAAKi1B,QACzBC,eAAgBl1B,KAAKm1B,aAGvB,IAAMhwB,EAAgB,CACpB,OAAOnF,KAAK0H,SACZ,SAAS1H,KAAK6iB,WACd,oBAAoB7iB,KAAKi1B,QACzB,gBAAgBj1B,KAAKm1B,YACrB,kBAAiBn1B,KAAKotB,KAAO,EAAIptB,KAAK6iB,aAExC7iB,KAAKwE,OAAO6H,aAAarM,KAAKJ,GAAGiC,cAAe,QAASsD,EAAI8G,KAAK,MAClEjM,KAAKF,GAAGuF,iBAIVyvB,qBAAA,WACE90B,KAAKo1B,UAAW,EAChBp1B,KAAKgtB,YAEP8H,wBAAA,SAAYppB,GACN1L,KAAKo1B,UAAUp1B,KAAKgtB,gCAvE3B9qB,kBAAU,CACTT,SAAU,aACVU,SAAU,+LAQVyK,KAAM,CAAEyoB,wBAAyB,QACjC9yB,qBAAqB,EACrBH,gBAAiBC,0BAAwBC,oDAjBzCK,2BAEAF,oBADAC,6CAqBCI,qBAMAA,uBAEAA,yBAEAA,6BAEAA,wBAYAE,qBAAa,iBCjDVC,GAAa,CAAC6xB,uCAQXQ,UAAP,WACE,MAAO,CAAEnyB,SAAUmyB,EAAmBlyB,UAAW,yBAPpDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,oBCVfsyB,8BAEe,6BAEK,kBAEL,6BAEK,aAEa,cAExB,yBAEG,aAEH,mBCYP,WAAY51B,wBAhBM,EAiBhBb,OAAOC,OAAOiB,KAAML,GACpBK,KAAKw1B,GAAK,IAAIC,cAQhBC,oBAAA,SAAQv1B,GAWN,OAVAH,KAAKw1B,GAAGG,IAAqB,iBAAVx1B,EAAqBA,EAAQ,CAC9Cy1B,WAAY51B,KAAK41B,WACjBC,gBAAiB71B,KAAK61B,gBACtBC,WAAY91B,KAAK81B,WACjBC,gBAAiB/1B,KAAK+1B,gBACtBC,MAAOh2B,KAAKg2B,MACZ5G,QAASpvB,KAAKovB,QACd5kB,KAAMxK,KAAKwK,KACXrK,MAAOA,GAASH,KAAKG,QAEhBH,KAAKi2B,SAMdn3B,sBAAI42B,2BAAJ,WACE,OAAO11B,KAAKw1B,GAAGU,iEAnDlBx2B,wDALQ61B,yBCoDP,WACE51B,EACQ+rB,EACA5rB,GADAE,SAAA0rB,EACA1rB,QAAAF,cAPS,IAAI2E,eASrB3F,OAAOC,OAAOiB,KAAML,UAGtBw2B,wBAAA,SAAYzqB,GACV1L,KAAKi2B,QAAUj2B,KAAK0rB,IAAI0K,QAAQ,CAC9BR,WAAY51B,KAAK41B,WACjBC,gBAAiB71B,KAAK61B,gBACtBC,WAAY91B,KAAK81B,WACjBC,gBAAiB/1B,KAAK+1B,gBACtBC,MAAOh2B,KAAKg2B,MACZK,KAAMr2B,KAAKq2B,KACXjH,QAASpvB,KAAKovB,QACd5kB,KAAMxK,KAAKwK,KACXrK,MAAOH,KAAKG,QAEdH,KAAKF,GAAGuF,gBACRrF,KAAKiF,OAAOmD,KAAKpI,KAAKi2B,8BA3DzB/zB,kBAAU,CACTT,SAAU,KACVU,SAAU,kCAGVI,qBAAqB,EACrBqK,KAAM,CAAE0pB,gBAAiB,QACzBl0B,gBAAiBC,0BAAwBC,oDATlCizB,UADAG,UANP/yB,2DAuBCG,iCAEAA,4BAEAA,iCAEAA,uBAEAA,sBAEAA,yBAEAA,sBAEAC,oBAAY,0BACZA,oBAAY,yBACZD,uBAEAA,wBAEA0G,iBCzCGvG,GAAa,CAACkzB,uCAQXI,UAAP,WACE,MAAO,CAAEpzB,SAAUozB,EAAYnzB,UAAW,CAACmyB,GAAYG,0BAP1DryB,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,kCCkEb,WAAoBrD,EAAwBE,GAAxBE,QAAAJ,EAAwBI,QAAAF,cA3CnC,cAWQ,wCAUC,mBAYG,aAIyB,wBAsFpB,eACM,KAhF9BE,KAAKF,GAAGmqB,sCAzCNuM,kCAAMr2B,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,EACrBH,KAAKF,GAAGuF,uEAONmxB,qCACF,OAAOx2B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAQlCq2B,wCACF,OAAOx2B,KAAKy2B,gBAEd,SAAct2B,GACZH,KAAKy2B,WAAa5yB,wBAAsB1D,oCAgB1Cq2B,oBAAA,WACE,GAAKx2B,KAAK6Q,QAAS7Q,KAAK6Q,MAAQ7Q,KAAK6Q,KAAKxR,OAAS,GAAnD,CAEAW,KAAKkH,KAAKrF,cAAc60B,UAAY,GAEpC,IAAItH,EAAUtwB,OAAOC,OAAO,GAAIiB,KAAKovB,SACjCA,EAAQ/vB,QAAU,IACpB+vB,EAAU,CAAC,GAAI,EAAGpvB,KAAK22B,gBAAkB,EAAI,GAAI,KAEnD,IAAMC,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBm1B,UAAU,EACVzM,QAASvqB,KAAKuqB,OAAS,GACvB0M,OAAQ,KACR7H,QAASA,IAGXwH,EAAMM,KAAK,KAAMl3B,KAAK22B,iBACtBC,EAAMM,KAAK,IAAK,CACdtnB,OAAO,EACPikB,MAAM,EACNsD,UAAU,IAGZP,EAAMQ,OAAOp3B,KAAK6Q,KAAM,CACtBwmB,EAAG,CACDvf,KAAM,OAERwf,EAAG,CACDzR,IAAK,KAIT+Q,EAAMW,QAAQ,CACZC,WAAW,IAEbZ,EACGa,WACAvQ,SAAS,OACTwQ,MAAM13B,KAAK03B,OACXH,QAAQ,MAAO,SAACF,EAAGC,GAClB,MAAO,CACL1gB,KAAMygB,EACNl3B,MAAOm3B,KAGbV,EAAMpyB,SACNsqB,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,WACL,IACH33B,KAAK42B,MAAQA,IAGfJ,sBAAA,WACMx2B,KAAK42B,QACP52B,KAAK42B,MAAM9P,UACX9mB,KAAK42B,MAAQ,OAIjBJ,qBAAA,WACEx2B,KAAKsuB,sBAGPkI,wBAAA,SAAY9qB,GACV1L,KAAK43B,UAGPpB,wBAAA,WACEx2B,KAAKqvB,uBACLrvB,KAAKkB,aAOCs1B,qDACDx2B,KAAK63B,YAAa73B,KAAKsvB,UAE5BtvB,KAAKsvB,QAAeC,sBAAoBvE,OAAO/hB,OAAQ,UACpDJ,KAAK8lB,eAAa,MAClBzpB,UAAU,WAAM,OAAA7D,EAAKu2B,aAGlBpB,4CACFx2B,KAAKsvB,SAAStvB,KAAKsvB,QAAQ7mB,eAGjC+tB,mBAAA,WAIE,GAHoBx2B,KAAKJ,GAAGiC,cAAci2B,aACN,GAAnB93B,KAAK6Q,KAAKxR,QAGzB,IAAKW,KAAK22B,gBAGR,OAFA32B,KAAK22B,iBAAkB,OACvB32B,KAAKiC,eAGF,GAAIjC,KAAK22B,gBAGd,OAFA32B,KAAK22B,iBAAkB,OACvB32B,KAAKiC,UAGFjC,KAAK42B,OAAO52B,KAAKiC,+BAlKzBC,kBAAU,CACTT,SAAU,SACVU,SAAU,gHAGVC,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,+CA1BrBE,oBASAE,sDAuBCG,uBASAA,wBAEAC,oBAAY,0BACZD,yBASAA,sBACAA,2BAEAA,sBAWAC,oBAAY,gCAEZuK,kBAAU,qBCrEPrK,GAAa,CAACuzB,uCAQXuB,UAAP,WACE,MAAO,CAAE50B,SAAU40B,EAAe30B,UAAW,yBAPhDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,+DC0CO,eAEV,eAUD,gBAUC,cAUO,gBAEP,oBASA,kBAkBS,+BAnEf+0B,uCACF,OAAOh4B,KAAK6b,eAEd,SAAa1b,GACXH,KAAK6b,UAAYhY,wBAAsB1D,0DAOrC63B,mCAAO73B,GACLA,aAAiBgN,eACnBnN,KAAKi4B,QAAU,KACfj4B,KAAKk4B,WAAa/3B,GACbH,KAAKi4B,QAAU93B,yDAMpB63B,kCAAM73B,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,yDAMnB63B,mCAAO73B,GACLA,aAAiBgN,eACnBnN,KAAKm4B,QAAU,KACfn4B,KAAKo4B,WAAaj4B,GACbH,KAAKm4B,QAAUh4B,yDAQpB63B,0CAAc73B,GAChBH,KAAKq4B,WAAal4B,EAClBH,KAAKmvB,QACc,iBAAVhvB,EAAsBH,KAAKmvB,QAAahvB,OAAaA,yDAM5D63B,mCAAO73B,GACLA,aAAiBgN,eACnBnN,KAAKs4B,QAAU,KACft4B,KAAKu4B,WAAap4B,GACbH,KAAKs4B,QAAUn4B,yDAKpB63B,sCACF,OAAOh4B,KAAKsQ,cAEd,SAAYnQ,GACVH,KAAKsQ,SAAWzM,wBAAsB1D,wDAtGzC+B,kBAAU,CACTT,SAAU,UACVU,SAAU,0oCA2BVyK,KAAM,CAAE4rB,qBAAsB,QAC9Bj2B,qBAAqB,wCAMpBO,wBAWAA,uBAUAA,wBAUAA,uBAQAA,+BAIAA,wBASAA,yBASAA,gBCpGGG,GAAa,CAAC+0B,uCAQXS,UAAP,WACE,MAAO,CAAEt1B,SAAUs1B,EAAgBr1B,UAAW,yBAPjDC,iBAAS,CACRC,QAAS,CAACC,eAAcoG,qBACxBnG,aAAkBP,WAClBQ,QAAaR,kCCuCb,WAAoBrD,GAAAI,QAAAJ,mBAVE,cAEuB,IAAI6E,2BAEJ,IAAIA,4BAEH,IAAIA,4BAsBlB,kCA3C5Bi0B,qCACF,OAAO14B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAKlCu4B,yCACF,OAAO14B,KAAK24B,iBAEd,SAAex4B,GACbH,KAAK24B,YAAcv4B,uBAAqBD,oCAclCu4B,mCACN14B,KAAKJ,GAAGiC,cAAc60B,UAAY,GAClC12B,KAAKwE,OAAO4D,KAAKpI,KAAKJ,KAGxB84B,qBAAA,WAAA,WACE5J,WAAW,WAAM,OAAAztB,EAAKu3B,eAAe,MAGvCF,wBAAA,WACE14B,KAAK8mB,QAAQ1e,KAAKpI,KAAKJ,IACvBI,KAAKqvB,wBAOCqJ,qDACF14B,KAAK64B,YAAc,IAAM74B,KAAK84B,UAE9B94B,KAAK64B,YAAc,MAAK74B,KAAK64B,WAAa,KAE9C74B,KAAK84B,QAAevJ,sBAAoBvE,OAAO/hB,OAAQ,UACpDJ,KAAK8lB,eAAa3uB,KAAK64B,aACvB3zB,UAAU,WAAM,OAAA7D,EAAKu2B,OAAOxvB,KAAK/G,EAAKzB,QAGnC84B,4CACF14B,KAAK84B,SAAS94B,KAAK84B,QAAQrwB,mCAjElCvG,kBAAU,CACTT,SAAU,WACVU,SAAU,gDAfVM,gDAoBCM,oBAAY,0BACZD,4BASAA,wBASA0G,yBAEAA,0BAEAA,iBCzCGvG,GAAa,CAACy1B,uCAQXK,UAAP,WACE,MAAO,CAAE51B,SAAU41B,EAAiB31B,UAAW,yBAPlDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,kCC6Cb,WAAoBnD,GAAAE,QAAAF,aApBH,uBACE,yBAiBR,EAGTE,KAAKF,GAAGmqB,sCA5BN+O,qCACF,OAAOh5B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAQlC64B,sCACF,OAAOh5B,KAAKi5B,cAEd,SAAY94B,GACVH,KAAKi5B,SAAW74B,uBAAqBD,oCAevC64B,qBAAA,WACEh5B,KAAKo1B,UAAW,EAChBp1B,KAAKiC,WAGC+2B,kCACN,MAAO,CAAC,CAAEpiB,KAAM5W,KAAK4P,MAAOzP,OAAQH,KAAKk5B,WAGnCF,4BACN,GAAKh5B,KAAK42B,MAAV,CACA52B,KAAK42B,MAAMuC,QAAQzoB,QACnB,IAAMG,EAAO7Q,KAAKo5B,aAElBp5B,KAAK42B,MAAMuC,QAAQE,IAAI,CACrBC,OAAQ,EACR5xB,KAAK,EACLuf,MAAO,CAAC,EAAG,KACXlR,IAAK,CAAC,IAAK,KACXlO,MAAO,CAEL0xB,OAAQv5B,KAAKi1B,QACbuE,UAAW,MAIfx5B,KAAK42B,MAAMuC,QAAQE,IAAI,CACrBC,OAAQ,EACRrS,MAAO,CAAC,EAAG,KACXlR,IAAK,CAAClF,EAAK,GAAG1Q,MAAO,KACrB0H,MAAO,CACL0xB,OAAQv5B,KAAK03B,MACb8B,UAAW,MAGfx5B,KAAK42B,MAAM6C,WAAW5oB,KAGxBmoB,oBAAA,WACEh5B,KAAKkH,KAAKrF,cAAc60B,UAAY,GACtBG,GAAG6C,MAEXC,cAAc,QAAS,UAAW,CACtCC,mBAAUC,EAAKC,GACb,IAAIC,EAAQF,EAAIG,OAAO,GACvBD,EAAQ/5B,KAAKi6B,WAAWF,GACxB,IAAMG,EAASl6B,KAAKi6B,WAAW,CAE7B5C,EAAG,EACHC,EAAG,IAGLwC,EAAMK,SAAS,OAAQ,CACrBC,MAAO,CACLC,GAAIH,EAAO7C,EACXiD,GAAIJ,EAAO5C,EACXiD,GAAIR,EAAM1C,EACVmD,GAAIT,EAAMzC,EACViC,OAAQM,EAAInC,MACZ8B,UAAW,EACXiB,QAAS,WAIL,IAAAC,WAWR,OAVAZ,EAAMK,SAAS,OAAQ,CACrBC,MAAO,CACL/C,EAAG6C,EAAO7C,EACVC,EAAG4C,EAAO5C,EAAI,GACdjlB,KAASqoB,EAAOC,QAAQx6B,UACxBy6B,UAAW,SACXC,SAAU,GACVC,KAAM,yBAGHhB,EAAMK,SAAS,SAAU,CAC9BC,MAAO,CACL/C,EAAG6C,EAAO7C,EACVC,EAAG4C,EAAO5C,EACVxP,EAAG,KACHyR,OAAQM,EAAInC,MACZ8B,UAAW,EACXsB,KAAM,aAMd,IAAMjqB,EAAO7Q,KAAKo5B,aACZxC,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBm1B,UAAU,EACVzM,OAAQvqB,KAAKuqB,OACb6E,QAAS,CAAC,GAAI,GAAI,GAAI,MAExBwH,EAAMQ,OAAOvmB,GAEb+lB,EAAMmE,MAAM,QAAS,CACnBC,YAAa,IAAMxzB,KAAKyzB,GACxBC,SAAU,GAAM1zB,KAAKyzB,KAEvBrE,EAAMuE,MAAM,QAAS,CACnBtV,IAAK,EACLpe,IAAK,IACL2zB,MAAM,EACNC,UAAW,IAGbzE,EAAMM,KAAK,KAAK,GAEhBN,EAAMM,KAAK,QAAS,CAClBoC,OAAQ,EACRzF,KAAM,KACNyH,MAAO,CACLC,QAAS,GACTC,UAAWx7B,KAAK2V,QAElBwhB,SAAU,KACV5iB,KAAM,OAERqiB,EAAMK,QAAO,GACbL,EACGmD,MAAM,CACL0B,gBAAgB,IAEjBvU,SAAS,WACTwU,MAAM,WACNhE,MAAM13B,KAAK03B,OACX/Q,QAAO,GAEV3mB,KAAK42B,MAAQA,EACb9H,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,YAER33B,KAAK27B,QAGP3C,sBAAA,WACMh5B,KAAK42B,OAAO52B,KAAK42B,MAAM9P,WAG7BkS,wBAAA,SACEttB,GAEI1L,KAAKo1B,UAAUp1B,KAAK27B,QAG1B3C,wBAAA,WACEh5B,KAAKkB,iCA9LRgB,kBAAU,CACTT,SAAU,WACVU,SAAU,yBACVC,gBAAiBC,0BAAwBC,oDARzCK,sDAaCG,wBACAA,uBAQAA,yBACAA,wBACAA,yBAEAA,sBAWAwK,kBAAU,qBC7CPrK,GAAa,CAAC+1B,uCAQX4C,UAAP,WACE,MAAO,CAAEz4B,SAAUy4B,EAAiBx4B,UAAW,yBAPlDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,kCC0Eb,WAAoBnD,GAAAE,QAAAF,aA3DH,2CACM,4BAQA,aAmBR,cASC,iBASG,eAIU,CAAC,EAAG,EAAG,EAAG,GAUrCE,KAAKF,GAAGmqB,sCAzDN4R,0CACF,OAAO77B,KAAK87B,kBAEd,SAAgB37B,GACdH,KAAK87B,aAAe17B,uBAAqBD,0DAMvC07B,qCACF,OAAO77B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAKlC07B,kCACF,OAAO77B,KAAK+7B,UAEd,SAAQ57B,GACNH,KAAK+7B,KAAOl4B,wBAAsB1D,0DAKhC07B,mCACF,OAAO77B,KAAKg8B,WAEd,SAAS77B,GACPH,KAAKg8B,MAAQn4B,wBAAsB1D,0DAKjC07B,sCACF,OAAO77B,KAAKi8B,cAEd,SAAY97B,GACVH,KAAKi8B,SAAWp4B,wBAAsB1D,oCAmBxC07B,oBAAA,WACE,GAAK77B,KAAK6Q,QAAS7Q,KAAK6Q,MAAQ7Q,KAAK6Q,KAAKxR,OAAS,GAAnD,CAEAW,KAAKkH,KAAKrF,cAAc60B,UAAY,GAEpC,IAAME,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBm1B,SAAUh3B,KAAKk8B,IACf3R,QAASvqB,KAAKuqB,OACd4R,QAASn8B,KAAKm8B,QACd/M,QAASpvB,KAAKovB,QACd6H,OAAQ,OAGLj3B,KAAKo8B,OAAUp8B,KAAKq8B,OACvBzF,EAAMM,MAAK,GAGTl3B,KAAKo8B,MACPxF,EAAMM,KAAK,IAAKl3B,KAAKo8B,OAErBxF,EAAMM,KAAK,KAAK,GAGdl3B,KAAKq8B,MACPzF,EAAMM,KAAK,IAAKl3B,KAAKq8B,OAErBzF,EAAMM,KAAK,KAAK,GAGlB,IAAMoF,EAAa,CACjBjF,EAAG,CACDvf,KAAM,MACNkE,MAAO,CAAC,EAAG,GACXogB,MAAOp8B,KAAKo8B,OAEd9E,EAAG,CACDzR,IAAK,EACLwW,MAAOr8B,KAAKq8B,QAIhBzF,EAAMW,QAAQ,CACZC,WAAW,EACX+E,cAAc,EACdC,aAAc,CAAEpN,QAAS,GACzBqN,uBAAwB,CAAEC,OAAQ,aAGpC,IAAMC,EAAO/F,EAAM+F,OAgBnB,GAfAA,EAAKvF,OAAOp3B,KAAK6Q,KAAMyrB,GAEvBK,EACGC,OACA1V,SAAS,OACTwQ,MAAM13B,KAAK03B,OACXH,QAAQ,MAAO,SAACF,EAAGC,GAClB,MAAO,CACL1gB,KAAMygB,EACNl3B,MAAOm3B,KAGVoE,MAAM,UACN7zB,MAAM,CAAEg1B,YAAa,IAEpB78B,KAAK6zB,KAAM,CACb,IAAMiJ,EAAQlG,EAAM+F,OACpBG,EAAM1F,OAAOp3B,KAAK6Q,KAAMyrB,GACxBQ,EACGjJ,OACA3M,SAAS,OACTwQ,MAAM13B,KAAKm1B,aACX3qB,KAAKxK,KAAK+8B,aACVrB,MAAM,UACToB,EAAMvF,SAAQ,GAEhBX,EAAMpyB,SACNsqB,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,YAER33B,KAAK42B,MAAQA,IAGfiF,sBAAA,WACM77B,KAAK42B,QACP52B,KAAK42B,MAAM9P,UACX9mB,KAAK42B,MAAQ,OAIjBiF,wBAAA,SAAYnwB,GACV1L,KAAKiC,WAGP45B,wBAAA,WACE77B,KAAKkB,iCAvKRgB,kBAAU,CACTT,SAAU,eACVU,SAAU,yBACVC,gBAAiBC,0BAAwBC,oDAXzCK,sDAgBCG,6BACAA,6BACAA,wBASAC,oBAAY,0BACZD,qBASAA,sBASAA,yBASAA,uBASAA,uBACAA,yBACAA,sBACAA,sBAIAwK,kBAAU,qBC3EPrK,GAAa,CAAC44B,uCAQXmB,UAAP,WACE,MAAO,CAAE75B,SAAU65B,EAAoB55B,UAAW,yBAPrDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,kCC2Cb,WAAoBnD,GAAAE,QAAAF,aA/BH,uBAUC,oBASK,eAEM,CAAC,EAAG,EAAG,EAAG,GAWrCE,KAAKF,GAAGmqB,sCA5BNgT,qCACF,OAAOj9B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAKlC88B,0CACF,OAAOj9B,KAAK87B,kBAEd,SAAgB37B,GACdH,KAAK87B,aAAe17B,uBAAqBD,oCAkB3C88B,oBAAA,WACE,GAAKj9B,KAAK6Q,QAAS7Q,KAAK6Q,MAAQ7Q,KAAK6Q,KAAKxR,OAAS,GAAnD,CAEAW,KAAKkH,KAAKrF,cAAc60B,UAAY,GAEpC,IAAME,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBm1B,UAAU,EACVzM,QAASvqB,KAAKuqB,OACd6E,QAASpvB,KAAKovB,QACd6H,OAAQ,OAGVL,EAAMM,MAAK,GAEXN,EAAMQ,OAAOp3B,KAAK6Q,KAAM,CACtBwmB,EAAG,CACDvf,KAAM,OAERwf,EAAG,CACDzR,IAAK,KAIT+Q,EAAMW,QAAQ,CACZC,WAAW,EACX+E,cAAc,EACdW,YAAY,EACZV,aAAc,CAAEpN,QAAS,GACzBqN,uBAAwB,CAAEC,OAAQ,aAEpC9F,EACGa,WACAvQ,SAAS,OACT1c,KAAKxK,KAAK+8B,aACVrF,MAAM13B,KAAK03B,OACXH,QAAQ,MAAO,SAACF,EAAGC,GAClB,MAAO,CACL1gB,KAAMygB,EACNl3B,MAAOm3B,KAIbV,EAAMpyB,SACNsqB,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,YAGR33B,KAAK42B,MAAQA,IAGfqG,sBAAA,WACMj9B,KAAK42B,QACP52B,KAAK42B,MAAM9P,UACX9mB,KAAK42B,MAAQ,OAIjBqG,wBAAA,SAAYvxB,GACV1L,KAAKiC,WAGPg7B,wBAAA,WACEj9B,KAAKkB,iCA3GRgB,kBAAU,CACTT,SAAU,cACVU,SAAU,yBACVC,gBAAiBC,0BAAwBC,oDAPzCK,sDAYCG,wBAEAC,oBAAY,0BACZD,6BASAA,yBASAA,sBAEAA,sBAIAwK,kBAAU,qBC5CPrK,GAAa,CAACg6B,uCAQXE,UAAP,WACE,MAAO,CAAEh6B,SAAUg6B,EAAmB/5B,UAAW,yBAPpDC,iBAAS,CACRC,QAAS,CAACC,gBACVC,aAAkBP,WAClBQ,QAAaR,0DCYI,uCAGbm6B,qCACF,OAAOp9B,KAAKq9B,aAEd,SAAWl9B,GACTH,KAAKq9B,QAAU71B,KAAKqe,IAAIre,KAAKC,IAAIrH,uBAAqBD,GAAQ,GAAI,4DAKhEi9B,0CACF,OAAOp9B,KAAKs9B,kBAEd,SAAgBn9B,GACdH,KAAKs9B,aAAel9B,uBAAqBD,0DAKvCi9B,sCACF,OAAOp9B,KAAKi5B,cAEd,SAAY94B,GACVH,KAAKi5B,SAAWzxB,KAAKqe,IAAIre,KAAKC,IAAIrH,uBAAqBD,GAAQ,GAAI,0DA5CtE+B,kBAAU,CACTT,SAAU,mBACVU,SAAU,qcAWVyK,KAAM,CAAE2wB,yBAA0B,QAClCh7B,qBAAqB,qCAKpBO,wBAEAA,6BASAA,yBASAA,gBCpCGG,GAAa,CAACm6B,uCAQXI,UAAP,WACE,MAAO,CAAEr6B,SAAUq6B,EAAwBp6B,UAAW,yBAPzDC,iBAAS,CACRC,QAAS,CAACC,eAAcoG,qBACxBnG,aAAkBP,WAClBQ,QAAaR,kCCyIb,WAAoBrD,EAAwBE,GAAxBE,QAAAJ,EAAwBI,QAAAF,iBAtFzB,aAEF,wCAWC,mBAUG,qBAUE,aAEN,iBACY,CAAC,GAAI,EAAG,GAAI,kBAkBtB,kBASE,gBASH,iBAWP,kBACS,gBAwIY,kCAlO5B29B,sCACF,OAAOz9B,KAAKi8B,cAEd,SAAY97B,GACVH,KAAKi8B,SAAWp4B,wBAAsB1D,0DASpCs9B,qCACF,OAAOz9B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAMlCs9B,wCACF,OAAOz9B,KAAK09B,gBAEd,SAAcv9B,GACZH,KAAK09B,WAAa75B,wBAAsB1D,0DAMtCs9B,0CACF,OAAOz9B,KAAK29B,kBAEd,SAAgBx9B,GACdH,KAAK29B,aAAe95B,wBAAsB1D,0DAQxCs9B,sCACF,OAAOz9B,KAAKi5B,cAEd,SAAY94B,GACVH,KAAKi5B,SAAW74B,uBAAqBD,0DAKnCs9B,sCACF,OAAOz9B,KAAK49B,cAEd,SAAYz9B,GACVH,KAAK49B,SAAW/5B,wBAAsB1D,0DAKpCs9B,wCACF,OAAOz9B,KAAK69B,gBAEd,SAAc19B,GACZH,KAAK69B,WAAaz9B,uBAAqBD,0DAKrCs9B,qCACF,OAAOz9B,KAAK89B,aAEd,SAAW39B,GACTH,KAAK89B,QAAUj6B,wBAAsB1D,oCAkBvCs9B,oBAAA,WAAA,IACMM,SAoBJ,QAnB4B,IAAjB/9B,KAAKk5B,UACdl5B,KAAKmI,QAAS,EACdnI,KAAKu3B,SAAU,EACfwG,EAAc,SAAA59B,GACZ,MAAU,OAAVA,EAAiBkB,EAAKq2B,OAAS,2BAA6B,WAG9D13B,KAAK6Q,KAAO,CACV,CACEwmB,EAAG,KACHC,GAAIt3B,KAAKk5B,SAEX,CACE7B,EAAG,KACHC,EAAG,KAAOt3B,KAAKk5B,WAKhBl5B,KAAK6Q,QAAS7Q,KAAK6Q,MAAQ7Q,KAAK6Q,KAAKxR,OAAS,GAAnD,CAEAW,KAAKkH,KAAKrF,cAAc60B,UAAY,GAEpC,IAAME,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBm1B,UAAU,EACVzM,OAAQvqB,KAAKuqB,OACb6E,QAASpvB,KAAKovB,QACd+M,QAASn8B,KAAKm8B,UAGXn8B,KAAKu3B,QAGRX,EAAMW,QAAQ,CACZC,WAAW,EACXwG,QACE,wGALJpH,EAAMW,SAAQ,GAShBX,EAAMM,MAAK,GACXN,EAAMK,QAAO,GAEb,IAAMgH,EAAK,IAAIC,QAAQC,SACvBF,EAAG7G,OAAOp3B,KAAK6Q,MAAMqO,UAAU,CAC7BpH,KAAM,UACNsmB,MAAO,IACPC,UAAW,IACXC,GAAI,YAEN1H,EAAMQ,OAAO6G,EAAI,CACf5G,EAAG,CACDvf,KAAM,MACNkE,MAAO,CAAC,EAAG,IAEbsb,EAAG,CACDzR,IAAK,KAIT+Q,EAAMmE,MAAM,QAAS,CAAEwD,YAAav+B,KAAKw+B,QAEzC5H,EACG6H,gBACAvX,SAAS,KACTrf,MAAM,CAAE2xB,UAAWx5B,KAAKw5B,UAAWD,OAAQ,SAC3ChC,QAAQ,YAAa,SAACvwB,EAAMkyB,GAC3B,MAAO,CACLtiB,KAAM5P,EACN7G,MAAO+4B,KAGVxB,MAAM,IAAK13B,KAAKk5B,QAAU6E,EAAc/9B,KAAK0+B,QAC7Cv2B,OAAOnI,KAAKmI,QAEfyuB,EAAMpyB,SACNsqB,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,YAGR33B,KAAK42B,MAAQA,EACT52B,KAAK2+B,YACP3+B,KAAK4+B,WAAahI,EACfiI,cAAc,GACdC,OAAOC,UAAUhiB,IAAI,SAAC/V,GACrB,IAAM0zB,EAAS1zB,EAAK,GAAG2zB,QAIvB,OAHAD,EAAOhD,MAAQ1wB,EAAK,GAAG0wB,MACvBgD,EAAOtc,SAAU,EACjBsc,EAAOxB,SAA4B,IAAjBwB,EAAOxB,SAAe7H,QAAQ,GACzCqJ,IAEX16B,KAAKF,GAAGuF,mBAIZo4B,sBAAA,WACMz9B,KAAK42B,QACP52B,KAAK42B,MAAM9P,UACX9mB,KAAK42B,MAAQ,OAIjB6G,8BAAA,SAAkBv+B,GAChBc,KAAK4+B,WAAW1/B,GAAGkf,SAAWpe,KAAK4+B,WAAW1/B,GAAGkf,QAE7Cpe,KAAK42B,QACP52B,KAAK42B,MAAM9tB,OAAO,IAAK,SAACuQ,EAAUrS,GAAc,OAAAA,EAAKoX,UACrDpe,KAAK42B,MAAMe,YAIf8F,qBAAA,WAAA,WACEz9B,KAAKo1B,UAAW,EAChBtG,WAAW,WAAM,OAAAztB,EAAKY,WAAW,KACjCjC,KAAKsuB,sBAGPmP,wBAAA,SAAY/xB,GACN1L,KAAKo1B,UAAUp1B,KAAKiC,WAG1Bw7B,wBAAA,WACEz9B,KAAKqvB,uBACLrvB,KAAKkB,aAMCu8B,qDACDz9B,KAAK2+B,YAEV3+B,KAAKsvB,QAAeC,sBAAoBvE,OAAO/hB,OAAQ,UACpDJ,KAAK8lB,eAAa,MAClBzpB,UAAU,WAAM,OAAA7D,EAAKu2B,aAGlB6F,4CACFz9B,KAAKsvB,SAAStvB,KAAKsvB,QAAQ7mB,eAGjCg1B,mBAAA,WACMz9B,KAAKJ,GAAGiC,cAAci2B,aAAe,IAClC93B,KAAKg/B,cACRh/B,KAAKg/B,aAAc,GAEZh/B,KAAKg/B,cACdh/B,KAAKg/B,aAAc,GAEhBh/B,KAAK42B,OAAO52B,KAAKiC,+BAlRzBC,kBAAU,CACTT,SAAU,SACVU,SAAU,2yBAiBVyK,KAAM,CAAEqyB,iBAAkB,QAC1B78B,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,+CA7CrBE,oBAaAE,wDAqCCG,uBASAA,0BACAA,uBACAA,wBAEAA,2BASAC,oBAAY,2BACZD,6BASAC,oBAAY,6BACZD,uBASAA,yBACAA,yBAEAA,yBASAA,2BASAA,wBASAA,sBASAA,6BACAA,wBACAA,sBAIAwK,kBAAU,qBCxIPrK,GAAa,CAACw6B,uCAQXyB,UAAP,WACE,MAAO,CAAE/7B,SAAU+7B,EAAe97B,UAAW,yBAPhDC,iBAAS,CACRC,QAAS,CAACC,eAAcoG,qBACxBnG,aAAkBP,WAClBQ,QAAaR,kCC6Fb,WAAoBrD,EAAwBE,GAAxBE,QAAAJ,EAAwBI,QAAAF,cAxDnC,gBAkBS,eAEW,CAAC,GAAI,GAAI,GAAI,qBASrB,kBASA,YAQhB,kBAOM,kBACS,gCAnDhBq/B,kCAAMh/B,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,yDAKnBg/B,qCACF,OAAOn/B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAOlCg/B,wCACF,OAAOn/B,KAAK09B,gBAEd,SAAcv9B,GACZH,KAAK09B,WAAa75B,wBAAsB1D,0DAKtCg/B,wCACF,OAAOn/B,KAAKo/B,gBAEd,SAAcj/B,GACZH,KAAKo/B,WAAah/B,uBAAqBD,oCAsBzCg/B,8BAAA,SAAkBjgC,GAAlB,WACEc,KAAK4+B,WAAW1/B,GAAGkf,SAAWpe,KAAK4+B,WAAW1/B,GAAGkf,QAE7Cpe,KAAK42B,QAEP52B,KAAK42B,MAAM9tB,OACT,OACA,SAACuQ,GAAa,OAAAhY,EAAKu9B,WAAW3Z,KAAK,SAAAnL,GAAK,OAAAA,EAAElD,OAASyC,IAAK+E,UAE1Dpe,KAAK42B,MAAMe,YAIfwH,oBAAA,WACE,GAAKn/B,KAAK6Q,QAAS7Q,KAAK6Q,MAAQ7Q,KAAK6Q,KAAKxR,OAAS,GAAnD,CAEAW,KAAKkH,KAAKrF,cAAc60B,UAAY,GAEpC,IAAMgI,EAAS,CACb,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGI9H,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBm1B,UAAU,EACVzM,QAASvqB,KAAKuqB,QAAUvqB,KAAK2+B,UAAY,GAAK,IAC9CvP,QAASpvB,KAAKovB,UAEhBwH,EAAMQ,OAAOp3B,KAAK6Q,KAAM,CACtB1Q,MAAO,CACL0lB,IAAK,EACLwV,UAAWr7B,KAAKq7B,aAIpBzE,EAAMmE,MAAM,SACZnE,EAAMK,QAAO,GAEbL,EAAMM,KAAK,QAAS,CAClBrD,KAAM,KACNwL,YAAa,EACbC,OAAQ,CACNhE,MAAO,CACLR,KAAM,uBAGVvmB,KAAM,CACJsf,KAAM,CACJ0F,OAAQ,UACRC,UAAW,EACX+F,SAAU,CAAC,EAAG,OAKpB3I,EAAMM,KAAK,QAAS,CAClB3iB,KAAM,CACJuD,KAAM,UACN+b,KAAM,CACJ0F,OAAQ,UACRC,UAAW,EACX+F,SAAU,CAAC,EAAG,KAGlBD,OAAQ,CACNhE,MAAO,CACLR,KAAM,yBAKZlE,EACG/C,OACA3M,SAAS,eACTwQ,MAAM,OAAQgH,GACjB9H,EACGmD,QACA7S,SAAS,eACTwQ,MAAM,OAAQgH,GACdhD,MAAM,UACNlxB,KAAK,GAERosB,EAAMpyB,SACNsqB,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,YAGR33B,KAAK42B,MAAQA,EAET52B,KAAK2+B,YACP3+B,KAAK4+B,WAAahI,EACfiI,cAAc,GACdC,OAAOC,UAAUhiB,IAAI,SAAC/V,GASrB,MAPe,CACb4P,KAFa5P,EAAK,GAAG2zB,QAER/jB,KACb8gB,MAAO1wB,EAAK,GAAG0wB,MACftZ,SAAS,EACTje,MAAO6G,EAAKw4B,OAAO,SAAClgC,EAAGH,GAAM,OAAAG,EAAIH,EAAEw7B,QAAQx6B,OAAO,MAKxDH,KAAKF,GAAGuF,mBAIZ85B,sBAAA,WACMn/B,KAAK42B,QACP52B,KAAK42B,MAAM9P,UACX9mB,KAAK42B,MAAQ,OAIjBuI,qBAAA,WACEn/B,KAAKo1B,UAAW,EAChBp1B,KAAKiC,WAGPk9B,wBAAA,SACEzzB,GAEI1L,KAAKo1B,UAAUp1B,KAAKiC,WAG1Bk9B,wBAAA,WACEn/B,KAAKkB,iCAvNRgB,kBAAU,CACTT,SAAU,WACVU,SAAU,6gBAcVyK,KAAM,CAAE6yB,mBAAoB,QAC5Br9B,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,+CAtCrBE,oBAaAE,sDAgCCG,wBAQAC,oBAAY,0BACZD,yBASAA,2BAEAA,2BASAA,sBASAA,sBAUAwK,kBAAU,qBC5FPrK,GAAa,CAACk8B,uCAQXO,UAAP,WACE,MAAO,CAAEv8B,SAAUu8B,EAAiBt8B,UAAW,yBAPlDC,iBAAS,CACRC,QAAS,CAACC,eAAcoG,qBACxBnG,aAAkBP,WAClBQ,QAAaR,kCCuDb,WAAoBrD,EAAwBE,GAAxBE,QAAAJ,EAAwBI,QAAAF,aA/B3B,wCAUC,eAEC,mBAUE,iBAOV,+BA1BP6/B,qCACF,OAAO3/B,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,GACpCH,KAAKF,GAAGuF,uEAQNs6B,wCACF,OAAO3/B,KAAKy2B,gBAEd,SAAct2B,GACZH,KAAKy2B,WAAa5yB,wBAAsB1D,oCAalCw/B,oCAEN9I,GAAG6C,MAAMC,cAAc,QAAS,QAAS,CACvCC,mBAAUC,EAAK9C,GACb,IAAMqD,EAAQt7B,OAAOC,OACnB,GACA,CACE89B,YAAahD,EAAI+F,QACjB/E,SAAUhB,EAAIa,OAAOC,QAAQnwB,KAC7Bq1B,OAAQhG,EAAIa,OAAOC,QAAQkF,OAC3BxtB,KAAMwnB,EAAIa,OAAOC,QAAQtoB,KACzBuoB,UAAW,SACXkF,WAAYjG,EAAIa,OAAOC,QAAQoF,KAC/BjF,KAAMjB,EAAInC,MACVsI,aAAc,cAEhBnG,EAAIhyB,OAEN,OAAOkvB,EAAUoD,SAAS,OAAQ,CAChCC,MAAOt7B,OAAOC,OAAOq7B,EAAO,CAC1B/C,EAAGwC,EAAIxC,EACPC,EAAGuC,EAAIvC,UAOjBqI,wBAAA,WACE,GAAK3/B,KAAK6Q,QAAS7Q,KAAK6Q,MAAQ7Q,KAAK6Q,KAAKxR,OAAS,GAAnD,CAEAW,KAAKkH,KAAKrF,cAAc60B,UAAY,GACpC,IAAMuH,GAAK,IAAIC,QAAQ+B,MAAO7I,OAAOp3B,KAAK6Q,MACpCmL,EAAQiiB,EAAGjiB,MAAM,SACjB6J,EAAM7J,EAAM,GACZvU,EAAMuU,EAAM,GACZuO,GAAUvqB,KAAKuqB,OACf1H,GAAS7iB,KAAKJ,GAAGiC,cAAcq+B,YAErCjC,EAAG/e,UAAU,CACXpH,KAAM,YACNqoB,OAAQ,CAAC,OAAQ,SACjB31B,KAAM,CAACqY,EAAO0H,GACd6E,QAASpvB,KAAKovB,QACdgR,aAAc,IACdP,kBACE,IAAI7R,KAA4B,EAAhBxmB,KAAKwmB,UAAgB,EAIrC,OAHe,IAAXA,IACFA,EAAS,GAEK,GAATA,GAET6M,kBAASwF,GACP,OAAIA,EAAElgC,OACIkgC,EAAElgC,MAAQ0lB,IAAQpe,EAAMoe,MAAmB,GAE9C,KAGX,IAAM+Q,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBghB,MAAOA,EACP0H,OAAQA,EACR6E,QAASpvB,KAAKovB,QACd4H,UAAU,IAEZJ,EAAMQ,OAAO6G,EAAI,CACf5G,EAAG,CAAE+D,MAAM,GACX9D,EAAG,CAAE8D,MAAM,KAEbxE,EAAMK,QAAO,GACbL,EAAMM,MAAK,GACXN,EAAMW,QAAQ,CACZC,WAAW,IAEbZ,EAAMmE,QAAQuF,UACd1J,EACGmD,QACA7S,SAAS,OACTwQ,MAAM,QACNgE,MAAM,SACNnE,QAAQ,kBAEXX,EAAMpyB,SACNsqB,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,YAGR33B,KAAK42B,MAAQA,IAGf+I,sBAAA,WACM3/B,KAAK42B,QACP52B,KAAK42B,MAAM9P,UACX9mB,KAAK42B,MAAQ,OAIjB+I,qBAAA,WACE3/B,KAAKo1B,UAAW,EAChBp1B,KAAKugC,eACLvgC,KAAK44B,eAGP+G,wBAAA,SACEj0B,GAEI1L,KAAKo1B,UAAUp1B,KAAK44B,eAG1B+G,wBAAA,WACE3/B,KAAKkB,iCAzJRgB,kBAAU,CACTT,SAAU,eACVU,SAAU,6DACVC,gBAAiBC,0BAAwBC,oDAzBzCG,oBAWAE,sDAmBCG,wBAEAA,yBAUAA,sBACAA,2BAEAA,sBAWAwK,kBAAU,qBCvDPrK,GAAa,CAAC08B,uCAQXa,UAAP,WACE,MAAO,CAAEr9B,SAAUq9B,EAAoBp9B,UAAW,yBAPrDC,iBAAS,CACRC,QAAS,CAACC,eAAcoG,qBACxBnG,aAAkBP,WAClBQ,QAAaR,kCC+Db,WAAoBnD,GAAAE,QAAAF,cA5CX,iBAa8B,CAAEw6B,GAAI,UAAWE,GAAI,wBAS1C,iBAEW,CAAC,GAAI,GAAI,GAAI,sBASnB,iBAQZ,EAIT16B,EAAGmqB,sCA1CDwW,kCAAMtgC,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,yDASnBsgC,qCACF,OAAOzgC,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAOlCsgC,0CACF,OAAOzgC,KAAK87B,kBAEd,SAAgB37B,GACdH,KAAK87B,aAAe17B,uBAAqBD,oCAiB3CsgC,qBAAA,WACEzgC,KAAKo1B,UAAW,EAChBp1B,KAAKiC,WAGPw+B,oBAAA,WACE,GAAKzgC,KAAK6Q,QAAS7Q,KAAK6Q,MAAQ7Q,KAAK6Q,KAAKxR,OAAS,GAAnD,CAGAW,KAAK0gC,WAAW7+B,cAAc60B,UAAY,GAC1C12B,KAAKkH,KAAKrF,cAAc60B,UAAY,GAEpC,IACM9gB,EADM,EACE5V,KAAK6Q,KAAKxR,QAAgBW,KAAK6Q,KAAKxR,OADtC,GACsD,EAAI,EAEhEshC,EAAK,IAAIzC,QAAQ,CACrB0C,MAAO,CACL3Z,MAAOjnB,KAAK6Q,KAAK+E,EAAQ,GAAGyhB,EAC5BthB,IAAK/V,KAAK6Q,KAAK+E,EAAQ,EANf,GAMwByhB,KAG9B4G,EAAK0C,EAAGE,aAAazJ,OAAOp3B,KAAK6Q,MACvCotB,EAAG7G,OAAOp3B,KAAK6Q,MAAMqO,UAAU,CAC7BpH,KAAM,SACNa,kBAASmI,GACP,IAAMjL,EAAO,IAAIJ,KAAKqL,EAAIuW,GAAGyJ,UAC7B,OAAOjrB,GAAQ8qB,EAAGC,MAAM3Z,OAASpR,GAAQ8qB,EAAGC,MAAM7qB,OAItD,IAYItO,EAZEmvB,EAAQ,IAAIC,GAAGC,MAAM,CACzBC,UAAW/2B,KAAKkH,KAAKrF,cACrBm1B,UAAU,EACVzM,QAASvqB,KAAKuqB,OACd6E,QAASpvB,KAAKovB,UAEhBwH,EAAMM,KAAK,IAAK,CAAEtnB,OAAO,IACzBgnB,EAAMM,KAAK,KAAM,CACftnB,OAAO,IAETgnB,EAAMM,KAAK,MAAM,GAGbl3B,KAAK6Q,KAAK,IAAM7Q,KAAK6Q,KAAK,GAAGypB,IAAMt6B,KAAK6Q,KAAK,GAAG2pB,KAClD/yB,EAAMD,KAAKC,IACTzH,KAAK6Q,KAAK0P,KAAK,SAACE,EAAGC,GAAM,OAAAA,EAAE4Z,GAAK7Z,EAAE6Z,KAAI,GAAGA,GACzCt6B,KAAK6Q,KAAK0P,KAAK,SAACE,EAAGC,GAAM,OAAAA,EAAE8Z,GAAK/Z,EAAE+Z,KAAI,GAAGA,KAG7C5D,EAAMQ,OAAO6G,EAAI,CACf5G,EAAG,CACDvf,KAAM,UACNujB,UAxCQ,EAyCR0F,KAAM,QACN/kB,MAAO,CAAC,EAAG,IAEbse,GAAI,CACF0G,MAAOhhC,KAAKihC,SAAS3G,GACrB7yB,MACAoe,IAAK,GAEP2U,GAAI,CACFwG,MAAOhhC,KAAKihC,SAASzG,GACrB/yB,MACAoe,IAAK,KAIT+Q,EAAMK,OAAO,CACX/P,SAAU,MACVga,QAAQ,EACRC,WAAW,EACX7U,MAAO,CACL,CAAEnsB,MAAOH,KAAKihC,SAAS3G,GAAIQ,KAAM96B,KAAKohC,SAAS9G,IAC/C,CAAEn6B,MAAOH,KAAKihC,SAASzG,GAAIM,KAAM96B,KAAKohC,SAAS5G,OAInD5D,EACG/C,OACA3M,SAAS,QACTwQ,MAAM13B,KAAKohC,SAAS9G,IACpB9vB,KAAKxK,KAAK+8B,aACbnG,EACG/C,OACA3M,SAAS,QACTwQ,MAAM13B,KAAKohC,SAAS5G,IACpBhwB,KAAKxK,KAAK+8B,aACbnG,EAAMpyB,SACNsqB,WAAW,WACT8H,EAAMI,WACNJ,EAAMe,WACL,IAEH,IAAM0J,EAAgBviC,OAAOC,OAAO,GAAIiB,KAAKovB,SAC7CiS,EAAc,GAAK,EACnB,IAAMC,EAAS,IAAIC,OAAO,CACxBxK,UAAW/2B,KAAK0gC,WAAW7+B,cAC3B0oB,OAAQ,GACR6E,QAASiS,EACTG,OAAQ,CACNnK,EAAG,CACDvf,KAAM,OACNujB,UAAW,GACX0F,KAAM,UAGVU,gBAAiB,CACf3pB,KAAM,QAERmP,MAAO0Z,EAAGC,MAAM3Z,MAChBlR,IAAK4qB,EAAGC,MAAM7qB,IACdqmB,MAAO,IACPC,MAAO,KACPxrB,KAAM7Q,KAAK6Q,KACX6wB,kBAASnlB,OAAEolB,eAAYC,aACrBjB,EAAGkB,SAAS,QAASF,GACrBhB,EAAGkB,SAAS,MAAOD,MAGvBN,EAAO98B,SACPsqB,WAAW,WACTwS,EAAOtK,WACPsK,EAAO3J,WACN,IAEH33B,KAAK42B,MAAQA,EACb52B,KAAKshC,OAASA,IAGhBb,sBAAA,WACMzgC,KAAK42B,OAAO52B,KAAK42B,MAAM9P,UACvB9mB,KAAKshC,QAAQthC,KAAKshC,OAAOxa,WAG/B2Z,wBAAA,SACE/0B,GAEI1L,KAAKo1B,UAAUp1B,KAAKiC,WAG1Bw+B,wBAAA,WACEzgC,KAAKkB,iCA1MRgB,kBAAU,CACTT,SAAU,cACVU,SAAU,uIAIVC,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,+CAXrBI,sDAkBCG,sBAQAA,0BACAA,0BACAA,wBAGAA,yBASAA,6BAEAA,sBAWAwK,kBAAU,iCACVA,kBAAU,kBC9DPrK,GAAa,CAACw9B,uCAQXqB,UAAP,WACE,MAAO,CAAE3+B,SAAU2+B,EAAoB1+B,UAAW,yBAPrDC,iBAAS,CACRC,QAAS,CAACC,eAAcoG,qBACxBnG,aAAkBP,WAClBQ,QAAaR,kCCoEb,WACUrD,EACAC,EACAC,GAFAE,QAAAJ,EACAI,cAAAH,EACAG,QAAAF,cAxCD,cAUQ,uBASC,mBAeP,wBAqLe,eACM,kCArN5BiiC,kCAAM5hC,GACJA,aAAiBgN,eACnBnN,KAAKwN,OAAS,KACdxN,KAAKyN,UAAYtN,GACZH,KAAKwN,OAASrN,yDAMnB4hC,qCACF,OAAO/hC,KAAKmvB,aAEd,SAAWhvB,GACTH,KAAKmvB,QAAU/uB,uBAAqBD,0DAKlC4hC,sCACF,OAAO/hC,KAAKi5B,cAEd,SAAY94B,GACVH,KAAKi5B,SAAW74B,uBAAqBD,oCAiBvC4hC,wBAAA,WACE,IAAMlxB,EAAO7Q,KAAKk5B,QAAU,IAC5B,GAAKroB,EAAL,CAEA7Q,KAAKkH,KAAKrF,cAAc60B,UAAY,GACpC,IAAMsL,EAAOhiC,KAEPiiC,EAASjiC,KAAKkH,KAAuC,cACrDg7B,EAAMD,EAAOE,WAAW,MAExBC,EAAcH,EAAOpf,MACrBwf,EAAeJ,EAAO1X,OACtB+X,EAASF,EAAc,EACvB5I,EAAY,EACZ+I,EAAKD,EAAS9I,EAEpB0I,EAAIM,YACJN,EAAI1I,UAAwB,EAAZA,EAgBhB,IAdA,IAAMiJ,EAAaL,EAAc5I,EAC3BvI,EAAOwR,EAAa,EACpBzmB,EAAQ,GACV0mB,EAAY1mB,EACV2mB,EAAUnJ,EACZoJ,EAAK,EACLC,EAAW,EACTC,EAAW,KAEbC,EAAW,GACTC,EAAKV,EAAS9I,EACdyJ,GAAiBz7B,KAAKyzB,GAAK,EAC7BiI,GAAa,EAGXhkC,EAAI+jC,EACR/jC,EAAI+jC,EAAe,EAAIz7B,KAAKyzB,GAC5B/7B,GAAK,GAAK,EAAIsI,KAAKyzB,IAEnB8H,EAAS/0B,KAAK,CAACs0B,EAASU,EAAKx7B,KAAK27B,IAAIjkC,GAAIojC,EAASU,EAAKx7B,KAAK47B,IAAIlkC,KAGnE,IAAMmkC,EAAcN,EAASna,QAC7BsZ,EAAIoB,YAActjC,KAAK03B,MACvBwK,EAAIqB,OAAOF,EAAY,GAAIA,EAAY,IA+BvC,aAEE,GADAnB,EAAIsB,UAAU,EAAG,EAAGpB,EAAaC,GAC7Ba,EACF,GAAIH,EAAS1jC,OAAQ,CACnB,IAAMokC,EAAOV,EAASna,QACtBsZ,EAAIwB,OAAOD,EAAK,GAAIA,EAAK,IACzBvB,EAAI3I,cAEJ2J,GAAa,EACbhB,EAAIwB,OAAOL,EAAY,GAAIA,EAAY,IACvCnB,EAAI3I,SACJwJ,EAAW,KAEXb,EAAIyB,yBAA2B,mBAC/BzB,EAAIM,YACJN,EAAI1I,UAAYA,EAChB0I,EAAI7I,IAAIiJ,EAAQA,EAAQU,EAAI,EAAG,EAAIx7B,KAAKyzB,IAAI,GAE5CiH,EAAIM,YACJN,EAAI0B,OACJ1B,EAAI7I,IAAIiJ,EAAQA,EAAQA,EAAS,EAAI9I,EAAW,EAAG,EAAIhyB,KAAKyzB,IAAI,GAEhEiH,EAAI2B,UACJ3B,EAAI4B,OACJ5B,EAAI6B,UAAY,cAGN,KAARlzB,EACcmL,EAAQ,EAApB0mB,IAEFA,GADkB,IAAR1mB,GAGHnL,GAAQ,GACb6xB,EAAoB,IAAR1mB,IAEd0mB,GADkB,IAAR1mB,IAIR0mB,GAAa1mB,IAEf0mB,GADkB,IAAR1mB,GAGKA,GAAb0mB,IAEFA,GADkB,IAAR1mB,IAIQ,EAAlBnL,EAAOgyB,IACTA,GAAYC,GAEVjyB,EAAOgyB,EAAW,IACpBA,GAAYC,GAGdF,GAAM,IAnFV,WACEV,EAAIM,YACJN,EAAI0B,OAGJ,IADA,IAAMI,EAAW,GACR9kC,EAAIyjC,EAASzjC,GAAKyjC,EAAUF,EAAYvjC,GAAK,GAAKujC,EAAY,CACrE,IAAMpL,EAAIuL,GAAMD,EAAUzjC,GAAK+xB,EACzBqG,EAAI9vB,KAAK47B,IAAI/L,GAAKqL,EAClBuB,EAAK/kC,EACLglC,EAAK,EAAI3B,GAAM,EAAIM,IAAaP,EAASC,GAAMtR,EAAOqG,EAE5D4K,EAAIwB,OAAOO,EAAIC,GACfF,EAASh2B,KAAK,CAACi2B,EAAIC,IAGrB,IAAMC,EAAaH,EAASpb,QAE5BsZ,EAAIwB,OAAOf,EAAUF,EAAYJ,GACjCH,EAAIwB,OAAOf,EAASN,GACpBH,EAAIwB,OAAOS,EAAW,GAAIA,EAAW,IAErC,IAAMC,EAAWlC,EAAImC,qBAAqB,EAAG,EAAG,EAAGhC,GACnD+B,EAASE,aAAa,EAAG,WACzBF,EAASE,aAAa,EAAG,WACzBpC,EAAI6B,UAAYK,EAChBlC,EAAIpH,OACJoH,EAAI2B,UA0DFU,GAEFvC,EAAKwC,MAAQC,sBAAsBjgC,GAGrCA,KAGFu9B,sBAAA,aAEQA,iCAAY2C,GAClB1kC,KAAKH,SAASmtB,SACZhtB,KAAKJ,GAAGiC,cACR,YACA,SAAS6iC,QAIb3C,qBAAA,WAAA,WACE/hC,KAAKo1B,UAAW,EAChBp1B,KAAKF,GAAGuF,gBACRrF,KAAK2kC,YAAY,GACjB3kC,KAAKsuB,qBACLQ,WAAW,WAAM,OAAAztB,EAAKu2B,UAAU,MAGlCmK,wBAAA,SACEr2B,GAEI1L,KAAKo1B,WACPp1B,KAAKF,GAAGuF,gBACRrF,KAAK44B,gBAITmJ,wBAAA,WACM/hC,KAAKwkC,OAAOI,qBAAqB5kC,KAAKwkC,OAC1CxkC,KAAKqvB,uBACLrvB,KAAKkB,aAOC6gC,qDACF/hC,KAAKsvB,UAETtvB,KAAKsvB,QAAeC,sBAAoBvE,OAAO/hB,OAAQ,UACpDJ,KAAK8lB,eAAa,MAClBzpB,UAAU,WAAM,OAAA7D,EAAKu2B,aAGlBmK,4CACF/hC,KAAKsvB,SAAStvB,KAAKsvB,QAAQ7mB,eAGjCs5B,mBAAA,WACU,IAAA7B,+CACRlgC,KAAK2kC,YAAYzE,EAAclgC,KAAKuqB,OAAS2V,EAAclgC,KAAKuqB,OAAS,GACzEvqB,KAAK44B,mCAzPR12B,kBAAU,CACTT,SAAU,gBACVU,SAAU,kYAQVyK,KAAM,CAAEi4B,wBAAyB,QACjCziC,gBAAiBC,0BAAwBC,OACzCC,qBAAqB,+CAhCrBE,oBASAC,mBAGAC,sDA2BCG,uBAQAA,wBAEAA,yBASAA,sBAWAwK,kBAAU,qBCpEPrK,GAAa,CAAC8+B,uCAQX+C,UAAP,WACE,MAAO,CAAE3hC,SAAU2hC,EAAqB1hC,UAAW,yBAPtDC,iBAAS,CACRC,QAAS,CAACC,eAAcoG,qBACxBnG,aAAkBP,WAClBQ,QAAaR,oBCiCT8hC,GAAU,CACd7hC,EACAe,EACAwF,EACA2B,EACAmB,EACAU,EACAgC,GACAI,GACAG,GACAW,GACAW,GACAa,GACA6B,GACAS,GACAS,GACAK,GACAK,GACAY,GACAkP,GACAuI,GACAiC,GACAE,GACAc,GACAyB,GACA0C,GACAS,GACAiB,GAEAwB,GACAU,GACAM,GACA6C,GACAoB,GACAG,GACAK,GACA0B,GACAQ,GACAc,GACAsB,GACAgD,2DAKDzhC,iBAAS,CACRC,QAAS,CACPJ,EAAqB8hC,UACrB/gC,EAAsB+gC,UACtBv7B,EAAmBu7B,UACnB55B,EAAiB45B,UACjBz4B,EAAcy4B,UACd/3B,EAAmB+3B,UACnB/1B,GAAiB+1B,UACjB31B,GAAiB21B,UACjB70B,GAAkB60B,UAClB70B,GAAkB60B,UAClBl0B,GAAmBk0B,UACnBrzB,GAAmBqzB,UACnBxxB,GAAmBwxB,UACnB/wB,GAAe+wB,UACftwB,GAAwBswB,UACxBjwB,GAAkBiwB,UAClB5vB,GAAc4vB,UACdhvB,GAAkBgvB,UAClB9f,GAAoB8f,UACpBvX,GAAiBuX,UACjBtV,GAAoBsV,UACpBpV,GAAaoV,UACbtU,GAAYsU,UACZ7S,GAAwB6S,UACxBnQ,GAAcmQ,UACd1P,GAAkB0P,UAClBzO,GAAWyO,UAEXjN,GAAciN,UACdvM,GAAeuM,UACfjM,GAAgBiM,UAChBpJ,GAAgBoJ,UAChBhI,GAAmBgI,UACnB7H,GAAkB6H,UAClBxH,GAAuBwH,UACvB9F,GAAc8F,UACdtF,GAAgBsF,UAChBxE,GAAmBwE,UACnBlD,GAAmBkD,UACnBF,GAAoBE,WAEtBvhC,QAASshC,+CAMFE,UAAP,WACE,MAAO,CAAE9hC,SAAU+hC,yBAHtB7hC,iBAAS,CAAEI,QAASshC,YCrIrBI,cACE,WAAoBzZ,GAAA1rB,SAAA0rB,SAEpByZ,yBAAA,SAAavzB,GACX,OAAO5R,KAAK0rB,IAAI0Z,aAAaxzB,IAE/BuzB,kBAAA,SAAMvzB,EAA+ByzB,GACnCrlC,KAAK0rB,IAAI4Z,MAAM1zB,EAAOyzB,IAExBF,yBAAA,SAAavzB,GACX,OAAO5R,KAAK0rB,IAAI6Z,aAAa3zB,IAE/BuzB,qBAAA,SAASvzB,GACP,OAAO5R,KAAK0rB,IAAI8Z,SAAS5zB,IAE3BuzB,6BAAA,SACEnc,EACAC,GAEA,OAAOjpB,KAAK0rB,IAAI+Z,iBAAiBzc,EAAQC"}
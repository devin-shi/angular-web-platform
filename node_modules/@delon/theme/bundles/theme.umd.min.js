/**
 * @license ng-alain(cipchk@qq.com) v1.0.0-beta.10
 * (c) 2018 Cipchk http://ng-alain.com/
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/BehaviorSubject"),require("rxjs/operators"),require("@delon/acl"),require("@angular/platform-browser"),require("@angular/router"),require("rxjs/Observable"),require("ng-zorro-antd"),require("@angular/common/http"),require("rxjs/add/observable/throw"),require("date-fns/format"),require("date-fns/distance_in_words_to_now"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/BehaviorSubject","rxjs/operators","@delon/acl","@angular/platform-browser","@angular/router","rxjs/Observable","ng-zorro-antd","@angular/common/http","rxjs/add/observable/throw","date-fns/format","date-fns/distance_in_words_to_now","@angular/common"],e):e((t.delon=t.delon||{},t.delon.theme={}),t.ng.core,t.Rx,t.Rx.Observable.prototype,t.delon.acl,t.ng.platformBrowser,t.ng.router,t.Rx,t.ngZorro.antd,t.ng.common.http,t.Rx.Observable,t["date-fns/format/index"],t["date-fns/distance_in_words_to_now/index"],t.ng.common)}(this,function(t,e,n,o,r,i,a,p,s,u,c,l,d,f){"use strict";l=l&&l.hasOwnProperty("default")?l.default:l,d=d&&d.hasOwnProperty("default")?d.default:d;var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};var y=new e.InjectionToken("Window");var g=new e.InjectionToken("alainTranslatorToken"),v=function(){function t(){this.change$=new n.BehaviorSubject(null)}return Object.defineProperty(t.prototype,"change",{get:function(){return this.change$.asObservable().pipe(o.filter(function(t){return null!=t}))},enumerable:!0,configurable:!0}),t.prototype.use=function(t){this.change$.next(t)},t.prototype.getLangs=function(){return[]},t.prototype.fanyi=function(t){return t},t.decorators=[{type:e.Injectable}],t}(),b=function(){function t(t,e){var r=this;this.i18nSrv=t,this.aclService=e,this._change$=new n.BehaviorSubject([]),this.data=[],this.i18nSrv&&(this.i18n$=this.i18nSrv.change.subscribe(function(){return r.resume()}))}return Object.defineProperty(t.prototype,"change",{get:function(){return this._change$.pipe(o.share())},enumerable:!0,configurable:!0}),t.prototype.visit=function(a){var s=function(t,e,r){for(var n=0,o=t;n<o.length;n++){var i=o[n];a(i,e,r),i.children&&0<i.children.length?s(i.children,i,r+1):i.children=[]}};s(this.data,null,0)},t.prototype.add=function(t){this.data=t,this.resume()},t.prototype.resume=function(n){var o=this,i=1,a=[];this.visit(function(t,e,r){t.__id=i++,t.__parent=e,t._depth=r,t.link||(t.link=""),t.externalLink||(t.externalLink=""),t.badge&&(!0!==t.badge_dot&&(t.badge_dot=!1),t.badge_status||(t.badge_status="error")),t._type=t.externalLink?2:1,t.children&&0<t.children.length&&(t._type=3),e&&!0===t.shortcut&&!0!==e.shortcut_root&&a.push(t),t.text=t.i18n&&o.i18nSrv?o.i18nSrv.fanyi(t.i18n):t.text,t._hidden=void 0!==t.hide&&t.hide,t.acl&&o.aclService&&(t._hidden=!o.aclService.can(t.acl)),n&&n(t,e,r)}),this.loadShortcut(a),this._change$.next(this.data)},t.prototype.loadShortcut=function(t){if(0!==t.length&&0!==this.data.length){var e=this.data[0].children,r=e.findIndex(function(t){return!0===t.shortcut_root});if(-1===r){r=(-1!==(r=e.findIndex(function(t){return t.link.includes("dashboard")}))?r:-1)+1;this.data[0].children.splice(r,0,{text:"快捷菜单",i18n:"shortcut",icon:"icon-rocket",children:[]})}var n=this.data[0].children[r];n.i18n&&this.i18nSrv&&(n.text=this.i18nSrv.fanyi(n.i18n)),(n=Object.assign(n,{shortcut_root:!0,_type:3,__id:-1,_depth:1})).children=t.map(function(t){return t._depth=2,t})}},Object.defineProperty(t.prototype,"menus",{get:function(){return this.data},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.data=[],this._change$.next(this.data)},t.prototype.openedByUrl=function(e){if(e){var r=null;if(this.visit(function(t){t._open=!1,t.link&&!r&&e.startsWith(t.link)&&(r=t)}),r)for(;r._open=!0,r=r.__parent;);}},t.prototype.getPathByUrl=function(n){var o=null;this.visit(function(t,e,r){t.link===n&&(o=t)});var t=[];if(!o)return t;for(;t.splice(0,0,o),o=o.__parent;);return t},t.prototype.ngOnDestroy=function(){this._change$.unsubscribe(),this.i18n$&&this.i18n$.unsubscribe()},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[g]}]},{type:r.ACLService,decorators:[{type:e.Optional}]}]},t}(),_=function(){function t(t,e){this.win=t,this.doc=e}return t.prototype.scrollToElement=function(t,e){void 0===e&&(e=0),t||(t=this.doc.body),t.scrollIntoView();var r=this.win;r&&r.scrollBy&&(r.scrollBy(0,t.getBoundingClientRect().top-e),r.pageYOffset<20&&r.scrollBy(0,-r.pageYOffset))},t.prototype.scrollToTop=function(t){void 0===t&&(t=0),this.scrollToElement(this.doc.body,t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[y]}]},{type:void 0,decorators:[{type:e.Inject,args:[i.DOCUMENT]}]}]},t}(),m="layout",j=function(){function t(){this.app={year:(new Date).getFullYear()},this.user={},this._layout=null}return t.prototype.get=function(t){return JSON.parse(localStorage.getItem(t)||"null")||null},t.prototype.set=function(t,e){localStorage.setItem(t,JSON.stringify(e))},Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout||(this._layout=Object.assign({fixed:!0,collapsed:!1,boxed:!1,theme:"A",lang:null},this.get(m)),this.set(m,this._layout)),this._layout},enumerable:!0,configurable:!0}),t.prototype.setLayout=function(t,e){return void 0!==this.layout[t]&&(this.layout[t]=e,this.set(m,this._layout),!0)},t.prototype.setApp=function(t){this.app=Object.assign(this.app,t)},t.prototype.setUser=function(t){this.user=Object.assign(this.user,t)},t.decorators=[{type:e.Injectable}],t}(),O=function(){function t(t,e,r,n,o){var i=this;this.injector=t,this.title=e,this.menuSrv=r,this.i18nSrv=n,this.doc=o,this._prefix="",this._suffix="",this._separator=" - ",this._reverse=!1,this._default="Not Page Name",this.i18nSrv&&(this.i18n$=this.i18nSrv.change.subscribe(function(){return i.setTitle()}))}return Object.defineProperty(t.prototype,"separator",{set:function(t){this._separator=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prefix",{set:function(t){this._prefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suffix",{set:function(t){this._suffix=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverse",{set:function(t){this._reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"default",{set:function(t){this._default=t},enumerable:!0,configurable:!0}),t.prototype.getByElement=function(){var t=this.doc.querySelector(".content__title h1")||this.doc.querySelector("pro-header h1.title");return t?t.firstChild.textContent.trim():""},t.prototype.getByRoute=function(){for(var t=this.injector.get(a.ActivatedRoute);t.firstChild;)t=t.firstChild;var e=t.snapshot&&t.snapshot.data||{};return e.titleI18n&&this.i18nSrv&&(e.title=this.i18nSrv.fanyi(e.titleI18n)),e.title},t.prototype.getByMenu=function(){var t=this.menuSrv.getPathByUrl(this.injector.get(a.Router).url);if(!t||t.length<=0)return"";var e,r=t[t.length-1];return r.i18n&&this.i18nSrv&&(e=this.i18nSrv.fanyi(r.i18n)),e||r.text},t.prototype.setTitle=function(t){t||(t=this.getByRoute()||this.getByMenu()||this.getByElement()||this._default),t&&!Array.isArray(t)&&(t=[t]);var e=[];this._prefix&&e.push(this._prefix),e.push.apply(e,t),this._suffix&&e.push(this._suffix),this._reverse&&(e=e.reverse()),this.title.setTitle(e.join(this._separator))},t.prototype.ngOnDestroy=function(){this.i18n$&&this.i18n$.unsubscribe()},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:i.Title},{type:b},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[g]}]},{type:void 0,decorators:[{type:e.Inject,args:[i.DOCUMENT]}]}]},t}(),x=function(){function t(t){this.srv=t,this.zIndex=500}return t.prototype.open=function(i,a,s,u){var c=this;return void 0===s&&(s="lg"),p.Observable.create(function(e){var t="",r="";s&&("number"==typeof s?r=s+"px":t="modal-"+s);var n={nzWrapClassName:t,nzContent:i,nzWidth:r||void 0,nzFooter:null,nzComponentParams:a,nzZIndex:++c.zIndex},o=c.srv.create(Object.assign(n,u)).afterClose.subscribe(function(t){e.next(t),e.complete(),o.unsubscribe()})})},t.prototype.static=function(t,e,r,n){return void 0===r&&(r="lg"),this.open(t,e,r,Object.assign({maskClosable:!1},n))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:s.NzModalService}]},t}(),S=function(){function t(t){this.http=t,this._loading=!1}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),t.prototype.parseParams=function(t){var e=new u.HttpParams;for(var r in t){var n=t[r];n instanceof Date&&(n=n.valueOf()),e=e.set(r,n)}return e},t.prototype.appliedUrl=function(t,e){if(!e)return t;t+=~t.indexOf("?")?"":"?";var r=[];for(var n in e)r.push(n+"="+e[n]);return t+r.join("&")},t.prototype.begin=function(){var t=this;setTimeout(function(){return t._loading=!0})},t.prototype.end=function(){var t=this;setTimeout(function(){return t._loading=!1})},t.prototype.get=function(t,e,r){return this.request("GET",t,Object.assign({params:e},r))},t.prototype.post=function(t,e,r,n){return this.request("POST",t,Object.assign({body:e,params:r},n))},t.prototype.delete=function(t,e,r){return this.request("DELETE",t,Object.assign({params:e},r))},t.prototype.jsonp=function(t,e,r){var n=this;return void 0===r&&(r="JSONP_CALLBACK"),this.http.jsonp(this.appliedUrl(t,e),r).pipe(o.tap(function(){n.end()}),o.catchError(function(t){return n.end(),p.Observable.throw(t)}))},t.prototype.patch=function(t,e,r){return this.request("PATCH",t,Object.assign({params:r,body:e||null}))},t.prototype.put=function(t,e,r){return this.request("PUT",t,Object.assign({params:r,body:e||null}))},t.prototype.request=function(t,e,r){var n=this;return this.begin(),r&&r.params&&(r.params=this.parseParams(r.params)),this.http.request(t,e,r).pipe(o.tap(function(){n.end()}),o.catchError(function(t){return n.end(),p.Observable.throw(t)}))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:u.HttpClient}]},t}(),P=function(){function t(){}return t.prototype.transform=function(t,e){return void 0===e&&(e="YYYY-MM-DD HH:mm"),t?"fn"===e?d(t,{locale:window.__locale__}):l(t,e):""},t.decorators=[{type:e.Pipe,args:[{name:"_date"}]}],t}(),w=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,o),t.prototype.transform=function(t,e,r,n){return void 0===e&&(e="￥"),void 0===r&&(r="code"),o.prototype.transform.call(this,t,e,r,n)},t.decorators=[{type:e.Pipe,args:[{name:"_currency"}]}],t}(f.CurrencyPipe),I=function(){function t(){}return t.prototype.transform=function(t,e){var r=[];for(var n in t)r.push({key:n,value:t[n]});return r},t.decorators=[{type:e.Pipe,args:[{name:"keys"}]}],t}(),T=function(){function t(){}return t.prototype.transform=function(t,e,r){return t?'<span class="badge badge-success">'+(e||"是")+"</span>":'<span class="badge badge-error">'+(r||"否")+"</span>"},t.decorators=[{type:e.Pipe,args:[{name:"yn"}]}],t}(),q=[b,_,j,O,S],C=[x],B=[],N=[P,w,I,T],k=[],M=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[{provide:y,useValue:window},{provide:g,useClass:v}].concat(q,C)}},t.forChild=function(){return{ngModule:t,providers:C.slice()}},t.decorators=[{type:e.NgModule,args:[{imports:[f.CommonModule,a.RouterModule].concat(k),declarations:B.concat(N),exports:B.concat(N)}]}],t}();t.WINDOW=y,t.preloaderFinished=function(){var t=document.querySelector("body"),e=document.querySelector(".preloader");t.style.overflow="hidden",window.appBootstrap=function(){setTimeout(function(){e&&(e.addEventListener("transitionend",function(){e.className="preloader-hidden"}),e.className+=" preloader-hidden-add preloader-hidden-add-active"),t.style.overflow=""},100)}},t.ScrollService=_,t.TitleService=O,t.ALAIN_I18N_TOKEN=g,t.ModalHelper=x,t._HttpClient=S,t.DatePipe=P,t.CNCurrencyPipe=w,t.KeysPipe=I,t.YNPipe=T,t.AlainThemeModule=M,t.MenuService=b,t.SettingsService=j,t.ɵa=v,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=theme.umd.min.js.map

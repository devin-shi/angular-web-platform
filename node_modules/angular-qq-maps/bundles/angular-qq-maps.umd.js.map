{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 28d06d2b03bf8c7f85f3","webpack:///./.tmp/core/aqm.config.ts","webpack:///external \"@angular/core\"","webpack:///./.tmp/core/loader.service.ts","webpack:///./.tmp/core/aqm.component.ts","webpack:///./.tmp/core/aqm-panorama.component.ts","webpack:///./.tmp/index.ts","webpack:///external \"@angular/common\""],"names":[],"mappings":"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","file":"angular-qq-maps.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@angular/core\"), require(\"@angular/common\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@angular/core\", \"@angular/common\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angular-qq-maps.umd\"] = factory(require(\"@angular/core\"), require(\"@angular/common\"));\n\telse\n\t\troot[\"angular-qq-maps.umd\"] = factory(root[\"@angular/core\"], root[\"@angular/common\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_6__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28d06d2b03bf8c7f85f3","export class AqmConfig {\r\n    /**\r\n     * APP KEY 必填项\r\n     * \r\n     * @type {string}\r\n     */\r\n    apiKey: string;\r\n\r\n    /**\r\n     * 默认：map.qq.com/api/js\r\n     * \r\n     * @type {string}\r\n     */\r\n    apiHostAndPath?: string;\r\n\r\n    /**\r\n     * API异步加载回调函数名\r\n     * \r\n     * @type {string}\r\n     */\r\n    apiCallback?:string;\r\n\r\n    /**\r\n     * API版本号，默认：2.exp\r\n     * \r\n     * @type {string}\r\n     */\r\n    apiVersion?: string;\r\n\r\n    /**\r\n     * 加载附加库\r\n     * \r\n     * @type {string[]}\r\n     */\r\n    apiLibraries?: string[];\r\n\r\n    /**\r\n     * API 请求协议\r\n     * \r\n     * @type {('http' | 'https' | 'auto')}\r\n     */\r\n    apiProtocol?: 'http' | 'https' | 'auto';\r\n    \r\n    /**\r\n     * 默认地图配置项，等同于[MapOptions 对象规范](http://lbs.qq.com/javascript_v2/doc/mapoptions.html)\r\n     * \r\n     * @type {*}\r\n     */\r\n    mapOptions?: any;\r\n    \r\n    /**\r\n     * 默认街景配置项，等同于[PanoramaOptions 对象规范](http://lbs.qq.com/javascript_v2/doc/panoramaoptions.html)\r\n     * \r\n     * @type {*}\r\n     */\r\n    panoramaOptions?: any;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./.tmp/core/aqm.config.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@angular/core\"\n// module id = 1\n// module chunks = 0","import { Injectable } from '@angular/core';\r\nimport { Subject } from \"rxjs/Subject\";\r\nimport { AqmConfig } from './aqm.config';\r\n\r\ndeclare const document: any;\r\n\r\n@Injectable()\r\nexport class LoaderService {\r\n    private _scriptLoadingPromise: Promise<void>;\r\n    private _cog: any;\r\n    constructor(cog: AqmConfig) {\r\n        this._cog = Object.assign(<AqmConfig>{\r\n            apiProtocol: 'auto',\r\n            apiVersion: '2.exp',\r\n            apiCallback: 'angularQQMapsLoader',\r\n            apiHostAndPath: 'map.qq.com/api/js'\r\n        }, cog);\r\n    }\r\n\r\n    load(): Promise<void> {\r\n        if (this._scriptLoadingPromise) {\r\n            return this._scriptLoadingPromise;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.src = this._getSrc();\r\n\r\n        this._scriptLoadingPromise = new Promise<void>((resolve: Function, reject: Function) => {\r\n\r\n            (<any>window)[this._cog.apiCallback] = () => { resolve(); };\r\n\r\n            script.onerror = (error: Event) => { reject(error); };\r\n        });\r\n\r\n        document.body.appendChild(script);\r\n        return this._scriptLoadingPromise;\r\n    }\r\n\r\n    private _getSrc(): string {\r\n        let protocol: string;\r\n        switch (this._cog.apiProtocol) {\r\n            case 'http':\r\n                protocol = 'http:';\r\n                break;\r\n            case 'https':\r\n                protocol = 'https:';\r\n                break;\r\n            default:\r\n                protocol = '';\r\n                break;\r\n        }\r\n        const queryParams: { [key: string]: string | string[] } = {\r\n            v: this._cog.apiVersion,\r\n            key: this._cog.apiKey,\r\n            libraries: this._cog.apiLibraries,\r\n            callback: this._cog.apiCallback\r\n        };\r\n        const params: string =\r\n            Object.keys(queryParams)\r\n                .filter((k: string) => queryParams[k] != null)\r\n                .filter((k: string) => {\r\n                    return !Array.isArray(queryParams[k]) || (Array.isArray(queryParams[k]) && queryParams[k].length > 0);\r\n                })\r\n                .map((k: string) => {\r\n                    let i = queryParams[k];\r\n                    if (Array.isArray(i)) return { key: k, value: i.join(',') };\r\n                    return { key: k, value: i };\r\n                })\r\n                .map((entry: { key: string, value: string }) => { return `${entry.key}=${entry.value}`; })\r\n                .join('&');\r\n        return `${protocol}//${this._cog.apiHostAndPath}?${params}`;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./.tmp/core/loader.service.ts","import { Component, Input, forwardRef, ViewChild, ElementRef, OnDestroy, EventEmitter, Output, NgZone, OnChanges, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { Subscription } from \"rxjs/Subscription\";\r\n\r\nimport { LoaderService } from './loader.service';\r\nimport { AqmConfig } from './aqm.config';\r\n\r\ndeclare const qq: any;\r\n\r\n@Component({\r\n    selector: 'aqm-map',\r\n    template: ``,\r\n    styles: [ `\r\n        .angular-qq-maps-container { display:block; width:100%; height:100%; }\r\n    ` ],\r\n    host: {\r\n        '[class.angular-qq-maps-container]': 'true'\r\n    },\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class AqmComponent implements OnChanges, OnDestroy {\r\n\r\n    @Input() options: any = {};\r\n    @Output() ready = new EventEmitter<any>();\r\n\r\n    private map: any = null;\r\n\r\n    constructor(private el: ElementRef,\r\n                private COG: AqmConfig, \r\n                private loader: LoaderService,\r\n                private zone: NgZone) { }\r\n\r\n    ngOnInit() {\r\n        this._initMap();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if ('options' in changes) this._updateOptions();\r\n    }\r\n\r\n    private _initMap() {\r\n        if (this.map) return;\r\n        this.loader.load().then(() => {\r\n            this.zone.runOutsideAngular(() => {\r\n                try {\r\n                    this.map = new qq.maps.Map(this.el.nativeElement, this.options);\r\n                } catch (ex) {\r\n                    console.warn('地图初始化失败', ex);\r\n                }\r\n            });\r\n            this.ready.emit(this.map);\r\n        }).catch((error: Error) => {\r\n            console.warn('js加载失败', error);\r\n        })\r\n    }\r\n\r\n    private _updateOptions() {\r\n        this.options = Object.assign({}, this.COG.mapOptions, this.options);\r\n        if (this.map) {\r\n            this.map.setOptions(this.options);\r\n        }\r\n    }\r\n\r\n    private destroy() {\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroy();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./.tmp/core/aqm.component.ts","import { Component, Input, forwardRef, ViewChild, ElementRef, OnDestroy, EventEmitter, Output, NgZone, OnChanges, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { Subscription } from \"rxjs/Subscription\";\r\n\r\nimport { LoaderService } from './loader.service';\r\nimport { AqmConfig } from './aqm.config';\r\n\r\ndeclare const qq: any;\r\ndeclare const window: any;\r\ndeclare const UE: any;\r\n\r\n@Component({\r\n    selector: 'aqm-panorama',\r\n    template: ``,\r\n    styles: [`\r\n        .angular-qq-maps-container { display:block; width:100%; height:100%; }\r\n    ` ],\r\n    host: {\r\n        '[class.angular-qq-maps-container]': 'true'\r\n    },\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class AqmPanoramaComponent implements OnChanges, OnDestroy {\r\n\r\n    @Input() options: any = {};\r\n    @Output() ready = new EventEmitter<any>();\r\n\r\n    private map: any = null;\r\n\r\n    constructor(private el: ElementRef,\r\n        private COG: AqmConfig,\r\n        private loader: LoaderService,\r\n        private zone: NgZone) { }\r\n\r\n    ngOnInit() {\r\n        this._initMap();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if ('options' in changes) this._updateOptions();\r\n    }\r\n\r\n    private _initMap() {\r\n        if (this.map) return;\r\n        this.loader.load().then(() => {\r\n            this.zone.runOutsideAngular(() => {\r\n                try {\r\n                    this.map = new qq.maps.Panorama(this.el.nativeElement, this.options);\r\n                } catch (ex) {\r\n                    console.warn('街景初始化失败', ex);\r\n                }\r\n            });\r\n            this.ready.emit(this.map);\r\n        }).catch((error: Error) => {\r\n            console.warn('js加载失败', error);\r\n        })\r\n    }\r\n\r\n    private _updateOptions() {\r\n        this.options = Object.assign({}, this.COG.panoramaOptions, this.options);\r\n        if (this.map) {\r\n            this.map.setOptions(this.options);\r\n        }\r\n    }\r\n\r\n    private destroy() {\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroy();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./.tmp/core/aqm-panorama.component.ts","import { CommonModule } from '@angular/common';\nimport { NgModule, ModuleWithProviders } from '@angular/core';\n\nimport { AqmComponent } from './core/aqm.component';\nimport { AqmPanoramaComponent } from './core/aqm-panorama.component';\nimport { AqmConfig } from './core/aqm.config';\nimport { LoaderService } from './core/loader.service';\n\nexport { AqmConfig } from './core/aqm.config';\nexport { AqmComponent } from './core/aqm.component';\nexport { AqmPanoramaComponent } from './core/aqm-panorama.component';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [ LoaderService ],\n  declarations: [AqmComponent, AqmPanoramaComponent],\n  exports: [AqmComponent, AqmPanoramaComponent]\n})\nexport class AqmModule {\n    static forRoot(config: AqmConfig): ModuleWithProviders {\n        return {\n            ngModule: AqmModule,\n            providers: [\n                { provide: AqmConfig, useValue: config }\n            ]\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./.tmp/index.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@angular/common\"\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}